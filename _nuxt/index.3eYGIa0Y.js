var Zg=Object.defineProperty;var h=(n,e)=>Zg(n,"name",{value:e,configurable:!0});import{e as Cl,h as Z,g as Gu,f as Ku,r as H,i as De,j as $o,k as at,p as Dt,F as ir,l as ye,m as z,n as pt,q as ht,s as ge,v as st,x as on,T as Xg,y as Al,z as vh,A as Ug,o as ee,B as Fe,w as me,C as Vt,D as Yg,E as _g,G,H as Od,I as Jg,c as Pe,J as Gt,K as Dd,L as qg,M as Qg,N as wh,O as xh,P as Ed,Q as Ld,b as Se,a as ie,d as Ue,R as Oi,S as e0,U as t0,V as i0,t as ws,W as n0,X as r0,Y as s0}from"./entry.B5qfQWb0.js";import{_ as o0}from"./nuxt-link.CVHuIjHk.js";import{_ as Lr}from"./_plugin-vue_export-helper.y4GvAF8u.js";const il=new WeakMap;function l0(n){if(il.has(n))return il.get(n);const e={...n};return e.render?e.render=(t,i,r,s,o,l)=>{var a;if(s.mounted$??t.mounted$){const c=(a=n.render)==null?void 0:a.bind(t)(t,i,r,s,o,l);return c.children===null||typeof c.children=="string"?Cl(c):Z(c)}else{const c=Gu(t._.vnode.el??null)??["<div></div>"];return Ku(c.join(""),c.length)}}:e.template&&(e.template=`
      <template v-if="mounted$">${n.template}</template>
      <template v-else><div></div></template>
    `),e.setup=(t,i)=>{var a;const r=$o(),s={...r.attrs},o=a0(r);for(const c in s)delete r.attrs[c];const l=H(!1);return De(()=>{Object.assign(r.attrs,s),r.vnode.dirs=o,l.value=!0}),Promise.resolve(((a=n.setup)==null?void 0:a.call(n,t,i))||{}).then(c=>typeof c!="function"?(c=c||{},c.mounted$=l,c):(...u)=>{if(l.value){const f=c(...u);return f.children===null||typeof f.children=="string"?Cl(f):Z(f)}else{const f=Gu((r==null?void 0:r.vnode.el)??null)??["<div></div>"];return Ku(f.join(""),f.length)}})},il.set(n,e),e}h(l0,"createClientOnly");function a0(n){if(!n||!n.vnode.dirs)return null;const e=n.vnode.dirs;return n.vnode.dirs=null,e}h(a0,"extractDirectives");let h0=Symbol("headlessui.useid"),c0=0;function Zo(){return at(h0,()=>`${++c0}`)()}h(Zo,"I$1");let Pd=Symbol("Context");var Ye=(n=>(n[n.Open=1]="Open",n[n.Closed=2]="Closed",n[n.Closing=4]="Closing",n[n.Opening=8]="Opening",n))(Ye||{});function u0(){return kh()!==null}h(u0,"s$6");function kh(){return at(Pd,null)}h(kh,"l$2");function f0(n){Dt(Pd,n)}h(f0,"t$6");function ve(n){var e;if(n==null||n.value==null)return null;let t=(e=n.value.$el)!=null?e:n.value;return t instanceof Node?t:null}h(ve,"o$2");var d0=Object.defineProperty,p0=h((n,e,t)=>e in n?d0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"d$3"),$u=h((n,e,t)=>(p0(n,typeof e!="symbol"?e+"":e,t),t),"n$2"),Or;let m0=(Or=class{constructor(){$u(this,"current",this.detect()),$u(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},h(Or,"s"),Or),Pr=new m0;function Et(n,e,...t){if(n in e){let r=e[n];return typeof r=="function"?r(...t):r}let i=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,Et),i}h(Et,"u$4");var xs=(n=>(n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n))(xs||{}),_t=(n=>(n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden",n))(_t||{});function Bt({visible:n=!0,features:e=0,ourProps:t,theirProps:i,...r}){var s;let o=Bd(i,t),l=Object.assign(r,{props:o});if(n||e&2&&o.static)return nl(l);if(e&1){let a=(s=o.unmount)==null||s?0:1;return Et(a,{0(){return null},1(){return nl({...r,props:{...o,hidden:!0,style:{display:"none"}}})}})}return nl(l)}h(Bt,"A$3");function nl({props:n,attrs:e,slots:t,slot:i,name:r}){var s,o;let{as:l,...a}=Nd(n,["unmount","static"]),c=(s=t.default)==null?void 0:s.call(t,i),u={};if(i){let f=!1,d=[];for(let[p,m]of Object.entries(i))typeof m=="boolean"&&(f=!0),m===!0&&d.push(p);f&&(u["data-headlessui-state"]=d.join(" "))}if(l==="template"){if(c=Rd(c??[]),Object.keys(a).length>0||Object.keys(e).length>0){let[f,...d]=c??[];if(!g0(f)||d.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${r} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(a).concat(Object.keys(e)).map(y=>y.trim()).filter((y,g,v)=>v.indexOf(y)===g).sort((y,g)=>y.localeCompare(g)).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let p=Bd((o=f.props)!=null?o:{},a,u),m=Cl(f,p,!0);for(let y in p)y.startsWith("on")&&(m.props||(m.props={}),m.props[y]=p[y]);return m}return Array.isArray(c)&&c.length===1?c[0]:c}return Z(l,Object.assign({},a,u),{default:()=>c})}h(nl,"y$2");function Rd(n){return n.flatMap(e=>e.type===ir?Rd(e.children):[e])}h(Rd,"b");function Bd(...n){if(n.length===0)return{};if(n.length===1)return n[0];let e={},t={};for(let i of n)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(t[r]!=null||(t[r]=[]),t[r].push(i[r])):e[r]=i[r];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(t).map(i=>[i,void 0])));for(let i in t)Object.assign(e,{[i](r,...s){let o=t[i];for(let l of o){if(r instanceof Event&&r.defaultPrevented)return;l(r,...s)}}});return e}h(Bd,"j");function Nd(n,e=[]){let t=Object.assign({},n);for(let i of e)i in t&&delete t[i];return t}h(Nd,"T$2");function g0(n){return n==null?!1:typeof n.type=="string"||typeof n.type=="object"||typeof n.type=="function"}h(g0,"v");function Sh(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch(e=>setTimeout(()=>{throw e}))}h(Sh,"t$5");function Rr(){let n=[],e={addEventListener(t,i,r,s){return t.addEventListener(i,r,s),e.add(()=>t.removeEventListener(i,r,s))},requestAnimationFrame(...t){let i=requestAnimationFrame(...t);e.add(()=>cancelAnimationFrame(i))},nextFrame(...t){e.requestAnimationFrame(()=>{e.requestAnimationFrame(...t)})},setTimeout(...t){let i=setTimeout(...t);e.add(()=>clearTimeout(i))},microTask(...t){let i={current:!0};return Sh(()=>{i.current&&t[0]()}),e.add(()=>{i.current=!1})},style(t,i,r){let s=t.style.getPropertyValue(i);return Object.assign(t.style,{[i]:r}),this.add(()=>{Object.assign(t.style,{[i]:s})})},group(t){let i=Rr();return t(i),this.add(()=>i.dispose())},add(t){return n.push(t),()=>{let i=n.indexOf(t);if(i>=0)for(let r of n.splice(i,1))r()}},dispose(){for(let t of n.splice(0))t()}};return e}h(Rr,"o$1");function y0(n){let e={called:!1};return(...t)=>{if(!e.called)return e.called=!0,n(...t)}}h(y0,"l$1");function rl(n,...e){n&&e.length>0&&n.classList.add(...e)}h(rl,"m$3");function Fr(n,...e){n&&e.length>0&&n.classList.remove(...e)}h(Fr,"d$2");var Ml=(n=>(n.Finished="finished",n.Cancelled="cancelled",n))(Ml||{});function b0(n,e){let t=Rr();if(!n)return t.dispose;let{transitionDuration:i,transitionDelay:r}=getComputedStyle(n),[s,o]=[i,r].map(l=>{let[a=0]=l.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,u)=>u-c);return a});return s!==0?t.setTimeout(()=>e("finished"),s+o):e("finished"),t.add(()=>e("cancelled")),t.dispose}h(b0,"F$1");function Zu(n,e,t,i,r,s){let o=Rr(),l=s!==void 0?y0(s):()=>{};return Fr(n,...r),rl(n,...e,...t),o.nextFrame(()=>{Fr(n,...t),rl(n,...i),o.add(b0(n,a=>(Fr(n,...i,...e),rl(n,...r),l(a))))}),o.add(()=>Fr(n,...e,...t,...i,...r)),o.add(()=>l("cancelled")),o.dispose}h(Zu,"L$1");function ui(n=""){return n.split(/\s+/).filter(e=>e.length>1)}h(ui,"g");let Ch=Symbol("TransitionContext");var v0=(n=>(n.Visible="visible",n.Hidden="hidden",n))(v0||{});function w0(){return at(Ch,null)!==null}h(w0,"me");function x0(){let n=at(Ch,null);if(n===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return n}h(x0,"Te$1");function k0(){let n=at(Ah,null);if(n===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return n}h(k0,"ge");let Ah=Symbol("NestingContext");function Xo(n){return"children"in n?Xo(n.children):n.value.filter(({state:e})=>e==="visible").length>0}h(Xo,"L");function Id(n){let e=H([]),t=H(!1);De(()=>t.value=!0),pt(()=>t.value=!1);function i(s,o=_t.Hidden){let l=e.value.findIndex(({id:a})=>a===s);l!==-1&&(Et(o,{[_t.Unmount](){e.value.splice(l,1)},[_t.Hidden](){e.value[l].state="hidden"}}),!Xo(e)&&t.value&&(n==null||n()))}h(i,"s");function r(s){let o=e.value.find(({id:l})=>l===s);return o?o.state!=="visible"&&(o.state="visible"):e.value.push({id:s,state:"visible"}),()=>i(s,_t.Unmount)}return h(r,"h"),{children:e,register:r,unregister:i}}h(Id,"Q");let Fd=xs.RenderStrategy,Vd=ye({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(n,{emit:e,attrs:t,slots:i,expose:r}){let s=H(0);function o(){s.value|=Ye.Opening,e("beforeEnter")}h(o,"r");function l(){s.value&=~Ye.Opening,e("afterEnter")}h(l,"l");function a(){s.value|=Ye.Closing,e("beforeLeave")}h(a,"f");function c(){s.value&=~Ye.Closing,e("afterLeave")}if(h(c,"S"),!w0()&&u0())return()=>Z(Wd,{...n,onBeforeEnter:o,onAfterEnter:l,onBeforeLeave:a,onAfterLeave:c},i);let u=H(null),f=z(()=>n.unmount?_t.Unmount:_t.Hidden);r({el:u,$el:u});let{show:d,appear:p}=x0(),{register:m,unregister:y}=k0(),g=H(d.value?"visible":"hidden"),v={value:!0},w=Zo(),x={value:!1},C=Id(()=>{!x.value&&g.value!=="hidden"&&(g.value="hidden",y(w),c())});De(()=>{let Y=m(w);pt(Y)}),ht(()=>{if(f.value===_t.Hidden&&w){if(d.value&&g.value!=="visible"){g.value="visible";return}Et(g.value,{hidden:()=>y(w),visible:()=>m(w)})}});let k=ui(n.enter),A=ui(n.enterFrom),M=ui(n.enterTo),W=ui(n.entered),X=ui(n.leave),R=ui(n.leaveFrom),F=ui(n.leaveTo);De(()=>{ht(()=>{if(g.value==="visible"){let Y=ve(u);if(Y instanceof Comment&&Y.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function V(Y){let _=v.value&&!p.value,Q=ve(u);!Q||!(Q instanceof HTMLElement)||_||(x.value=!0,d.value&&o(),d.value||a(),Y(d.value?Zu(Q,k,A,M,W,re=>{x.value=!1,re===Ml.Finished&&l()}):Zu(Q,X,R,F,W,re=>{x.value=!1,re===Ml.Finished&&(Xo(C)||(g.value="hidden",y(w),c()))})))}return h(V,"te"),De(()=>{ge([d],(Y,_,Q)=>{V(Q),v.value=!1},{immediate:!0})}),Dt(Ah,C),f0(z(()=>Et(g.value,{visible:Ye.Open,hidden:Ye.Closed})|s.value)),()=>{let{appear:Y,show:_,enter:Q,enterFrom:re,enterTo:se,entered:be,leave:xe,leaveFrom:he,leaveTo:D,...T}=n,P={ref:u},j={...T,...p.value&&d.value&&Pr.isServer?{class:st([t.class,T.class,...k,...A])}:{}};return Bt({theirProps:j,ourProps:P,slot:{},slots:i,attrs:t,features:Fd,visible:g.value==="visible",name:"TransitionChild"})}}}),S0=Vd,Wd=ye({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(n,{emit:e,attrs:t,slots:i}){let r=kh(),s=z(()=>n.show===null&&r!==null?(r.value&Ye.Open)===Ye.Open:n.show);ht(()=>{if(![!0,!1].includes(s.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let o=H(s.value?"visible":"hidden"),l=Id(()=>{o.value="hidden"}),a=H(!0),c={show:s,appear:z(()=>n.appear||!a.value)};return De(()=>{ht(()=>{a.value=!1,s.value?o.value="visible":Xo(l)||(o.value="hidden")})}),Dt(Ah,l),Dt(Ch,c),()=>{let u=Nd(n,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),f={unmount:n.unmount};return Bt({ourProps:{...f,as:"template"},theirProps:{},slot:{},slots:{...i,default:()=>[Z(S0,{onBeforeEnter:()=>e("beforeEnter"),onAfterEnter:()=>e("afterEnter"),onBeforeLeave:()=>e("beforeLeave"),onAfterLeave:()=>e("afterLeave"),...t,...f,...u},i.default)]},attrs:{},features:Fd,visible:o.value==="visible",name:"Transition"})}}});function jd(n,e,t,i){Pr.isServer||ht(r=>{n=n??window,n.addEventListener(e,t,i),r(()=>n.removeEventListener(e,t,i))})}h(jd,"E$2");function Hd(n,e,t){Pr.isServer||ht(i=>{window.addEventListener(n,e,t),i(()=>window.removeEventListener(n,e,t))})}h(Hd,"w$3");var Mn=(n=>(n[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n))(Mn||{});function C0(){let n=H(0);return Hd("keydown",e=>{e.key==="Tab"&&(n.value=e.shiftKey?1:0)}),n}h(C0,"n$1");var ks=(n=>(n[n.None=1]="None",n[n.Focusable=2]="Focusable",n[n.Hidden=4]="Hidden",n))(ks||{});let Tl=ye({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(n,{slots:e,attrs:t}){return()=>{var i;let{features:r,...s}=n,o={"aria-hidden":(r&2)===2?!0:(i=s["aria-hidden"])!=null?i:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Bt({ourProps:o,theirProps:s,slot:{},attrs:t,slots:e,name:"Hidden"})}}});function A0(n){function e(){document.readyState!=="loading"&&(n(),document.removeEventListener("DOMContentLoaded",e))}h(e,"e"),typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}h(A0,"t$4");let di=[];A0(()=>{function n(e){e.target instanceof HTMLElement&&e.target!==document.body&&di[0]!==e.target&&(di.unshift(e.target),di=di.filter(t=>t!=null&&t.isConnected),di.splice(10))}h(n,"e"),window.addEventListener("click",n,{capture:!0}),window.addEventListener("mousedown",n,{capture:!0}),window.addEventListener("focus",n,{capture:!0}),document.body.addEventListener("click",n,{capture:!0}),document.body.addEventListener("mousedown",n,{capture:!0}),document.body.addEventListener("focus",n,{capture:!0})});function mn(n){if(Pr.isServer)return null;if(n instanceof Node)return n.ownerDocument;if(n!=null&&n.hasOwnProperty("value")){let e=ve(n);if(e)return e.ownerDocument}return document}h(mn,"i$3");let Ol=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(n=>`${n}:not([tabindex='-1'])`).join(",");var Ut=(n=>(n[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll",n))(Ut||{}),zd=(n=>(n[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow",n))(zd||{}),M0=(n=>(n[n.Previous=-1]="Previous",n[n.Next=1]="Next",n))(M0||{});function T0(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(Ol)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}h(T0,"E$1");var Gd=(n=>(n[n.Strict=0]="Strict",n[n.Loose=1]="Loose",n))(Gd||{});function O0(n,e=0){var t;return n===((t=mn(n))==null?void 0:t.body)?!1:Et(e,{0(){return n.matches(Ol)},1(){let i=n;for(;i!==null;){if(i.matches(Ol))return!0;i=i.parentElement}return!1}})}h(O0,"w$2");var D0=(n=>(n[n.Keyboard=0]="Keyboard",n[n.Mouse=1]="Mouse",n))(D0||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",n=>{n.metaKey||n.altKey||n.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",n=>{n.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:n.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ai(n){n==null||n.focus({preventScroll:!0})}h(Ai,"S");let E0=["textarea","input"].join(",");function L0(n){var e,t;return(t=(e=n==null?void 0:n.matches)==null?void 0:e.call(n,E0))!=null?t:!1}h(L0,"I");function P0(n,e=t=>t){return n.slice().sort((t,i)=>{let r=e(t),s=e(i);if(r===null||s===null)return 0;let o=r.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}h(P0,"O");function cs(n,e,{sorted:t=!0,relativeTo:i=null,skipElements:r=[]}={}){var s;let o=(s=Array.isArray(n)?n.length>0?n[0].ownerDocument:document:n==null?void 0:n.ownerDocument)!=null?s:document,l=Array.isArray(n)?t?P0(n):n:T0(n);r.length>0&&l.length>1&&(l=l.filter(m=>!r.includes(m))),i=i??o.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,l.indexOf(i))-1;if(e&4)return Math.max(0,l.indexOf(i))+1;if(e&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},f=0,d=l.length,p;do{if(f>=d||f+d<=0)return 0;let m=c+f;if(e&16)m=(m+d)%d;else{if(m<0)return 3;if(m>=d)return 1}p=l[m],p==null||p.focus(u),f+=a}while(p!==o.activeElement);return e&6&&L0(p)&&p.select(),2}h(cs,"P");function Kd(n){if(!n)return new Set;if(typeof n=="function")return new Set(n());let e=new Set;for(let t of n.value){let i=ve(t);i instanceof HTMLElement&&e.add(i)}return e}h(Kd,"B");var $d=(n=>(n[n.None=1]="None",n[n.InitialFocus=2]="InitialFocus",n[n.TabLock=4]="TabLock",n[n.FocusLock=8]="FocusLock",n[n.RestoreFocus=16]="RestoreFocus",n[n.All=30]="All",n))($d||{});let vn=Object.assign(ye({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:H(new Set)}},inheritAttrs:!1,setup(n,{attrs:e,slots:t,expose:i}){let r=H(null);i({el:r,$el:r});let s=z(()=>mn(r)),o=H(!1);De(()=>o.value=!0),pt(()=>o.value=!1),B0({ownerDocument:s},z(()=>o.value&&!!(n.features&16)));let l=N0({ownerDocument:s,container:r,initialFocus:z(()=>n.initialFocus)},z(()=>o.value&&!!(n.features&2)));I0({ownerDocument:s,container:r,containers:n.containers,previousActiveElement:l},z(()=>o.value&&!!(n.features&8)));let a=C0();function c(p){let m=ve(r);m&&(y=>y())(()=>{Et(a.value,{[Mn.Forwards]:()=>{cs(m,Ut.First,{skipElements:[p.relatedTarget]})},[Mn.Backwards]:()=>{cs(m,Ut.Last,{skipElements:[p.relatedTarget]})}})})}h(c,"a");let u=H(!1);function f(p){p.key==="Tab"&&(u.value=!0,requestAnimationFrame(()=>{u.value=!1}))}h(f,"F");function d(p){if(!o.value)return;let m=Kd(n.containers);ve(r)instanceof HTMLElement&&m.add(ve(r));let y=p.relatedTarget;y instanceof HTMLElement&&y.dataset.headlessuiFocusGuard!=="true"&&(Zd(m,y)||(u.value?cs(ve(r),Et(a.value,{[Mn.Forwards]:()=>Ut.Next,[Mn.Backwards]:()=>Ut.Previous})|Ut.WrapAround,{relativeTo:p.target}):p.target instanceof HTMLElement&&Ai(p.target)))}return h(d,"H"),()=>{let p={},m={ref:r,onKeydown:f,onFocusout:d},{features:y,initialFocus:g,containers:v,...w}=n;return Z(ir,[!!(y&4)&&Z(Tl,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:c,features:ks.Focusable}),Bt({ourProps:m,theirProps:{...e,...w},slot:p,attrs:e,slots:t,name:"FocusTrap"}),!!(y&4)&&Z(Tl,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:c,features:ks.Focusable})])}}}),{features:$d});function R0(n){let e=H(di.slice());return ge([n],([t],[i])=>{i===!0&&t===!1?Sh(()=>{e.value.splice(0)}):i===!1&&t===!0&&(e.value=di.slice())},{flush:"post"}),()=>{var t;return(t=e.value.find(i=>i!=null&&i.isConnected))!=null?t:null}}h(R0,"W");function B0({ownerDocument:n},e){let t=R0(e);De(()=>{ht(()=>{var i,r;e.value||((i=n.value)==null?void 0:i.activeElement)===((r=n.value)==null?void 0:r.body)&&Ai(t())},{flush:"post"})}),pt(()=>{e.value&&Ai(t())})}h(B0,"$");function N0({ownerDocument:n,container:e,initialFocus:t},i){let r=H(null),s=H(!1);return De(()=>s.value=!0),pt(()=>s.value=!1),De(()=>{ge([e,t,i],(o,l)=>{if(o.every((c,u)=>(l==null?void 0:l[u])===c)||!i.value)return;let a=ve(e);a&&Sh(()=>{var c,u;if(!s.value)return;let f=ve(t),d=(c=n.value)==null?void 0:c.activeElement;if(f){if(f===d){r.value=d;return}}else if(a.contains(d)){r.value=d;return}f?Ai(f):cs(a,Ut.First|Ut.NoScroll)===zd.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),r.value=(u=n.value)==null?void 0:u.activeElement})},{immediate:!0,flush:"post"})}),r}h(N0,"z");function I0({ownerDocument:n,container:e,containers:t,previousActiveElement:i},r){var s;jd((s=n.value)==null?void 0:s.defaultView,"focus",o=>{if(!r.value)return;let l=Kd(t);ve(e)instanceof HTMLElement&&l.add(ve(e));let a=i.value;if(!a)return;let c=o.target;c&&c instanceof HTMLElement?Zd(l,c)?(i.value=c,Ai(c)):(o.preventDefault(),o.stopPropagation(),Ai(a)):Ai(i.value)},!0)}h(I0,"J");function Zd(n,e){for(let t of n)if(t.contains(e))return!0;return!1}h(Zd,"N$2");function F0(n){let e=on(n.getSnapshot());return pt(n.subscribe(()=>{e.value=n.getSnapshot()})),e}h(F0,"m$2");function V0(n,e){let t=n(),i=new Set;return{getSnapshot(){return t},subscribe(r){return i.add(r),()=>i.delete(r)},dispatch(r,...s){let o=e[r].call(t,...s);o&&(t=o,i.forEach(l=>l()))}}}h(V0,"a$1");function W0(){let n;return{before({doc:e}){var t;let i=e.documentElement;n=((t=e.defaultView)!=null?t:window).innerWidth-i.clientWidth},after({doc:e,d:t}){let i=e.documentElement,r=i.clientWidth-i.offsetWidth,s=n-r;t.style(i,"paddingRight",`${s}px`)}}}h(W0,"c");function Xd(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}h(Xd,"t$2");function j0(){return/Android/gi.test(window.navigator.userAgent)}h(j0,"i$2");function H0(){return Xd()||j0()}h(H0,"n");function z0(){return Xd()?{before({doc:n,d:e,meta:t}){function i(r){return t.containers.flatMap(s=>s()).some(s=>s.contains(r))}h(i,"o"),e.microTask(()=>{var r;if(window.getComputedStyle(n.documentElement).scrollBehavior!=="auto"){let l=Rr();l.style(n.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let s=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;e.addEventListener(n,"click",l=>{if(l.target instanceof HTMLElement)try{let a=l.target.closest("a");if(!a)return;let{hash:c}=new URL(a.href),u=n.querySelector(c);u&&!i(u)&&(o=u)}catch{}},!0),e.addEventListener(n,"touchstart",l=>{if(l.target instanceof HTMLElement)if(i(l.target)){let a=l.target;for(;a.parentElement&&i(a.parentElement);)a=a.parentElement;e.style(a,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(n,"touchmove",l=>{if(l.target instanceof HTMLElement)if(i(l.target)){let a=l.target;for(;a.parentElement&&a.dataset.headlessuiPortal!==""&&!(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth);)a=a.parentElement;a.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),e.add(()=>{var l;let a=(l=window.scrollY)!=null?l:window.pageYOffset;s!==a&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}h(z0,"w$1");function G0(){return{before({doc:n,d:e}){e.style(n.documentElement,"overflow","hidden")}}}h(G0,"l");function K0(n){let e={};for(let t of n)Object.assign(e,t(e));return e}h(K0,"m$1");let Si=V0(()=>new Map,{PUSH(n,e){var t;let i=(t=this.get(n))!=null?t:{doc:n,count:0,d:Rr(),meta:new Set};return i.count++,i.meta.add(e),this.set(n,i),this},POP(n,e){let t=this.get(n);return t&&(t.count--,t.meta.delete(e)),this},SCROLL_PREVENT({doc:n,d:e,meta:t}){let i={doc:n,d:e,meta:K0(t)},r=[z0(),W0(),G0()];r.forEach(({before:s})=>s==null?void 0:s(i)),r.forEach(({after:s})=>s==null?void 0:s(i))},SCROLL_ALLOW({d:n}){n.dispose()},TEARDOWN({doc:n}){this.delete(n)}});Si.subscribe(()=>{let n=Si.getSnapshot(),e=new Map;for(let[t]of n)e.set(t,t.documentElement.style.overflow);for(let t of n.values()){let i=e.get(t.doc)==="hidden",r=t.count!==0;(r&&!i||!r&&i)&&Si.dispatch(t.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",t),t.count===0&&Si.dispatch("TEARDOWN",t)}});function $0(n,e,t){let i=F0(Si),r=z(()=>{let s=n.value?i.value.get(n.value):void 0;return s?s.count>0:!1});return ge([n,e],([s,o],[l],a)=>{if(!s||!o)return;Si.dispatch("PUSH",s,t);let c=!1;a(()=>{c||(Si.dispatch("POP",l??s,t),c=!0)})},{immediate:!0}),r}h($0,"d");let sl=new Map,wn=new Map;function Xu(n,e=H(!0)){ht(t=>{var i;if(!e.value)return;let r=ve(n);if(!r)return;t(function(){var o;if(!r)return;let l=(o=wn.get(r))!=null?o:1;if(l===1?wn.delete(r):wn.set(r,l-1),l!==1)return;let a=sl.get(r);a&&(a["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",a["aria-hidden"]),r.inert=a.inert,sl.delete(r))});let s=(i=wn.get(r))!=null?i:0;wn.set(r,s+1),s===0&&(sl.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0)})}h(Xu,"E");function Vr(n,e,t){Pr.isServer||ht(i=>{document.addEventListener(n,e,t),i(()=>document.removeEventListener(n,e,t))})}h(Vr,"u$3");function Z0(n,e,t=z(()=>!0)){function i(s,o){if(!t.value||s.defaultPrevented)return;let l=o(s);if(l===null||!l.getRootNode().contains(l))return;let a=h(function c(u){return typeof u=="function"?c(u()):Array.isArray(u)||u instanceof Set?u:[u]},"o")(n);for(let c of a){if(c===null)continue;let u=c instanceof HTMLElement?c:ve(c);if(u!=null&&u.contains(l)||s.composed&&s.composedPath().includes(u))return}return!O0(l,Gd.Loose)&&l.tabIndex!==-1&&s.preventDefault(),e(s,l)}h(i,"a");let r=H(null);Vr("pointerdown",s=>{var o,l;t.value&&(r.value=((l=(o=s.composedPath)==null?void 0:o.call(s))==null?void 0:l[0])||s.target)},!0),Vr("mousedown",s=>{var o,l;t.value&&(r.value=((l=(o=s.composedPath)==null?void 0:o.call(s))==null?void 0:l[0])||s.target)},!0),Vr("click",s=>{H0()||r.value&&(i(s,()=>r.value),r.value=null)},!0),Vr("touchend",s=>i(s,()=>s.target instanceof HTMLElement?s.target:null),!0),Hd("blur",s=>i(s,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}h(Z0,"w");function X0({defaultContainers:n=[],portals:e,mainTreeNodeRef:t}={}){let i=H(null),r=mn(i);function s(){var o,l,a;let c=[];for(let u of n)u!==null&&(u instanceof HTMLElement?c.push(u):"value"in u&&u.value instanceof HTMLElement&&c.push(u.value));if(e!=null&&e.value)for(let u of e.value)c.push(u);for(let u of(o=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?o:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(u.contains(ve(i))||u.contains((a=(l=ve(i))==null?void 0:l.getRootNode())==null?void 0:a.host)||c.some(f=>u.contains(f))||c.push(u));return c}return h(s,"u"),{resolveContainers:s,contains(o){return s().some(l=>l.contains(o))},mainTreeNodeRef:i,MainTreeNode(){return t!=null?null:Z(Tl,{features:ks.Hidden,ref:i})}}}h(X0,"N$1");let Ud=Symbol("ForcePortalRootContext");function U0(){return at(Ud,!1)}h(U0,"s$3");let Uu=ye({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(n,{slots:e,attrs:t}){return Dt(Ud,n.force),()=>{let{force:i,...r}=n;return Bt({theirProps:r,ourProps:{},slot:{},slots:e,attrs:t,name:"ForcePortalRoot"})}}}),Yd=Symbol("StackContext");var Dl=(n=>(n[n.Add=0]="Add",n[n.Remove=1]="Remove",n))(Dl||{});function Y0(){return at(Yd,()=>{})}h(Y0,"y");function _0({type:n,enabled:e,element:t,onUpdate:i}){let r=Y0();function s(...o){i==null||i(...o),r(...o)}h(s,"t"),De(()=>{ge(e,(o,l)=>{o?s(0,n,t):l===!0&&s(1,n,t)},{immediate:!0,flush:"sync"})}),pt(()=>{e.value&&s(1,n,t)}),Dt(Yd,s)}h(_0,"R");var _d=(n=>(n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n))(_d||{});let J0=Symbol("DescriptionContext");function q0({slot:n=H({}),name:e="Description",props:t={}}={}){let i=H([]);function r(s){return i.value.push(s),()=>{let o=i.value.indexOf(s);o!==-1&&i.value.splice(o,1)}}return h(r,"r"),Dt(J0,{register:r,slot:n,name:e,props:t}),z(()=>i.value.length>0?i.value.join(" "):void 0)}h(q0,"k");function Q0(n){let e=mn(n);if(!e){if(n===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${n}`)}let t=e.getElementById("headlessui-portal-root");if(t)return t;let i=e.createElement("div");return i.setAttribute("id","headlessui-portal-root"),e.body.appendChild(i)}h(Q0,"x");let ey=ye({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(n,{slots:e,attrs:t}){let i=H(null),r=z(()=>mn(i)),s=U0(),o=at(Jd,null),l=H(s===!0||o==null?Q0(i.value):o.resolveTarget()),a=H(!1);De(()=>{a.value=!0}),ht(()=>{s||o!=null&&(l.value=o.resolveTarget())});let c=at(El,null),u=!1,f=$o();return ge(i,()=>{if(u||!c)return;let d=ve(i);d&&(pt(c.register(d),f),u=!0)}),pt(()=>{var d,p;let m=(d=r.value)==null?void 0:d.getElementById("headlessui-portal-root");m&&l.value===m&&l.value.children.length<=0&&((p=l.value.parentElement)==null||p.removeChild(l.value))}),()=>{if(!a.value||l.value===null)return null;let d={ref:i,"data-headlessui-portal":""};return Z(Xg,{to:l.value},Bt({ourProps:d,theirProps:n,slot:{},attrs:t,slots:e,name:"Portal"}))}}}),El=Symbol("PortalParentContext");function ty(){let n=at(El,null),e=H([]);function t(s){return e.value.push(s),n&&n.register(s),()=>i(s)}h(t,"u");function i(s){let o=e.value.indexOf(s);o!==-1&&e.value.splice(o,1),n&&n.unregister(s)}h(i,"t");let r={register:t,unregister:i,portals:e};return[e,ye({name:"PortalWrapper",setup(s,{slots:o}){return Dt(El,r),()=>{var l;return(l=o.default)==null?void 0:l.call(o)}}})]}h(ty,"A$1");let Jd=Symbol("PortalGroupContext"),iy=ye({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(n,{attrs:e,slots:t}){let i=Al({resolveTarget(){return n.target}});return Dt(Jd,i),()=>{let{target:r,...s}=n;return Bt({theirProps:s,ourProps:{},slot:{},attrs:e,slots:t,name:"PortalGroup"})}}});var ny=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(ny||{});let Ll=Symbol("DialogContext");function Mh(n){let e=at(Ll,null);if(e===null){let t=new Error(`<${n} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Mh),t}return e}h(Mh,"T");let Wr="DC8F892D-2EBD-447C-A4C8-A03058436FF4",ry=ye({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Wr},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:n=>!0},setup(n,{emit:e,attrs:t,slots:i,expose:r}){var s,o;let l=(s=n.id)!=null?s:`headlessui-dialog-${Zo()}`,a=H(!1);De(()=>{a.value=!0});let c=!1,u=z(()=>n.role==="dialog"||n.role==="alertdialog"?n.role:(c||(c=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),f=H(0),d=kh(),p=z(()=>n.open===Wr&&d!==null?(d.value&Ye.Open)===Ye.Open:n.open),m=H(null),y=z(()=>mn(m));if(r({el:m,$el:m}),!(n.open!==Wr||d!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof p.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${p.value===Wr?void 0:n.open}`);let g=z(()=>a.value&&p.value?0:1),v=z(()=>g.value===0),w=z(()=>f.value>1),x=at(Ll,null)!==null,[C,k]=ty(),{resolveContainers:A,mainTreeNodeRef:M,MainTreeNode:W}=X0({portals:C,defaultContainers:[z(()=>{var D;return(D=se.panelRef.value)!=null?D:m.value})]}),X=z(()=>w.value?"parent":"leaf"),R=z(()=>d!==null?(d.value&Ye.Closing)===Ye.Closing:!1),F=z(()=>x||R.value?!1:v.value),V=z(()=>{var D,T,P;return(P=Array.from((T=(D=y.value)==null?void 0:D.querySelectorAll("body > *"))!=null?T:[]).find(j=>j.id==="headlessui-portal-root"?!1:j.contains(ve(M))&&j instanceof HTMLElement))!=null?P:null});Xu(V,F);let Y=z(()=>w.value?!0:v.value),_=z(()=>{var D,T,P;return(P=Array.from((T=(D=y.value)==null?void 0:D.querySelectorAll("[data-headlessui-portal]"))!=null?T:[]).find(j=>j.contains(ve(M))&&j instanceof HTMLElement))!=null?P:null});Xu(_,Y),_0({type:"Dialog",enabled:z(()=>g.value===0),element:m,onUpdate:(D,T)=>{if(T==="Dialog")return Et(D,{[Dl.Add]:()=>f.value+=1,[Dl.Remove]:()=>f.value-=1})}});let Q=q0({name:"DialogDescription",slot:z(()=>({open:p.value}))}),re=H(null),se={titleId:re,panelRef:H(null),dialogState:g,setTitleId(D){re.value!==D&&(re.value=D)},close(){e("close",!1)}};Dt(Ll,se);let be=z(()=>!(!v.value||w.value));Z0(A,(D,T)=>{se.close(),vh(()=>T==null?void 0:T.focus())},be);let xe=z(()=>!(w.value||g.value!==0));jd((o=y.value)==null?void 0:o.defaultView,"keydown",D=>{xe.value&&(D.defaultPrevented||D.key===_d.Escape&&(D.preventDefault(),D.stopPropagation(),se.close()))});let he=z(()=>!(R.value||g.value!==0||x));return $0(y,he,D=>{var T;return{containers:[...(T=D.containers)!=null?T:[],A]}}),ht(D=>{if(g.value!==0)return;let T=ve(m);if(!T)return;let P=new ResizeObserver(j=>{for(let K of j){let U=K.target.getBoundingClientRect();U.x===0&&U.y===0&&U.width===0&&U.height===0&&se.close()}});P.observe(T),D(()=>P.disconnect())}),()=>{let{open:D,initialFocus:T,...P}=n,j={...t,ref:m,id:l,role:u.value,"aria-modal":g.value===0?!0:void 0,"aria-labelledby":re.value,"aria-describedby":Q.value},K={open:g.value===0};return Z(Uu,{force:!0},()=>[Z(ey,()=>Z(iy,{target:m.value},()=>Z(Uu,{force:!1},()=>Z(vn,{initialFocus:T,containers:A,features:v.value?Et(X.value,{parent:vn.features.RestoreFocus,leaf:vn.features.All&~vn.features.FocusLock}):vn.features.None},()=>Z(k,{},()=>Bt({ourProps:j,theirProps:{...P,...t},slot:K,attrs:t,slots:i,visible:g.value===0,features:xs.RenderStrategy|xs.Static,name:"Dialog"})))))),Z(W)])}}}),sy=ye({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(n,{attrs:e,slots:t,expose:i}){var r;let s=(r=n.id)!=null?r:`headlessui-dialog-panel-${Zo()}`,o=Mh("DialogPanel");i({el:o.panelRef,$el:o.panelRef});function l(a){a.stopPropagation()}return h(l,"u"),()=>{let{...a}=n,c={id:s,ref:o.panelRef,onClick:l};return Bt({ourProps:c,theirProps:a,slot:{open:o.dialogState.value===0},attrs:e,slots:t,name:"DialogPanel"})}}}),oy=ye({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:null}},setup(n,{attrs:e,slots:t}){var i;let r=(i=n.id)!=null?i:`headlessui-dialog-title-${Zo()}`,s=Mh("DialogTitle");return De(()=>{s.setTitleId(r),pt(()=>s.setTitleId(null))}),()=>{let{...o}=n;return Bt({ourProps:{id:r},theirProps:o,slot:{open:s.dialogState.value===0},attrs:e,slots:t,name:"DialogTitle"})}}});const ly={inheritAttrs:!1},Th=ye({...ly,__name:"ActionTrigger",props:{link:{default:void 0},disabled:{type:Boolean,default:!1}},setup(n){const e=n,t=z(()=>typeof e.link<"u"),i=z(()=>typeof e.link=="string"),r=z(()=>i.value&&e.link.startsWith("#")),s=z(()=>i.value&&/^https?:\/\//.test(e.link)),o=z(()=>t.value&&!r.value&&!s.value),l=z(()=>e.disabled?"button":t.value&&!s.value?o0:t.value?"a":"button"),a=Ug(),c=z(()=>{if(e.disabled)return{disabled:!0};if(o.value)return{to:e.link};if(t.value){const u={href:e.link};return"target"in a&&(u.rel="noopener"),u}else return{type:"button"}});return(u,f)=>(ee(),Fe(Jg(G(l)),Od({...G(c),...u.$attrs},{class:{"cursor-pointer":!u.disabled,"cursor-default":u.disabled}}),{default:me(()=>[Vt(u.$slots,"default",Yg(_g({link:G(t),external:G(s),anchor:G(r)})))]),_:3},16,["class"]))}}),ay=ye({__name:"Button",props:{theme:{default:"text"}},setup(n){return(e,t)=>{const i=Th;return ee(),Fe(i,Od({class:{"inline-flex justify-center rounded bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow [text-shadow:0_0.125em_0.25em_rgba(0,0,0,0.15)] focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-primary disabled:bg-slate-100 disabled:bg-none disabled:text-slate-300 disabled:[text-shadow:none] not-disabled:hover:bg-primary-500 not-disabled:active:translate-y-px not-disabled:active:scale-[0.98] not-disabled:active:bg-primary-700 not-disabled:active:text-primary-100 dark:bg-primary-600 dark:text-primary-50 dark:focus-visible:outline-primary-400 dark:disabled:bg-slate-400 dark:disabled:text-slate-300 dark:not-disabled:hover:bg-primary-500 dark:not-disabled:hover:text-white dark:not-disabled:active:bg-primary-700 dark:not-disabled:active:text-primary-100 md:px-5 md:py-2.5":e.theme==="fancy","inline-flex text-sm text-primary-900 underline decoration-primary-400 underline-offset-2 disabled:text-slate-300 disabled:decoration-slate-100 not-disabled:hover:text-primary-700 not-disabled:active:text-primary-800 dark:text-primary-200 dark:decoration-primary-400 dark:disabled:text-slate-500 dark:disabled:decoration-slate-600 dark:not-disabled:hover:text-primary-100 dark:not-disabled:active:text-primary-400":e.theme==="text"}},e.$attrs),{default:me(()=>[Vt(e.$slots,"default")]),_:3},16,["class"])}}}),hy={},cy={role:"alert",class:"rounded bg-primary-50 p-4 text-sm text-primary-800 dark:bg-primary-950 dark:text-primary-200 md:mt-6"};function uy(n,e){return ee(),Pe("div",cy,[Vt(n.$slots,"default")])}h(uy,"_sfc_render$1");const fy=Lr(hy,[["render",uy]]),qd=Gt("share",()=>{const n=H(!1),e=H("");return{show:n,url:e}});function Oh(n){return qg()?(Qg(n),!0):!1}h(Oh,"tryOnScopeDispose");function we(n){return typeof n=="function"?n():G(n)}h(we,"toValue");const Dh=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const dy=Object.prototype.toString,py=h(n=>dy.call(n)==="[object Object]","isObject"),ii=h(()=>{},"noop");function Eh(n,e){function t(...i){return new Promise((r,s)=>{Promise.resolve(n(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(r).catch(s)})}return h(t,"wrapper"),t}h(Eh,"createFilterWrapper");const Qd=h(n=>n(),"bypassFilter");function my(n,e={}){let t,i,r=ii;const s=h(l=>{clearTimeout(l),r(),r=ii},"_clearTimeout");return h(l=>{const a=we(n),c=we(e.maxWait);return t&&s(t),a<=0||c!==void 0&&c<=0?(i&&(s(i),i=null),Promise.resolve(l())):new Promise((u,f)=>{r=e.rejectOnCancel?f:u,c&&!i&&(i=setTimeout(()=>{t&&s(t),i=null,u(l())},c)),t=setTimeout(()=>{i&&s(i),i=null,u(l())},a)})},"filter")}h(my,"debounceFilter");function gy(...n){let e=0,t,i=!0,r=ii,s,o,l,a,c;!Ed(n[0])&&typeof n[0]=="object"?{delay:o,trailing:l=!0,leading:a=!0,rejectOnCancel:c=!1}=n[0]:[o,l=!0,a=!0,c=!1]=n;const u=h(()=>{t&&(clearTimeout(t),t=void 0,r(),r=ii)},"clear");return h(d=>{const p=we(o),m=Date.now()-e,y=h(()=>s=d(),"invoke");return u(),p<=0?(e=Date.now(),y()):(m>p&&(a||!i)?(e=Date.now(),y()):l&&(s=new Promise((g,v)=>{r=c?v:g,t=setTimeout(()=>{e=Date.now(),i=!0,g(y()),u()},Math.max(0,p-m))})),!a&&!t&&(t=setTimeout(()=>i=!0,p)),i=!1,s)},"filter")}h(gy,"throttleFilter");function yy(n=Qd){const e=H(!0);function t(){e.value=!1}h(t,"pause");function i(){e.value=!0}h(i,"resume");const r=h((...s)=>{e.value&&n(...s)},"eventFilter");return{isActive:xh(e),pause:t,resume:i,eventFilter:r}}h(yy,"pausableFilter");function by(n){let e;function t(){return e||(e=n()),e}return h(t,"wrapper"),t.reset=async()=>{const i=e;e=void 0,i&&await i},t}h(by,"createSingletonPromise");function vy(n){return n||$o()}h(vy,"getLifeCycleTarget");function wy(...n){if(n.length!==1)return wh(...n);const e=n[0];return typeof e=="function"?xh(Dd(()=>({get:e,set:ii}))):H(e)}h(wy,"toRef");function xy(n,e=1e4){return Dd((t,i)=>{let r=we(n),s;const o=h(()=>setTimeout(()=>{r=we(n),i()},we(e)),"resetAfter");return Oh(()=>{clearTimeout(s)}),{get(){return t(),r},set(l){r=l,i(),clearTimeout(s),s=o()}}})}h(xy,"refAutoReset");function ky(n,e=200,t={}){return Eh(my(e,t),n)}h(ky,"useDebounceFn");function Sy(n,e=200,t={}){const i=H(n.value),r=ky(()=>{i.value=n.value},e,t);return ge(n,()=>r()),i}h(Sy,"refDebounced");function Cy(n,e=200,t=!1,i=!0,r=!1){return Eh(gy(e,t,i,r),n)}h(Cy,"useThrottleFn");function Ay(n,e=200,t=!0,i=!0){if(e<=0)return n;const r=H(n.value),s=Cy(()=>{r.value=n.value},e,t,i);return ge(n,()=>s()),r}h(Ay,"refThrottled");function My(n,e,t={}){const{eventFilter:i=Qd,...r}=t;return ge(n,Eh(i,e),r)}h(My,"watchWithFilter");function Ty(n,e,t={}){const{eventFilter:i,...r}=t,{eventFilter:s,pause:o,resume:l,isActive:a}=yy(i);return{stop:My(n,e,{...r,eventFilter:s}),pause:o,resume:l,isActive:a}}h(Ty,"watchPausable");function Oy(n,e,t={}){const{flush:i="sync",deep:r=!1,immediate:s=!0}=t;return Array.isArray(e)||(e=[e]),ge(n,o=>e.forEach(l=>l.value=o),{flush:i,deep:r,immediate:s})}h(Oy,"syncRefs");function Dy(n,e=!0,t){vy()?De(n,t):e?n():vh(n)}h(Dy,"tryOnMounted");function Ey(n,e,t={}){const{immediate:i=!0}=t,r=H(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}h(o,"clear");function l(){r.value=!1,o()}h(l,"stop");function a(...c){o(),r.value=!0,s=setTimeout(()=>{r.value=!1,s=null,n(...c)},we(e))}return h(a,"start"),i&&(r.value=!0,Dh&&a()),Oh(l),{isPending:xh(r),start:a,stop:l}}h(Ey,"useTimeoutFn");function Ly(n,e,t){let i;Ed(t)?i={evaluating:t}:i=t||{};const{lazy:r=!1,evaluating:s=void 0,shallow:o=!0,onError:l=ii}=i,a=H(!r),c=o?on(e):H(e);let u=0;return ht(async f=>{if(!a.value)return;u++;const d=u;let p=!1;s&&Promise.resolve().then(()=>{s.value=!0});try{const m=await n(y=>{f(()=>{s&&(s.value=!1),p||y()})});d===u&&(c.value=m)}catch(m){l(m)}finally{s&&d===u&&(s.value=!1),p=!0}}),r?z(()=>(a.value=!0,c.value)):c}h(Ly,"computedAsync");const nr=Dh?window:void 0,Lh=Dh?window.navigator:void 0;function ep(n){var e;const t=we(n);return(e=t==null?void 0:t.$el)!=null?e:t}h(ep,"unrefElement");function ze(...n){let e,t,i,r;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,i,r]=n,e=nr):[e,t,i,r]=n,!e)return ii;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const s=[],o=h(()=>{s.forEach(u=>u()),s.length=0},"cleanup"),l=h((u,f,d,p)=>(u.addEventListener(f,d,p),()=>u.removeEventListener(f,d,p)),"register"),a=ge(()=>[ep(e),we(r)],([u,f])=>{if(o(),!u)return;const d=py(f)?{...f}:f;s.push(...t.flatMap(p=>i.map(m=>l(u,p,m,d))))},{immediate:!0,flush:"post"}),c=h(()=>{a(),o()},"stop");return Oh(c),c}h(ze,"useEventListener");function Py(){const n=H(!1),e=$o();return e&&De(()=>{n.value=!0},e),n}h(Py,"useMounted");function Ph(n){const e=Py();return z(()=>(e.value,!!n()))}h(Ph,"useSupported");function Pl(n,e={}){const{controls:t=!1,navigator:i=Lh}=e,r=Ph(()=>i&&"permissions"in i),s=on(),o=typeof n=="string"?{name:n}:n,l=on(),a=h(()=>{var u,f;l.value=(f=(u=s.value)==null?void 0:u.state)!=null?f:"prompt"},"update");ze(s,"change",a);const c=by(async()=>{if(r.value){if(!s.value)try{s.value=await i.permissions.query(o)}catch{s.value=void 0}finally{a()}if(t)return Ld(s.value)}});return c(),t?{state:l,isSupported:r,query:c}:l}h(Pl,"usePermission");function Ry(n={}){const{navigator:e=Lh,read:t=!1,source:i,copiedDuring:r=1500,legacy:s=!1}=n,o=Ph(()=>e&&"clipboard"in e),l=Pl("clipboard-read"),a=Pl("clipboard-write"),c=z(()=>o.value||s),u=H(""),f=H(!1),d=Ey(()=>f.value=!1,r);function p(){o.value&&v(l.value)?e.clipboard.readText().then(w=>{u.value=w}):u.value=g()}h(p,"updateText"),c.value&&t&&ze(["copy","cut"],p);async function m(w=we(i)){c.value&&w!=null&&(o.value&&v(a.value)?await e.clipboard.writeText(w):y(w),u.value=w,f.value=!0,d.start())}h(m,"copy");function y(w){const x=document.createElement("textarea");x.value=w??"",x.style.position="absolute",x.style.opacity="0",document.body.appendChild(x),x.select(),document.execCommand("copy"),x.remove()}h(y,"legacyCopy");function g(){var w,x,C;return(C=(x=(w=document==null?void 0:document.getSelection)==null?void 0:w.call(document))==null?void 0:x.toString())!=null?C:""}h(g,"legacyRead");function v(w){return w==="granted"||w==="prompt"}return h(v,"isAllowed"),{isSupported:c,text:u,copied:f,copy:m}}h(Ry,"useClipboard");const jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hr="__vueuse_ssr_handlers__",By=Ny();function Ny(){return Hr in jr||(jr[Hr]=jr[Hr]||{}),jr[Hr]}h(Ny,"getHandlers");function Iy(n,e){return By[n]||e}h(Iy,"getSSRHandler");function Fy(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"?"object":Number.isNaN(n)?"any":"number"}h(Fy,"guessSerializerType");const Vy={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}},Yu="vueuse-storage";function Wy(n,e,t,i={}){var r;const{flush:s="pre",deep:o=!0,listenToStorageChanges:l=!0,writeDefaults:a=!0,mergeDefaults:c=!1,shallow:u,window:f=nr,eventFilter:d,onError:p=h(R=>{console.error(R)},"onError"),initOnMounted:m}=i,y=(u?on:H)(typeof e=="function"?e():e);if(!t)try{t=Iy("getDefaultStorage",()=>{var R;return(R=nr)==null?void 0:R.localStorage})()}catch(R){p(R)}if(!t)return y;const g=we(e),v=Fy(g),w=(r=i.serializer)!=null?r:Vy[v],{pause:x,resume:C}=Ty(y,()=>A(y.value),{flush:s,deep:o,eventFilter:d});f&&l&&Dy(()=>{t instanceof Storage?ze(f,"storage",W):ze(f,Yu,X),m&&W()}),m||W();function k(R,F){if(f){const V={key:n,oldValue:R,newValue:F,storageArea:t};f.dispatchEvent(t instanceof Storage?new StorageEvent("storage",V):new CustomEvent(Yu,{detail:V}))}}h(k,"dispatchWriteEvent");function A(R){try{const F=t.getItem(n);if(R==null)k(F,null),t.removeItem(n);else{const V=w.write(R);F!==V&&(t.setItem(n,V),k(F,V))}}catch(F){p(F)}}h(A,"write");function M(R){const F=R?R.newValue:t.getItem(n);if(F==null)return a&&g!=null&&t.setItem(n,w.write(g)),g;if(!R&&c){const V=w.read(F);return typeof c=="function"?c(V,g):v==="object"&&!Array.isArray(V)?{...g,...V}:V}else return typeof F!="string"?F:w.read(F)}h(M,"read");function W(R){if(!(R&&R.storageArea!==t)){if(R&&R.key==null){y.value=g;return}if(!(R&&R.key!==n)){x();try{(R==null?void 0:R.newValue)!==w.write(y.value)&&(y.value=M(R))}catch(F){p(F)}finally{R?vh(C):C()}}}}h(W,"update");function X(R){W(R.detail)}return h(X,"updateFromCustomEvent"),y}h(Wy,"useStorage");function jy(n,e){const t=on(c()),i=wy(n),r=z({get(){var u;const f=i.value;let d=e!=null&&e.getIndexOf?e.getIndexOf(t.value,f):f.indexOf(t.value);return d<0&&(d=(u=e==null?void 0:e.fallbackIndex)!=null?u:0),d},set(u){s(u)}});function s(u){const f=i.value,d=f.length,p=(u%d+d)%d,m=f[p];return t.value=m,m}h(s,"set");function o(u=1){return s(r.value+u)}h(o,"shift");function l(u=1){return o(u)}h(l,"next");function a(u=1){return o(-u)}h(a,"prev");function c(){var u,f;return(f=we((u=e==null?void 0:e.initialValue)!=null?u:we(n)[0]))!=null?f:void 0}return h(c,"getInitialValue"),ge(i,()=>s(r.value)),{state:t,index:r,next:l,prev:a,go:s}}h(jy,"useCycleList");const Hy={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function zy(n={}){const{reactive:e=!1,target:t=nr,aliasMap:i=Hy,passive:r=!0,onEventFired:s=ii}=n,o=Al(new Set),l={toJSON(){return{}},current:o},a=e?Al(l):l,c=new Set,u=new Set;function f(y,g){y in a&&(e?a[y]=g:a[y].value=g)}h(f,"setRefs");function d(){o.clear();for(const y of u)f(y,!1)}h(d,"reset");function p(y,g){var v,w;const x=(v=y.key)==null?void 0:v.toLowerCase(),k=[(w=y.code)==null?void 0:w.toLowerCase(),x].filter(Boolean);x&&(g?o.add(x):o.delete(x));for(const A of k)u.add(A),f(A,g);x==="meta"&&!g?(c.forEach(A=>{o.delete(A),f(A,!1)}),c.clear()):typeof y.getModifierState=="function"&&y.getModifierState("Meta")&&g&&[...o,...k].forEach(A=>c.add(A))}h(p,"updateRefs"),ze(t,"keydown",y=>(p(y,!0),s(y)),{passive:r}),ze(t,"keyup",y=>(p(y,!1),s(y)),{passive:r}),ze("blur",d,{passive:!0}),ze("focus",d,{passive:!0});const m=new Proxy(a,{get(y,g,v){if(typeof g!="string")return Reflect.get(y,g,v);if(g=g.toLowerCase(),g in i&&(g=i[g]),!(g in a))if(/[+_-]/.test(g)){const x=g.split(/[+_-]/g).map(C=>C.trim());a[g]=z(()=>x.every(C=>we(m[C])))}else a[g]=H(!1);const w=Reflect.get(y,g,v);return e?we(w):w}});return m}h(zy,"useMagicKeys");function Gy(n,e,t={}){const{window:i=nr}=t;return Wy(n,e,i==null?void 0:i.sessionStorage,t)}h(Gy,"useSessionStorage");function Ky(n={},e={}){const{navigator:t=Lh}=e,i=t,r=Ph(()=>i&&"canShare"in i);return{isSupported:r,share:h(async(o={})=>{if(r.value){const l={...we(n),...we(o)};let a=!0;if(l.files&&i.canShare&&(a=i.canShare({files:l.files})),a)return i.share(l)}},"share")}}h(Ky,"useShare");const $y={class:"fixed inset-0 overflow-y-auto"},Zy={class:"flex min-h-full items-center justify-center p-4 text-center"},Xy={class:"mt-2 text-base"},Uy=["value"],Yy={class:"mt-4 flex items-center gap-7 md:mt-6"},_y={key:0},Jy=ye({__name:"ShareDialog",setup(n){const e=qd(),t=Ky(),i=Pl("clipboard-read"),r=Ry({source:wh(e,"url")}),s=H(!1);ge(()=>e.show,l=>{l&&(s.value=!1)});function o(){r.copy(e.url),s.value=!0}return h(o,"copy"),(l,a)=>{const c=Vd,u=oy,f=ay,d=fy,p=sy,m=ry,y=Wd;return ee(),Fe(y,{appear:"",show:G(e).show,as:"template"},{default:me(()=>[Se(m,{as:"div",onClose:a[2]||(a[2]=g=>G(e).show=!1),class:"relative z-50"},{default:me(()=>[Se(c,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:me(()=>a[3]||(a[3]=[ie("div",{class:"fixed inset-0 bg-slate-900/25 backdrop-blur-sm dark:bg-slate-500/50"},null,-1)])),_:1}),ie("div",$y,[ie("div",Zy,[Se(c,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:me(()=>[Se(p,{class:"sparqljs-visualizer-prose w-full max-w-xl transform overflow-hidden rounded bg-white px-6 py-10 text-left align-middle shadow-xl transition-all prose-headings:my-0 prose-hr:my-8 dark:bg-slate-800 sm:px-8 sm:py-10 md:px-12 md:py-14"},{default:me(()=>[Se(u,{as:"h2"},{default:me(()=>a[4]||(a[4]=[Ue(" Share this Snippet ")])),_:1}),ie("div",Xy,[ie("p",null,[G(t).isSupported.value?(ee(),Pe(ir,{key:0},[Ue(" Use the button below to share the SPARQL.js visualization with others. ")],64)):(ee(),Pe(ir,{key:1},[a[5]||(a[5]=Ue(" Copy the URL below to share the SPARQL.js visualization with others: ")),ie("input",{class:"-mb-2 mt-6 w-full rounded border-2 border-slate-100 bg-slate-100 px-3 py-3 text-sm text-slate-600 focus:border-primary focus:outline-none dark:border-slate-600 dark:bg-slate-600 dark:text-slate-300 dark:focus:border-primary-400",value:G(e).url,readonly:""},null,8,Uy)],64))])]),ie("div",Yy,[G(t).isSupported.value?(ee(),Fe(f,{key:0,theme:"fancy",onClick:a[0]||(a[0]=g=>G(t).share({url:G(e).url,title:"SPARQL.js Visualization"})),disabled:G(i)==="denied"},{default:me(()=>a[6]||(a[6]=[Ue(" Share ")])),_:1},8,["disabled"])):(ee(),Fe(f,{key:1,theme:"fancy",onClick:o,disabled:G(i)==="denied"},{default:me(()=>a[7]||(a[7]=[Ue(" Copy URL ")])),_:1},8,["disabled"])),Se(f,{theme:"text",onClick:a[1]||(a[1]=g=>G(e).show=!1)},{default:me(()=>a[8]||(a[8]=[Ue(" Close ")])),_:1})]),!G(t).isSupported&&G(i)==="denied"?(ee(),Pe("div",_y,a[9]||(a[9]=[ie("p",{class:"text-sm"}," Unfortunately, your browser denies copying to your clipboard. Please copy the URL manually. ",-1)]))):Oi("",!0),G(s)?(ee(),Fe(d,{key:1,class:"mt-4"},{default:me(()=>a[10]||(a[10]=[Ue(" The URL has been copied to your clipboard. ")])),_:1})):Oi("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}}),qy=["src","alt"],Qy=ye({__name:"Icon",props:{name:{},alt:{}},setup(n){const e=n,t=z(()=>e0(`icons/${e.name}.svg`)),i=z(()=>`url('${t.value}')`);return(r,s)=>(ee(),Pe("div",{"data-icon-component":"",class:"icon inline-flex",style:t0({"--icon-mask":G(i)})},[ie("img",{class:"block opacity-0",src:G(t),alt:r.alt,draggable:"false"},null,8,qy)],4))}}),tp=Lr(Qy,[["__scopeId","data-v-826ccf3b"]]);function ip(...n){return z(()=>n.every(e=>we(e)))}h(ip,"logicAnd");const np=Gt("shortcut",()=>{if(typeof navigator!="object")return{active:H(!1)};const{ctrl:n,shift:e}=zy();return{active:ip(n,e)}});function eb(n,{type:e="name"}={}){const t=np(),i=z(()=>t.active),r=H(!1),s=i0();return s.run(()=>{const o=H(!1);ze("keydown",l=>{i.value&&l.code===G(n)&&(l.preventDefault(),o.value=!0)}),ze("keyup",l=>{l.code===G(n)&&r.value&&(o.value=!1)}),Oy(o,r)}),{pressed:ip(i,r),stop:()=>{s.stop()}}}h(eb,"useShortcut");function tb(n,e){const{pressed:t,stop:i}=eb(n),r=ge(t,s=>{s&&e()});return()=>{r(),i()}}h(tb,"useShortcutFn");const ib={class:"flex flex-col items-center gap-2 group-not-disabled:group-active:scale-[0.96]"},rp=ye({__name:"IconButton",props:{icon:{},label:{},highlight:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{},shortcut:{}},setup(n){const e=n,t=H(),i=np(),r=z(()=>{if(!(typeof e.shortcut>"u"))return typeof e.shortcut=="string"?{label:e.shortcut,key:e.shortcut}:e.shortcut}),s=z(()=>{var o;return(o=r.value)==null?void 0:o.key});return tb(s,()=>{var o;(o=ep(t))==null||o.click()}),(o,l)=>{const a=tp,c=Th;return ee(),Fe(c,{ref_key:"triggerRef",ref:t,class:st(["group relative flex flex-col items-stretch rounded-sm px-1 py-1 text-center text-xs/none focus:outline-none focus-visible:outline-2 focus-visible:outline-primary not-disabled:hover:bg-primary/10 dark:focus-visible:outline-primary-400 dark:not-disabled:hover:bg-primary/10 sm:px-2 sm:py-2 sm:text-icon/[1.15] md:py-3",o.disabled?"text-slate-400 dark:text-slate-700":o.highlight?"text-slate-600 dark:text-slate-300":"text-slate-500 dark:text-slate-500"]),disabled:o.disabled},{default:me(()=>[ie("div",ib,[o.icon?(ee(),Fe(a,{key:0,name:o.icon,class:st([typeof o.size=="string"?o.size:"h-4 w-auto sm:h-5",o.disabled?"bg-slate-300 dark:bg-slate-700":o.highlight?"bg-primary-600 dark:bg-primary-500":"bg-slate-400 dark:bg-slate-500"])},null,8,["name","class"])):Oi("",!0),Ue(" "+ws(o.label),1)]),G(r)?(ee(),Pe("div",{key:0,class:st(["absolute right-1 top-1 transition-opacity duration-100",[{"opacity-0":!G(i).active},o.disabled?"text-slate-400 dark:text-slate-700":"text-primary-400 dark:text-primary-400"]])},ws(G(r).label),3)):Oi("",!0)]),_:1},8,["class","disabled"])}}}),nb=ye({__name:"ToggleButton",props:{modelValue:{type:Boolean},icon:{},label:{},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=e;return(i,r)=>{const s=rp;return ee(),Fe(s,{onClick:r[0]||(r[0]=o=>t("update:modelValue",!i.modelValue)),highlight:i.modelValue&&!i.disabled,label:i.label,icon:i.icon,"aria-pressed":String(i.modelValue)},null,8,["highlight","label","icon","aria-pressed"])}}}),Rh=Gt("input-code",()=>({state:H("")})),Bh=Gt("auto-run",()=>({state:H(!1)})),sp="dmFyIFI9T2JqZWN0LmRlZmluZVByb3BlcnR5O3ZhciBnPShtLE0pPT5SKG0sIm5hbWUiLHt2YWx1ZTpNLGNvbmZpZ3VyYWJsZTohMH0pOyhmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgbT17ZXhwb3J0czp7fX07bS5leHBvcnRzLGZ1bmN0aW9uKGgpe3ZhciBBPWZ1bmN0aW9uKCl7dmFyIHg9U3RyaW5nLmZyb21DaGFyQ29kZSxFPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSIsaz0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLSQiLFM9e307ZnVuY3Rpb24gTyhuLG8pe2lmKCFTW25dKXtTW25dPXt9O2Zvcih2YXIgYz0wO2M8bi5sZW5ndGg7YysrKVNbbl1bbi5jaGFyQXQoYyldPWN9cmV0dXJuIFNbbl1bb119ZyhPLCJnZXRCYXNlVmFsdWUiKTt2YXIgdz17Y29tcHJlc3NUb0Jhc2U2NDpmdW5jdGlvbihuKXtpZihuPT1udWxsKXJldHVybiIiO3ZhciBvPXcuX2NvbXByZXNzKG4sNixmdW5jdGlvbihjKXtyZXR1cm4gRS5jaGFyQXQoYyl9KTtzd2l0Y2goby5sZW5ndGglNCl7ZGVmYXVsdDpjYXNlIDA6cmV0dXJuIG87Y2FzZSAxOnJldHVybiBvKyI9PT0iO2Nhc2UgMjpyZXR1cm4gbysiPT0iO2Nhc2UgMzpyZXR1cm4gbysiPSJ9fSxkZWNvbXByZXNzRnJvbUJhc2U2NDpmdW5jdGlvbihuKXtyZXR1cm4gbj09bnVsbD8iIjpuPT0iIj9udWxsOncuX2RlY29tcHJlc3Mobi5sZW5ndGgsMzIsZnVuY3Rpb24obyl7cmV0dXJuIE8oRSxuLmNoYXJBdChvKSl9KX0sY29tcHJlc3NUb1VURjE2OmZ1bmN0aW9uKG4pe3JldHVybiBuPT1udWxsPyIiOncuX2NvbXByZXNzKG4sMTUsZnVuY3Rpb24obyl7cmV0dXJuIHgobyszMil9KSsiICJ9LGRlY29tcHJlc3NGcm9tVVRGMTY6ZnVuY3Rpb24obil7cmV0dXJuIG49PW51bGw/IiI6bj09IiI/bnVsbDp3Ll9kZWNvbXByZXNzKG4ubGVuZ3RoLDE2Mzg0LGZ1bmN0aW9uKG8pe3JldHVybiBuLmNoYXJDb2RlQXQobyktMzJ9KX0sY29tcHJlc3NUb1VpbnQ4QXJyYXk6ZnVuY3Rpb24obil7Zm9yKHZhciBvPXcuY29tcHJlc3MobiksYz1uZXcgVWludDhBcnJheShvLmxlbmd0aCoyKSxyPTAsaT1vLmxlbmd0aDtyPGk7cisrKXt2YXIgdT1vLmNoYXJDb2RlQXQocik7Y1tyKjJdPXU+Pj44LGNbcioyKzFdPXUlMjU2fXJldHVybiBjfSxkZWNvbXByZXNzRnJvbVVpbnQ4QXJyYXk6ZnVuY3Rpb24obil7aWYobj09bnVsbClyZXR1cm4gdy5kZWNvbXByZXNzKG4pO2Zvcih2YXIgbz1uZXcgQXJyYXkobi5sZW5ndGgvMiksYz0wLHI9by5sZW5ndGg7YzxyO2MrKylvW2NdPW5bYyoyXSoyNTYrbltjKjIrMV07dmFyIGk9W107cmV0dXJuIG8uZm9yRWFjaChmdW5jdGlvbih1KXtpLnB1c2goeCh1KSl9KSx3LmRlY29tcHJlc3MoaS5qb2luKCIiKSl9LGNvbXByZXNzVG9FbmNvZGVkVVJJQ29tcG9uZW50OmZ1bmN0aW9uKG4pe3JldHVybiBuPT1udWxsPyIiOncuX2NvbXByZXNzKG4sNixmdW5jdGlvbihvKXtyZXR1cm4gay5jaGFyQXQobyl9KX0sZGVjb21wcmVzc0Zyb21FbmNvZGVkVVJJQ29tcG9uZW50OmZ1bmN0aW9uKG4pe3JldHVybiBuPT1udWxsPyIiOm49PSIiP251bGw6KG49bi5yZXBsYWNlKC8gL2csIisiKSx3Ll9kZWNvbXByZXNzKG4ubGVuZ3RoLDMyLGZ1bmN0aW9uKG8pe3JldHVybiBPKGssbi5jaGFyQXQobykpfSkpfSxjb21wcmVzczpmdW5jdGlvbihuKXtyZXR1cm4gdy5fY29tcHJlc3MobiwxNixmdW5jdGlvbihvKXtyZXR1cm4geChvKX0pfSxfY29tcHJlc3M6ZnVuY3Rpb24obixvLGMpe2lmKG49PW51bGwpcmV0dXJuIiI7dmFyIHIsaSx1PXt9LHk9e30sdj0iIixfPSIiLGw9IiIsZD0yLHA9MyxhPTIsZj1bXSxlPTAscz0wLHQ7Zm9yKHQ9MDt0PG4ubGVuZ3RoO3QrPTEpaWYodj1uLmNoYXJBdCh0KSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodSx2KXx8KHVbdl09cCsrLHlbdl09ITApLF89bCt2LE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh1LF8pKWw9XztlbHNle2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh5LGwpKXtpZihsLmNoYXJDb2RlQXQoMCk8MjU2KXtmb3Iocj0wO3I8YTtyKyspZT1lPDwxLHM9PW8tMT8ocz0wLGYucHVzaChjKGUpKSxlPTApOnMrKztmb3IoaT1sLmNoYXJDb2RlQXQoMCkscj0wO3I8ODtyKyspZT1lPDwxfGkmMSxzPT1vLTE/KHM9MCxmLnB1c2goYyhlKSksZT0wKTpzKyssaT1pPj4xfWVsc2V7Zm9yKGk9MSxyPTA7cjxhO3IrKyllPWU8PDF8aSxzPT1vLTE/KHM9MCxmLnB1c2goYyhlKSksZT0wKTpzKyssaT0wO2ZvcihpPWwuY2hhckNvZGVBdCgwKSxyPTA7cjwxNjtyKyspZT1lPDwxfGkmMSxzPT1vLTE/KHM9MCxmLnB1c2goYyhlKSksZT0wKTpzKyssaT1pPj4xfWQtLSxkPT0wJiYoZD1NYXRoLnBvdygyLGEpLGErKyksZGVsZXRlIHlbbF19ZWxzZSBmb3IoaT11W2xdLHI9MDtyPGE7cisrKWU9ZTw8MXxpJjEscz09by0xPyhzPTAsZi5wdXNoKGMoZSkpLGU9MCk6cysrLGk9aT4+MTtkLS0sZD09MCYmKGQ9TWF0aC5wb3coMixhKSxhKyspLHVbX109cCsrLGw9U3RyaW5nKHYpfWlmKGwhPT0iIil7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHksbCkpe2lmKGwuY2hhckNvZGVBdCgwKTwyNTYpe2ZvcihyPTA7cjxhO3IrKyllPWU8PDEscz09by0xPyhzPTAsZi5wdXNoKGMoZSkpLGU9MCk6cysrO2ZvcihpPWwuY2hhckNvZGVBdCgwKSxyPTA7cjw4O3IrKyllPWU8PDF8aSYxLHM9PW8tMT8ocz0wLGYucHVzaChjKGUpKSxlPTApOnMrKyxpPWk+PjF9ZWxzZXtmb3IoaT0xLHI9MDtyPGE7cisrKWU9ZTw8MXxpLHM9PW8tMT8ocz0wLGYucHVzaChjKGUpKSxlPTApOnMrKyxpPTA7Zm9yKGk9bC5jaGFyQ29kZUF0KDApLHI9MDtyPDE2O3IrKyllPWU8PDF8aSYxLHM9PW8tMT8ocz0wLGYucHVzaChjKGUpKSxlPTApOnMrKyxpPWk+PjF9ZC0tLGQ9PTAmJihkPU1hdGgucG93KDIsYSksYSsrKSxkZWxldGUgeVtsXX1lbHNlIGZvcihpPXVbbF0scj0wO3I8YTtyKyspZT1lPDwxfGkmMSxzPT1vLTE/KHM9MCxmLnB1c2goYyhlKSksZT0wKTpzKyssaT1pPj4xO2QtLSxkPT0wJiYoZD1NYXRoLnBvdygyLGEpLGErKyl9Zm9yKGk9MixyPTA7cjxhO3IrKyllPWU8PDF8aSYxLHM9PW8tMT8ocz0wLGYucHVzaChjKGUpKSxlPTApOnMrKyxpPWk+PjE7Zm9yKDs7KWlmKGU9ZTw8MSxzPT1vLTEpe2YucHVzaChjKGUpKTticmVha31lbHNlIHMrKztyZXR1cm4gZi5qb2luKCIiKX0sZGVjb21wcmVzczpmdW5jdGlvbihuKXtyZXR1cm4gbj09bnVsbD8iIjpuPT0iIj9udWxsOncuX2RlY29tcHJlc3Mobi5sZW5ndGgsMzI3NjgsZnVuY3Rpb24obyl7cmV0dXJuIG4uY2hhckNvZGVBdChvKX0pfSxfZGVjb21wcmVzczpmdW5jdGlvbihuLG8sYyl7dmFyIHI9W10saT00LHU9NCx5PTMsdj0iIixfPVtdLGwsZCxwLGEsZixlLHMsdD17dmFsOmMoMCkscG9zaXRpb246byxpbmRleDoxfTtmb3IobD0wO2w8MztsKz0xKXJbbF09bDtmb3IocD0wLGY9TWF0aC5wb3coMiwyKSxlPTE7ZSE9ZjspYT10LnZhbCZ0LnBvc2l0aW9uLHQucG9zaXRpb24+Pj0xLHQucG9zaXRpb249PTAmJih0LnBvc2l0aW9uPW8sdC52YWw9Yyh0LmluZGV4KyspKSxwfD0oYT4wPzE6MCkqZSxlPDw9MTtzd2l0Y2gocCl7Y2FzZSAwOmZvcihwPTAsZj1NYXRoLnBvdygyLDgpLGU9MTtlIT1mOylhPXQudmFsJnQucG9zaXRpb24sdC5wb3NpdGlvbj4+PTEsdC5wb3NpdGlvbj09MCYmKHQucG9zaXRpb249byx0LnZhbD1jKHQuaW5kZXgrKykpLHB8PShhPjA/MTowKSplLGU8PD0xO3M9eChwKTticmVhaztjYXNlIDE6Zm9yKHA9MCxmPU1hdGgucG93KDIsMTYpLGU9MTtlIT1mOylhPXQudmFsJnQucG9zaXRpb24sdC5wb3NpdGlvbj4+PTEsdC5wb3NpdGlvbj09MCYmKHQucG9zaXRpb249byx0LnZhbD1jKHQuaW5kZXgrKykpLHB8PShhPjA/MTowKSplLGU8PD0xO3M9eChwKTticmVhaztjYXNlIDI6cmV0dXJuIiJ9Zm9yKHJbM109cyxkPXMsXy5wdXNoKHMpOzspe2lmKHQuaW5kZXg+bilyZXR1cm4iIjtmb3IocD0wLGY9TWF0aC5wb3coMix5KSxlPTE7ZSE9ZjspYT10LnZhbCZ0LnBvc2l0aW9uLHQucG9zaXRpb24+Pj0xLHQucG9zaXRpb249PTAmJih0LnBvc2l0aW9uPW8sdC52YWw9Yyh0LmluZGV4KyspKSxwfD0oYT4wPzE6MCkqZSxlPDw9MTtzd2l0Y2gocz1wKXtjYXNlIDA6Zm9yKHA9MCxmPU1hdGgucG93KDIsOCksZT0xO2UhPWY7KWE9dC52YWwmdC5wb3NpdGlvbix0LnBvc2l0aW9uPj49MSx0LnBvc2l0aW9uPT0wJiYodC5wb3NpdGlvbj1vLHQudmFsPWModC5pbmRleCsrKSkscHw9KGE+MD8xOjApKmUsZTw8PTE7clt1KytdPXgocCkscz11LTEsaS0tO2JyZWFrO2Nhc2UgMTpmb3IocD0wLGY9TWF0aC5wb3coMiwxNiksZT0xO2UhPWY7KWE9dC52YWwmdC5wb3NpdGlvbix0LnBvc2l0aW9uPj49MSx0LnBvc2l0aW9uPT0wJiYodC5wb3NpdGlvbj1vLHQudmFsPWModC5pbmRleCsrKSkscHw9KGE+MD8xOjApKmUsZTw8PTE7clt1KytdPXgocCkscz11LTEsaS0tO2JyZWFrO2Nhc2UgMjpyZXR1cm4gXy5qb2luKCIiKX1pZihpPT0wJiYoaT1NYXRoLnBvdygyLHkpLHkrKykscltzXSl2PXJbc107ZWxzZSBpZihzPT09dSl2PWQrZC5jaGFyQXQoMCk7ZWxzZSByZXR1cm4gbnVsbDtfLnB1c2godiksclt1KytdPWQrdi5jaGFyQXQoMCksaS0tLGQ9dixpPT0wJiYoaT1NYXRoLnBvdygyLHkpLHkrKyl9fX07cmV0dXJuIHd9KCk7aCE9bnVsbD9oLmV4cG9ydHM9QTp0eXBlb2YgYW5ndWxhcjwidSImJmFuZ3VsYXIhPW51bGwmJmFuZ3VsYXIubW9kdWxlKCJMWlN0cmluZyIsW10pLmZhY3RvcnkoIkxaU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiBBfSl9KG0pO3ZhciBNPW0uZXhwb3J0cztmdW5jdGlvbiBVKGgpe3JldHVybiBNLmNvbXByZXNzVG9FbmNvZGVkVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGgpKX1nKFUsImVuY29kZSIpO2Z1bmN0aW9uIGooaCl7cmV0dXJuIEpTT04ucGFyc2UoTS5kZWNvbXByZXNzRnJvbUVuY29kZWRVUklDb21wb25lbnQoaCkpfWcoaiwiZGVjb2RlIik7ZnVuY3Rpb24gVChoKXtpZih0eXBlb2YgaCE9Im9iamVjdCJ8fGg9PT1udWxsKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBtZXNzYWdlIil9ZyhULCJlbnN1cmVSZWNvcmQiKTtmdW5jdGlvbiBCKGgpe2lmKFQoaCksdHlwZW9mIGguaWQhPSJzdHJpbmciKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBtZXNzYWdlIGlkIik7c3dpdGNoKGgudHlwZSl7Y2FzZSJlbmNvZGUiOmlmKHR5cGVvZiBoLnBheWxvYWQhPSJvYmplY3QiKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBtZXNzYWdlIHBheWxvYWQiKTticmVhaztjYXNlImRlY29kZSI6aWYodHlwZW9mIGgucGF5bG9hZCE9InN0cmluZyIpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG1lc3NhZ2UgcGF5bG9hZCIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG1lc3NhZ2UgdHlwZSIpfX1nKEIsInZhbGlkYXRlTWVzc2FnZSIpLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGg9Pntjb25zdCBBPWguZGF0YTtzd2l0Y2goQihBKSxBLnR5cGUpe2Nhc2UiZW5jb2RlIjpwb3N0TWVzc2FnZSh7dHlwZToiZW5jb2RlZCIscGF5bG9hZDpVKEEucGF5bG9hZCksaWQ6QS5pZH0pO2JyZWFrO2Nhc2UiZGVjb2RlIjpwb3N0TWVzc2FnZSh7dHlwZToiZGVjb2RlZCIscGF5bG9hZDpqKEEucGF5bG9hZCksaWQ6QS5pZH0pO2JyZWFrfX0pfSkoKTsK",rb=h(n=>Uint8Array.from(atob(n),e=>e.charCodeAt(0)),"decodeBase64"),_u=typeof window<"u"&&window.Blob&&new Blob([rb(sp)],{type:"text/javascript;charset=utf-8"});function sb(n){let e;try{if(e=_u&&(window.URL||window.webkitURL).createObjectURL(_u),!e)throw"";const t=new Worker(e,{name:n==null?void 0:n.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+sp,{name:n==null?void 0:n.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}h(sb,"WorkerWrapper");const ob=Gt("encoding-worker",()=>{const n=new sb;return{get:()=>n}});function lb(){const n=ob().get();function e(s){return new Promise(o=>{const l=crypto.randomUUID(),a=ze(n,"message",c=>{var u;((u=c.data)==null?void 0:u.id)===l&&(a(),o(c.data.payload))});n.postMessage({type:"decode",id:l,payload:s})})}h(e,"decode");async function t(){const s=document.location.hash.slice(1);return s?e(s):null}h(t,"read");function i(s){return new Promise(o=>{const l=crypto.randomUUID(),a=ze(n,"message",c=>{var u;((u=c.data)==null?void 0:u.id)===l&&(a(),o(c.data.payload))});n.postMessage({type:"encode",id:l,payload:s})})}h(i,"encode");async function r(s){const o=await i(s),l=new URL(window.location.href);l.hash=o,history.replaceState(history.state,"",l.href)}return h(r,"write"),{read:t,write:r,encode:i,decode:e}}h(lb,"useUrlState");const ab=Gt("storableState",()=>{const n=Rh(),e=Bh(),t=z(()=>({code:n.state,autoRun:e.state})),i=Ay(t,1e3),r=Gy("document",null,{serializer:{read:o=>{try{return JSON.parse(o)}catch{return null}},write:o=>JSON.stringify(o)}});ge(i,o=>{typeof window.requestIdleCallback=="function"?n0(()=>{r.value=o},{timeout:400}):r.value=o});const s=lb();return De(()=>{s.read().then(o=>{if(o==null){if(r.value===null)return;o=Ld(r.value)}typeof o.code=="string"&&(n.state=o.code),typeof o.autoRun=="boolean"&&(e.state=o.autoRun);const l=new URL(window.location.href);l.hash="",history.replaceState(history.state,"",l.href)})}),{encode(){return s.encode(t.value)}}}),hb=h(()=>r0("color-mode").value,"useColorMode"),op=Gt("color-theme",()=>{const n=hb(),e=jy(["light","system","dark"],{initialValue:n.preference});function t(){e.next(),n.preference=e.state.value}h(t,"toggle");const i=z(()=>n.preference==="system"?n.value==="dark"?"dark":"light":n.preference==="dark"?"dark":"light");return{auto:z(()=>n.preference==="system"),theme:i,toggle:t}}),cb=Gt("formatting-worker",()=>{const n=new Worker(new URL(""+new URL("formatting-worker-o01DJpzO.js",import.meta.url).href,import.meta.url),{type:"module"});return{get:()=>n}}),ub={"data-actions":"",class:"relative z-20 h-full min-h-0 w-full justify-center overflow-auto bg-slate-100 shadow-md dark:bg-slate-800"},fb={class:"grid h-full min-w-[40rem] grid-cols-5 items-stretch gap-3 p-2 md:flex md:min-w-0 md:flex-col md:gap-1"},db=ye({__name:"Actions",setup(n){const e=qd(),t=ab(),i=Rh(),r=op(),s=Bh();async function o(){const a=cb().get();function c(d){return new Promise(p=>{const m=crypto.randomUUID(),y=ze(a,"message",g=>{var v;((v=g.data)==null?void 0:v.id)===m&&(y(),p(g.data.payload))});a.postMessage({type:"format",id:m,code:d})})}h(c,"format");const u=i.state,f=await c(u);f.success&&f.result!==u&&(i.state=f.result)}h(o,"applyFormatting");function l(){t.encode().then(a=>{const c=new URL(window.location.href);c.hash=a,e.url=c.toString()}),e.show=!0}return h(l,"share"),(a,c)=>{const u=nb,f=rp;return ee(),Pe("div",ub,[ie("div",fb,[Se(u,{modelValue:G(s).state,"onUpdate:modelValue":c[0]||(c[0]=d=>G(s).state=d),label:"Auto-run",icon:"redo",shortcut:{key:"Digit1",label:"1"}},null,8,["modelValue"]),Se(f,{onClick:c[1]||(c[1]=d=>G(r).toggle()),highlight:"",label:G(r).auto?"System":G(r).theme==="dark"?"Dark Mode":"Light Mode",icon:G(r).auto?"screen":G(r).theme==="dark"?"moon":"sun",shortcut:{key:"Digit2",label:"2"}},null,8,["label","icon"]),Se(f,{class:"md:mt-auto",onClick:o,highlight:"",label:"Format",icon:"wand",disabled:G(i).state.length===0,shortcut:{key:"Digit3",label:"3"}},null,8,["disabled"]),Se(f,{onClick:l,highlight:"",label:"Share",icon:"share",disabled:G(i).state.length===0,shortcut:{key:"Digit4",label:"4"}},null,8,["disabled"]),Se(f,{highlight:"",link:"https://github.com/loilo/sparqljs-visualizer",label:"Source",target:"_blank",rel:"noopener",icon:"github",size:"h-5 sm:h-6 w-auto",shortcut:{key:"Digit5",label:"5"}})])])}}}),pb=Lr(db,[["__scopeId","data-v-ae448616"]]),mb=ye({__name:"CornerTag",props:{visible:{type:Boolean,default:!0}},setup(n){return(e,t)=>(ee(),Pe("div",{class:st(["pointer-events-none absolute right-0 top-0 z-10 rounded-bl-md bg-slate-100 px-3 py-3 text-sm leading-none transition-opacity dark:bg-slate-800 dark:text-slate-400",{"opacity-0":!e.visible}])},[Vt(e.$slots,"default")],2))}}),mo=class mo{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=ln(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Ji.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=ln(this,e,t);let i=[];return this.decompose(e,t,i,0),Ji.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Mi(this),s=new Mi(e);for(let o=t,l=t;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new Mi(this,e)}iterRange(e,t=this.length){return new Ss(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Cs(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?mo.empty:e.length<=32?new Je(e):Ji.from(Je.split(e,[]))}};h(mo,"Text");let te=mo;const nt=class nt extends te{constructor(e,t=gb(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((t?i:l)>=e)return new Rl(r,l,i,o);r=l+1,i++}}decompose(e,t,i,r){let s=e<=0&&t>=this.length?this:new nt(Ju(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=us(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new nt(l,o.length+s.length));else{let a=l.length>>1;i.push(new nt(l.slice(0,a)),new nt(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof nt))return super.replace(e,t,i);[e,t]=ln(this,e,t);let r=us(this.text,us(i.text,Ju(this.text,0,e)),t),s=this.length+i.length-(t-e);return r.length<=32?new nt(r,s):Ji.from(nt.split(r,[]),s)}sliceString(e,t=this.length,i=`
`){[e,t]=ln(this,e,t);let r="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=i),e<a&&t>s&&(r+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(t.push(new nt(i,r)),i=[],r=-1);return r>-1&&t.push(new nt(i,r)),t}};h(nt,"TextLeaf");let Je=nt;const Xt=class Xt extends te{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,r);r=l+1,i=a+1}}decompose(e,t,i,r){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let c=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!c?i.push(l):l.decompose(e-o,t-o,i,c)}o=a+1}}replace(e,t,i){if([e,t]=ln(this,e,t),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let u=this.children.slice();return u[r]=a,new Xt(u,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=ln(this,e,t);let r="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=i),e<a&&t>o&&(r+=l.sliceString(e-o,t-o,i)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Xt))return 0;let i=0,[r,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==o||s==l)return i;let a=this.children[r],c=e.children[s];if(a!=c)return i+a.scanIdentical(c,t);i+=a.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let m of e)m.flatten(p);return new Je(p,t)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,l=[],a=0,c=-1,u=[];function f(p){let m;if(p.lines>s&&p instanceof Xt)for(let y of p.children)f(y);else p.lines>o&&(a>o||!a)?(d(),l.push(p)):p instanceof Je&&a&&(m=u[u.length-1])instanceof Je&&p.lines+m.lines<=32?(a+=p.lines,c+=p.length+1,u[u.length-1]=new Je(m.text.concat(p.text),m.length+1+p.length)):(a+p.lines>r&&d(),a+=p.lines,c+=p.length+1,u.push(p))}h(f,"add");function d(){a!=0&&(l.push(u.length==1?u[0]:Xt.from(u,c)),c=-1,a=u.length=0)}h(d,"flush");for(let p of e)f(p);return d(),l.length==1?l[0]:new Xt(l,t)}};h(Xt,"TextNode");let Ji=Xt;te.empty=new Je([""],0);function gb(n){let e=-1;for(let t of n)e+=t.length+1;return e}h(gb,"textLength");function us(n,e,t=0,i=1e9){for(let r=0,s=0,o=!0;s<n.length&&r<=i;s++){let l=n[s],a=r+l.length;a>=t&&(a>i&&(l=l.slice(0,i-r)),r<t&&(l=l.slice(t-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}h(us,"appendText");function Ju(n,e,t){return us(n,[""],e,t)}h(Ju,"sliceText");const hc=class hc{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Je?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,l=r instanceof Je?r.text.length:r.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Je){let a=r.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Je?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}};h(hc,"RawTextCursor");let Mi=hc;const cc=class cc{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Mi(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}};h(cc,"PartialTextCursor");let Ss=cc;const uc=class uc{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}};h(uc,"LineCursor");let Cs=uc;typeof Symbol<"u"&&(te.prototype[Symbol.iterator]=function(){return this.iter()},Mi.prototype[Symbol.iterator]=Ss.prototype[Symbol.iterator]=Cs.prototype[Symbol.iterator]=function(){return this});const fc=class fc{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}};h(fc,"Line");let Rl=fc;function ln(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}h(ln,"clip");let qi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<qi.length;n++)qi[n]+=qi[n-1];function yb(n){for(let e=1;e<qi.length;e+=2)if(qi[e]>n)return qi[e-1]<=n;return!1}h(yb,"isExtendingChar");function qu(n){return n>=127462&&n<=127487}h(qu,"isRegionalIndicator");const Qu=8205;function Oe(n,e,t=!0,i=!0){return(t?lp:bb)(n,e,i)}h(Oe,"findClusterBreak");function lp(n,e,t){if(e==n.length)return e;e&&ap(n.charCodeAt(e))&&hp(n.charCodeAt(e-1))&&e--;let i=Ce(n,e);for(e+=ot(i);e<n.length;){let r=Ce(n,e);if(i==Qu||r==Qu||t&&yb(r))e+=ot(r),i=r;else if(qu(r)){let s=0,o=e-2;for(;o>=0&&qu(Ce(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}h(lp,"nextClusterBreak");function bb(n,e,t){for(;e>0;){let i=lp(n,e-2,t);if(i<e)return i;e--}return 0}h(bb,"prevClusterBreak");function ap(n){return n>=56320&&n<57344}h(ap,"surrogateLow");function hp(n){return n>=55296&&n<56320}h(hp,"surrogateHigh");function Ce(n,e){let t=n.charCodeAt(e);if(!hp(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return ap(i)?(t-55296<<10)+(i-56320)+65536:t}h(Ce,"codePointAt");function Nh(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}h(Nh,"fromCodePoint");function ot(n){return n<65536?1:2}h(ot,"codePointSize");const Bl=/\r\n?|\n/;var Ve=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Ve||(Ve={}));const Gi=class Gi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,t=!1){Nl(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new Gi(e)}composeDesc(e){return this.empty?e:e.empty?this:cp(this,e)}mapDesc(e,t=!1){return e.empty?this:Il(this,e,t)}mapPos(e,t=-1,i=Ve.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=r+l;if(a<0){if(c>e)return s+(e-r);s+=l}else{if(i!=Ve.Simple&&c>=e&&(i==Ve.TrackDel&&r<e&&c>e||i==Ve.TrackBefore&&r<e||i==Ve.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==r||t<0?s:s+a;s+=a}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let s=this.sections[i++],o=this.sections[i++],l=r+s;if(o>=0&&r<=t&&l>=e)return r<e&&l>t?"cover":!0;r=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Gi(e)}static create(e){return new Gi(e)}};h(Gi,"ChangeDesc");let qt=Gi;const St=class St extends qt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Nl(this,(t,i,r,s,o)=>e=e.replace(r,r+(i-t),o),!1),e}mapDesc(e,t=!1){return Il(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,s=0;r<t.length;r+=2){let o=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(te.empty);i.push(o?e.slice(s,s+o):te.empty)}s+=o}return new St(t,i)}compose(e){return this.empty?e:e.empty?this:cp(this,e,!0)}map(e,t=!1){return e.empty?this:Il(this,e,t,!0)}iterChanges(e,t=!1){Nl(this,e,t)}get desc(){return qt.create(this.sections)}filter(e){let t=[],i=[],r=[],s=new Di(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,a-l);Le(r,u,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;Le(t,u,f),f>0&&Jt(i,t,s.text),s.forward(u),l+=u}let c=e[o++];for(;l<c;){if(s.done)break e;let u=Math.min(s.len,c-l);Le(t,u,-1),Le(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),l+=u}}return{changes:new St(t,i),filtered:qt.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],s=[],o=0,l=null;function a(u=!1){if(!u&&!r.length)return;o<t&&Le(r,t-o,-1);let f=new St(r,s);l=l?l.compose(f.map(l)):f,r=[],s=[],o=0}h(a,"flush");function c(u){if(Array.isArray(u))for(let f of u)c(f);else if(u instanceof St){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:d=f,insert:p}=u;if(f>d||f<0||d>t)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${t})`);let m=p?typeof p=="string"?te.of(p.split(i||Bl)):p:te.empty,y=m.length;if(f==d&&y==0)return;f<o&&a(),f>o&&Le(r,f-o,-1),Le(r,d-f,y),Jt(s,r,m),o=d}}return h(c,"process"),c(e),a(!l),l}static empty(e){return new St(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<r;)i.push(te.empty);i[r]=te.of(s.slice(1)),t.push(s[0],i[r].length)}}}return new St(t,i)}static createSet(e,t){return new St(e,t)}};h(St,"ChangeSet");let it=St;function Le(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}h(Le,"addSection");function Jt(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(te.empty);n.push(t)}}h(Jt,"addInsert");function Nl(n,e,t){let i=n.inserted;for(let r=0,s=0,o=0;o<n.sections.length;){let l=n.sections[o++],a=n.sections[o++];if(a<0)r+=l,s+=l;else{let c=r,u=s,f=te.empty;for(;c+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],a=n.sections[o++];e(r,c,s,u,f),r=c,s=u}}}h(Nl,"iterChanges");function Il(n,e,t,i=!1){let r=[],s=i?[]:null,o=new Di(n),l=new Di(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);Le(r,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for(Le(r,l.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=u&&(Le(r,0,o.ins),s&&Jt(s,r,o.text),a=o.i),o.forward(u),c-=u}l.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);c+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Le(r,c,a<o.i?o.ins:0),s&&a<o.i&&Jt(s,r,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return s?it.createSet(r,s):qt.create(r);throw new Error("Mismatched change set lengths")}}h(Il,"mapSet");function cp(n,e,t=!1){let i=[],r=t?[]:null,s=new Di(n),o=new Di(e);for(let l=!1;;){if(s.done&&o.done)return r?it.createSet(i,r):qt.create(i);if(s.ins==0)Le(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)Le(i,0,o.ins,l),r&&Jt(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Le(i,a,u,l),r&&u&&Jt(r,i,o.text)}else o.ins==-1?(Le(i,s.off?0:s.len,a,l),r&&Jt(r,i,s.textBit(a))):(Le(i,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&Jt(r,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>c),s.forward2(a),o.forward(a)}}}}h(cp,"composeSets");const dc=class dc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?te.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?te.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}};h(dc,"SectionIter");let Di=dc;const Hn=class Hn{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Hn(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return S.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return S.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return S.range(e.anchor,e.head)}static create(e,t,i){return new Hn(e,t,i)}};h(Hn,"SelectionRange");let Vi=Hn;const Ie=class Ie{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Ie.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ie([this.main],0)}addRange(e,t=!0){return Ie.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Ie.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ie(e.ranges.map(t=>Vi.fromJSON(t)),e.main)}static single(e,t=e){return new Ie([Ie.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return Ie.normalized(e.slice(),t);i=s.to}return new Ie(e,t)}static cursor(e,t=0,i,r){return Vi.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?Vi.create(t,e,48|s):Vi.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let i=e[t];e.sort((r,s)=>r.from-s.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=t&&t--,e.splice(--r,2,s.anchor>s.head?Ie.range(a,l):Ie.range(l,a))}}return new Ie(e,t)}};h(Ie,"EditorSelection");let S=Ie;function up(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}h(up,"checkSelection");let Ih=0;const go=class go{constructor(e,t,i,r,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=Ih++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new go(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Fh),!!e.static,e.enables)}of(e){return new Qi([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Qi(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Qi(e,this,2,t)}from(e,t){return t||(t=h(i=>i,"get")),this.compute([e],i=>t(i.field(e)))}};h(go,"Facet");let I=go;function Fh(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}h(Fh,"sameArray$1");const pc=class pc{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=Ih++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,c=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?c=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,d){if(a&&d.docChanged||c&&(d.docChanged||d.selection)||Fl(f,u)){let p=i(f);if(l?!ef(p,f.values[o],r):!r(p,f.values[o]))return f.values[o]=p,1}return 0},reconfigure:(f,d)=>{let p,m=d.config.address[s];if(m!=null){let y=Os(d,m);if(this.dependencies.every(g=>g instanceof I?d.facet(g)===f.facet(g):g instanceof Be?d.field(g,!1)==f.field(g,!1):!0)||(l?ef(p=i(f),y,r):r(p=i(f),y)))return f.values[o]=y,0}else p=i(f);return f.values[o]=p,1}}}};h(pc,"FacetProvider");let Qi=pc;function ef(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}h(ef,"compareArray");function Fl(n,e){let t=!1;for(let i of e)Pn(n,i)&1&&(t=!0);return t}h(Fl,"ensureAll");function vb(n,e,t){let i=t.map(a=>n[a.id]),r=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=n[e.id]>>1;function l(a){let c=[];for(let u=0;u<i.length;u++){let f=Os(a,i[u]);if(r[u]==2)for(let d of f)c.push(d);else c.push(f)}return e.combine(c)}return h(l,"get"),{create(a){for(let c of i)Pn(a,c);return a.values[o]=l(a),1},update(a,c){if(!Fl(a,s))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,c){let u=Fl(a,i),f=c.config.facets[e.id],d=c.facet(e);if(f&&!u&&Fh(t,f))return a.values[o]=d,0;let p=l(a);return e.compare(p,d)?(a.values[o]=d,0):(a.values[o]=p,1)}}}h(vb,"dynamicFacetSlot");const tf=I.define({static:!0}),yo=class yo{constructor(e,t,i,r,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new yo(Ih++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(tf).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let s=i.values[t],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,tf.of({field:this,create:e})]}get extension(){return this}};h(yo,"StateField");let Be=yo;const pi={lowest:4,low:3,default:2,high:1,highest:0};function xn(n){return e=>new As(e,n)}h(xn,"prec");const Bi={highest:xn(pi.highest),high:xn(pi.high),default:xn(pi.default),low:xn(pi.low),lowest:xn(pi.lowest)},mc=class mc{constructor(e,t){this.inner=e,this.prec=t}};h(mc,"PrecExtension");let As=mc;const bo=class bo{of(e){return new rr(this,e)}reconfigure(e){return bo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}};h(bo,"Compartment");let Ms=bo;const gc=class gc{constructor(e,t){this.compartment=e,this.inner=t}};h(gc,"CompartmentInstance");let rr=gc;const vo=class vo{constructor(e,t,i,r,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],s=Object.create(null),o=new Map;for(let d of wb(e,t,o))d instanceof Be?r.push(d):(s[d.facet.id]||(s[d.facet.id]=[])).push(d);let l=Object.create(null),a=[],c=[];for(let d of r)l[d.id]=c.length<<1,c.push(p=>d.slot(p));let u=i==null?void 0:i.config.facets;for(let d in s){let p=s[d],m=p[0].facet,y=u&&u[d]||[];if(p.every(g=>g.type==0))if(l[m.id]=a.length<<1|1,Fh(y,p))a.push(i.facet(m));else{let g=m.combine(p.map(v=>v.value));a.push(i&&m.compare(g,i.facet(m))?i.facet(m):g)}else{for(let g of p)g.type==0?(l[g.id]=a.length<<1|1,a.push(g.value)):(l[g.id]=c.length<<1,c.push(v=>g.dynamicSlot(v)));l[m.id]=c.length<<1,c.push(g=>vb(g,m,p))}}let f=c.map(d=>d(l));return new vo(e,o,f,l,a,s)}};h(vo,"Configuration");let Ts=vo;function wb(n,e,t){let i=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let c=i[a].indexOf(o);c>-1&&i[a].splice(c,1),o instanceof rr&&t.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let c of o)s(c,l);else if(o instanceof rr){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,l)}else if(o instanceof As)s(o.inner,o.prec);else if(o instanceof Be)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Qi)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,pi.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,l)}}return h(s,"inner"),s(n,pi.default),i.reduce((o,l)=>o.concat(l))}h(wb,"flatten");function Pn(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}h(Pn,"ensureAddr");function Os(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}h(Os,"getAddr");const fp=I.define(),Vl=I.define({combine:n=>n.some(e=>e),static:!0}),dp=I.define({combine:n=>n.length?n[0]:void 0,static:!0}),pp=I.define(),mp=I.define(),gp=I.define(),yp=I.define({combine:n=>n.length?n[0]:!1}),yc=class yc{constructor(e,t){this.type=e,this.value=t}static define(){return new Wl}};h(yc,"Annotation");let mt=yc;const bc=class bc{of(e){return new mt(this,e)}};h(bc,"AnnotationType");let Wl=bc;const vc=class vc{constructor(e){this.map=e}of(e){return new q(this,e)}};h(vc,"StateEffectType");let jl=vc;const wo=class wo{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new wo(this.type,t)}is(e){return this.type==e}static define(e={}){return new jl(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(t);s&&i.push(s)}return i}};h(wo,"StateEffect");let q=wo;q.reconfigure=q.define();q.appendConfig=q.define();const yi=class yi{constructor(e,t,i,r,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&up(i,t.newLength),s.some(l=>l.type==yi.time)||(this.annotations=s.concat(yi.time.of(Date.now())))}static create(e,t,i,r,s,o){return new yi(e,t,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(yi.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};h(yi,"Transaction");let Re=yi;Re.time=mt.define();Re.userEvent=mt.define();Re.addToHistory=mt.define();Re.remote=mt.define();function xb(n,e){let t=[];for(let i=0,r=0;;){let s,o;if(i<n.length&&(r==e.length||e[r]>=n[i]))s=n[i++],o=n[i++];else if(r<e.length)s=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}h(xb,"joinRanges");function bp(n,e,t){var i;let r,s,o;return t?(r=e.changes,s=it.empty(e.changes.length),o=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:q.mapEffects(n.effects,r).concat(q.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}h(bp,"mergeTransaction");function Hl(n,e,t){let i=e.selection,r=en(e.annotations);return e.userEvent&&(r=r.concat(Re.userEvent.of(e.userEvent))),{changes:e.changes instanceof it?e.changes:it.of(e.changes||[],t,n.facet(dp)),selection:i&&(i instanceof S?i:S.single(i.anchor,i.head)),effects:en(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}h(Hl,"resolveTransactionInner");function vp(n,e,t){let i=Hl(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=bp(i,Hl(n,e[s],o?i.changes.newLength:n.doc.length),o)}let r=Re.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Sb(t?kb(r):r)}h(vp,"resolveTransaction");function kb(n){let e=n.startState,t=!0;for(let r of e.facet(pp)){let s=r(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:xb(t,s))}if(t!==!0){let r,s;if(t===!1)s=n.changes.invertedDesc,r=it.empty(e.doc.length);else{let o=n.changes.filter(t);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=Re.create(e,r,n.selection&&n.selection.map(s),q.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let i=e.facet(mp);for(let r=i.length-1;r>=0;r--){let s=i[r](n);s instanceof Re?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Re?n=s[0]:n=vp(e,en(s),!1)}return n}h(kb,"filterTransaction");function Sb(n){let e=n.startState,t=e.facet(gp),i=n;for(let r=t.length-1;r>=0;r--){let s=t[r](n);s&&Object.keys(s).length&&(i=bp(i,Hl(e,s,n.changes.newLength),!0))}return i==n?n:Re.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}h(Sb,"extendTransaction");const Cb=[];function en(n){return n==null?Cb:Array.isArray(n)?n:[n]}h(en,"asArray$1");var ue=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(ue||(ue={}));const Ab=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let zl;try{zl=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Mb(n){if(zl)return zl.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Ab.test(t)))return!0}return!1}h(Mb,"hasWordChar");function Tb(n){return e=>{if(!/\S/.test(e))return ue.Space;if(Mb(e))return ue.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ue.Word;return ue.Other}}h(Tb,"makeCategorizer");const Ze=class Ze{constructor(e,t,i,r,s,o){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Pn(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Pn(this,i),Os(this,i)}update(...e){return vp(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let l of e.effects)l.is(Ms.reconfigure)?(t&&(r=new Map,t.compartments.forEach((a,c)=>r.set(c,a)),t=null),r.set(l.value.compartment,l.value.extension)):l.is(q.reconfigure)?(t=null,i=l.value):l.is(q.appendConfig)&&(t=null,i=en(i).concat(l.value));let s;t?s=e.startState.values.slice():(t=Ts.resolve(i,r,this),s=new Ze(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let o=e.startState.facet(Vl)?e.newSelection:e.newSelection.asSingle();new Ze(t,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:S.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),s=[i.range],o=en(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),u=c.map(r);for(let d=0;d<l;d++)s[d]=s[d].map(u);let f=r.mapDesc(c,!0);s.push(a.range.map(f)),r=r.compose(u),o=q.mapEffects(o,u).concat(q.mapEffects(en(a.effects),f))}return{changes:r,selection:S.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof it?e:it.of(e,this.doc.length,this.facet(Ze.lineSeparator))}toText(e){return te.of(e.split(this.facet(Ze.lineSeparator)||Bl))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Pn(this,t),Os(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Be&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return Ze.create({doc:e.doc,selection:S.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Ts.resolve(e.extensions||[],new Map),i=e.doc instanceof te?e.doc:te.of((e.doc||"").split(t.staticFacet(Ze.lineSeparator)||Bl)),r=e.selection?e.selection instanceof S?e.selection:S.single(e.selection.anchor,e.selection.head):S.single(0);return up(r,i.length),t.staticFacet(Vl)||(r=r.asSingle()),new Ze(t,i,r,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ze.tabSize)}get lineBreak(){return this.facet(Ze.lineSeparator)||`
`}get readOnly(){return this.facet(yp)}phrase(e,...t){for(let i of this.facet(Ze.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let s of this.facet(fp))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return Tb(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Oe(t,o,!1);if(s(t.slice(a,o))!=ue.Word)break;o=a}for(;l<r;){let a=Oe(t,l);if(s(t.slice(l,a))!=ue.Word)break;l=a}return o==l?null:S.range(o+i,l+i)}};h(Ze,"EditorState");let fe=Ze;fe.allowMultipleSelections=Vl;fe.tabSize=I.define({combine:n=>n.length?n[0]:4});fe.lineSeparator=dp;fe.readOnly=yp;fe.phrases=I.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});fe.languageData=fp;fe.changeFilter=pp;fe.transactionFilter=mp;fe.transactionExtender=gp;Ms.reconfigure=q.define();function Kt(n,e,t={}){let i={};for(let r of n)for(let s of Object.keys(r)){let o=r[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}h(Kt,"combineConfig");const wc=class wc{eq(e){return this==e}range(e,t=e){return Gl.create(e,t,this)}};h(wc,"RangeValue");let jt=wc;jt.prototype.startSide=jt.prototype.endSide=0;jt.prototype.point=!1;jt.prototype.mapMode=Ve.TrackDel;var pn;let Gl=(pn=class{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new pn(e,t,i)}},h(pn,"Range"),pn);function Kl(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}h(Kl,"cmpRange");const xo=class xo{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let s=i?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,c=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,t,i,r){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,f=this.to[a]+e,d,p;if(u==f){let m=t.mapPos(u,c.startSide,c.mapMode);if(m==null||(d=p=m,c.startSide!=c.endSide&&(p=t.mapPos(u,c.endSide),p<d)))continue}else if(d=t.mapPos(u,c.startSide),p=t.mapPos(f,c.endSide),d>p||d==p&&c.startSide>0&&c.endSide<=0)continue;(p-d||c.endSide-c.startSide)<0||(o<0&&(o=d),c.point&&(l=Math.max(l,p-d)),i.push(c),r.push(d-o),s.push(p-o))}return{mapped:i.length?new xo(r,s,i,l):null,pos:o}}};h(xo,"Chunk");let $l=xo;const ft=class ft{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new ft(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(Kl)),this.isEmpty)return t.length?ft.of(t):this;let l=new Ds(this,null,-1).goto(0),a=0,c=[],u=new Ei;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||c.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(Gl.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?ft.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)r=Math.max(r,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(r=Math.max(r,u.maxPoint),t.push(u),i.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new ft(i,t,s||ft.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return sr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return sr.from(e).goto(t)}static compare(e,t,i,r,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=nf(o,l,i),c=new mi(o,a,s),u=new mi(l,a,s);i.iterGaps((f,d,p)=>rf(c,f,u,d,p,r)),i.empty&&i.length==0&&rf(c,0,u,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=nf(s,o),a=new mi(s,l,0).goto(i),c=new mi(o,l,0).goto(i);for(;;){if(a.to!=c.to||!Zl(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>r)return!0;a.next(),c.next()}}static spans(e,t,i,r,s=-1){let o=new mi(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<t?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);r.point(l,c,o.point,u,f,o.pointRank),a=Math.min(o.openEnd(c),u.length)}else c>l&&(r.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new Ei;for(let r of e instanceof Gl?[e]:t?Ob(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return ft.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=ft.empty;r=r.nextLayer)t=new ft(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}};h(ft,"RangeSet");let de=ft;de.empty=new de([],[],null,-1);function Ob(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(Kl(e,i)>0)return n.slice().sort(Kl);e=i}return n}h(Ob,"lazySort");de.empty.nextLayer=de.empty;const ko=class ko{finishChunk(e){this.chunks.push(new $l(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new ko)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(de.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=de.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};h(ko,"RangeSetBuilder");let Ei=ko;function nf(n,e,t){let i=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}h(nf,"findSharedChunks");const xc=class xc{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}};h(xc,"LayerCursor");let Ds=xc;const So=class So{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new Ds(o,t,i,s));return r.length==1?r[0]:new So(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)ol(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)ol(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ol(this.heap,0)}}};h(So,"HeapCursor");let sr=So;function ol(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}h(ol,"heapBubble");const kc=class kc{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=sr.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){zr(this.active,e),zr(this.activeTo,e),zr(this.activeRank,e),this.minActive=sf(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||r-this.activeTo[t])>0;)t++;Gr(this.active,t,i),Gr(this.activeTo,t,r),Gr(this.activeRank,t,s),e&&Gr(e,t,this.cursor.from),this.minActive=sf(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&zr(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}};h(kc,"SpanCursor");let mi=kc;function rf(n,e,t,i,r,s){n.goto(e),t.goto(i);let o=i+r,l=i,a=i-e;for(;;){let c=n.to+a-t.to||n.endSide-t.endSide,u=c<0?n.to+a:t.to,f=Math.min(u,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Zl(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(l,f,n.point,t.point):f>l&&!Zl(n.active,t.active)&&s.compareRange(l,f,n.active,t.active),u>o)break;l=u,c<=0&&n.next(),c>=0&&t.next()}}h(rf,"compare");function Zl(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}h(Zl,"sameValues");function zr(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}h(zr,"remove");function Gr(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}h(Gr,"insert");function sf(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}h(sf,"findMinIndex");function gn(n,e,t=n.length){let i=0;for(let r=0;r<t;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Oe(n,r));return i}h(gn,"countColumn");function Xl(n,e,t,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==n.length)break;s+=n.charCodeAt(r)==9?t-s%t:1,r=Oe(n,r)}return i===!0?-1:n.length}h(Xl,"findColumn");const Ul="",of=typeof Symbol>"u"?"__"+Ul:Symbol.for(Ul),Yl=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},Sc=class Sc{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}h(r,"splitSelector");function s(o,l,a,c){let u=[],f=/^@(\w+)\b/.exec(o[0]),d=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let p in l){let m=l[p];if(/&/.test(p))s(p.split(/,\s*/).map(y=>o.map(g=>y.replace(/&/,g))).reduce((y,g)=>y.concat(g)),m,a);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),m,u,d)}else m!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+m+";")}(u.length||d)&&a.push((i&&!f&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}h(s,"render");for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=lf[of]||1;return lf[of]=e+1,Ul+e.toString(36)}static mount(e,t,i){let r=e[Yl],s=i&&i.nonce;r?s&&r.setNonce(s):r=new _l(e,s),r.mount(Array.isArray(t)?t:[t],e)}};h(Sc,"StyleModule");let Lt=Sc,af=new Map;const Cc=class Cc{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=af.get(i);if(s)return e[Yl]=s;this.sheet=new r.CSSStyleSheet,af.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Yl]=this}mount(e,t){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),i)for(let c=0;c<l.rules.length;c++)i.insertRule(l.rules[c],r++)}else{for(;s<a;)r+=this.modules[s++].rules.length;r+=l.rules.length,s++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};h(Cc,"StyleSet");let _l=Cc;var ni={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},or={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Db=typeof navigator<"u"&&/Mac/.test(navigator.platform),Eb=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ae=0;Ae<10;Ae++)ni[48+Ae]=ni[96+Ae]=String(Ae);for(var Ae=1;Ae<=24;Ae++)ni[Ae+111]="F"+Ae;for(var Ae=65;Ae<=90;Ae++)ni[Ae]=String.fromCharCode(Ae+32),or[Ae]=String.fromCharCode(Ae);for(var ll in ni)or.hasOwnProperty(ll)||(or[ll]=ni[ll]);function Lb(n){var e=Db&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Eb&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?or:ni)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}h(Lb,"keyName");function Es(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}h(Es,"getSelection");function Jl(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}h(Jl,"contains");function Pb(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}h(Pb,"deepActiveElement");function fs(n,e){if(!e.anchorNode)return!1;try{return Jl(n,e.anchorNode)}catch{return!1}}h(fs,"hasSelection");function lr(n){return n.nodeType==3?Li(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}h(lr,"clientRectsFor");function Rn(n,e,t,i){return t?hf(n,e,t,i,-1)||hf(n,e,t,i,1):!1}h(Rn,"isEquivalentPosition");function ar(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}h(ar,"domIndex");function hf(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:Ht(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=ar(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?Ht(n):0}else return!1}}h(hf,"scanFor");function Ht(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}h(Ht,"maxOffset");function Vh(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}h(Vh,"flattenRect");function Rb(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}h(Rb,"windowRect");function wp(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}h(wp,"getScale");function Bb(n,e,t,i,r,s,o,l){let a=n.ownerDocument,c=a.defaultView||window;for(let u=n,f=!1;u&&!f;)if(u.nodeType==1){let d,p=u==a.body,m=1,y=1;if(p)d=Rb(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let w=u.getBoundingClientRect();({scaleX:m,scaleY:y}=wp(u,w)),d={left:w.left,right:w.left+u.clientWidth*m,top:w.top,bottom:w.top+u.clientHeight*y}}let g=0,v=0;if(r=="nearest")e.top<d.top?(v=-(d.top-e.top+o),t>0&&e.bottom>d.bottom+v&&(v=e.bottom-d.bottom+v+o)):e.bottom>d.bottom&&(v=e.bottom-d.bottom+o,t<0&&e.top-v<d.top&&(v=-(d.top+v-e.top+o)));else{let w=e.bottom-e.top,x=d.bottom-d.top;v=(r=="center"&&w<=x?e.top+w/2-x/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-x+o)-d.top}if(i=="nearest"?e.left<d.left?(g=-(d.left-e.left+s),t>0&&e.right>d.right+g&&(g=e.right-d.right+g+s)):e.right>d.right&&(g=e.right-d.right+s,t<0&&e.left<d.left+g&&(g=-(d.left+g-e.left+s))):g=(i=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:i=="start"==l?e.left-s:e.right-(d.right-d.left)+s)-d.left,g||v)if(p)c.scrollBy(g,v);else{let w=0,x=0;if(v){let C=u.scrollTop;u.scrollTop+=v/y,x=(u.scrollTop-C)*y}if(g){let C=u.scrollLeft;u.scrollLeft+=g/m,w=(u.scrollLeft-C)*m}e={left:e.left-w,top:e.top-x,right:e.right-w,bottom:e.bottom-x},w&&Math.abs(w-g)<1&&(i="nearest"),x&&Math.abs(x-v)<1&&(r="nearest")}if(p)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}h(Bb,"scrollRectIntoView");function Nb(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}h(Nb,"scrollableParent");const Ac=class Ac{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Ht(t):0),i,Math.min(e.focusOffset,i?Ht(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}};h(Ac,"DOMSelectionState");let ql=Ac,Ni=null;function xp(n){if(n.setActive)return n.setActive();if(Ni)return n.focus(Ni);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Ni==null?{get preventScroll(){return Ni={preventScroll:!0},!0}}:void 0),!Ni){Ni=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],s=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}h(xp,"focusPreventScroll");let cf;function Li(n,e,t=e){let i=cf||(cf=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}h(Li,"textRange");function tn(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,n.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,n.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}h(tn,"dispatchKey");function Ib(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}h(Ib,"getRoot");function kp(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}h(kp,"clearAttributes");function Fb(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Ht(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=Ht(t))}else{if(t==n)return!0;i=ar(t),t=t.parentNode}}h(Fb,"atElementStart");function Sp(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}h(Sp,"isScrolledToBottom");const zn=class zn{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new zn(e.parentNode,ar(e),t)}static after(e,t){return new zn(e.parentNode,ar(e)+1,t)}};h(zn,"DOMPos");let We=zn;const Wh=[],Gn=class Gn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let l=Gn.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&s!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=uf(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&t&&t.node==i&&(t.written=!0);s;)s=uf(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=Ht(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Gn.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,c=i,u=i;a<this.children.length;a++){let f=this.children[a],d=c+f.length;if(c<e&&d>t)return f.domBoundsAround(e,t,c);if(d>=e&&r==-1&&(r=a,s=c),c>t&&f.dom.parentNode==this.dom){o=a,l=u;break}u=d,c=d+f.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Wh){this.markDirty();for(let r=e;r<t;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}this.children.splice(e,t-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Ls(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}};h(Gn,"ContentView");let ce=Gn;ce.prototype.breakAfter=0;function uf(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}h(uf,"rm$1");const Mc=class Mc{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}};h(Mc,"ChildCursor");let Ls=Mc;function Cp(n,e,t,i,r,s,o,l,a){let{children:c}=n,u=c.length?c[e]:null,f=s.length?s[s.length-1]:null,d=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!d&&s.length<2&&u.merge(t,r,s.length?f:null,t==0,l,a))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(f!=null&&f.breakAfter))?(e==i&&(p=p.split(r),r=0),!d&&f&&p.merge(0,r,f,!0,0,a)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,a),s.push(p))):p!=null&&p.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,l,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(c[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,a)&&e--,(e<i||s.length)&&n.replaceChildren(e,i,s)}}h(Cp,"replaceRange");function Ap(n,e,t,i,r,s){let o=n.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),f=e-t;for(let d of i)f+=d.length;n.length+=f,Cp(n,c,u,l,a,i,0,r,s)}h(Ap,"mergeChildrenInto");let _e=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ql=typeof document<"u"?document:{documentElement:{style:{}}};const ea=/Edge\/(\d+)/.exec(_e.userAgent),Mp=/MSIE \d/.test(_e.userAgent),ta=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_e.userAgent),Uo=!!(Mp||ta||ea),ff=!Uo&&/gecko\/(\d+)/i.test(_e.userAgent),al=!Uo&&/Chrome\/(\d+)/.exec(_e.userAgent),df="webkitFontSmoothing"in Ql.documentElement.style,Tp=!Uo&&/Apple Computer/.test(_e.vendor),pf=Tp&&(/Mobile\/\w+/.test(_e.userAgent)||_e.maxTouchPoints>2);var N={mac:pf||/Mac/.test(_e.platform),windows:/Win/.test(_e.platform),linux:/Linux|X11/.test(_e.platform),ie:Uo,ie_version:Mp?Ql.documentMode||6:ta?+ta[1]:ea?+ea[1]:0,gecko:ff,gecko_version:ff?+(/Firefox\/(\d+)/.exec(_e.userAgent)||[0,0])[1]:0,chrome:!!al,chrome_version:al?+al[1]:0,ios:pf,android:/Android\b/.test(_e.userAgent),webkit:df,safari:Tp,webkit_version:df?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Ql.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Vb=256,Kn=class Kn extends ce{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Kn)||this.length-(t-e)+i.length>Vb||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Kn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new We(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Wb(this.dom,e,t)}};h(Kn,"TextView");let ri=Kn;const $n=class $n extends ce{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(kp(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,s,o){return i&&(!(i instanceof $n&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(Ap(this,e,t,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=s),i=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new $n(this.mark,t,o)}domAtPos(e){return Op(this,e)}coordsAt(e,t){return Ep(this,e,t)}};h($n,"MarkView");let si=$n;function Wb(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?N.chrome||N.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):t<0?r--:s<i&&s++;let l=Li(n,r,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return N.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?Vh(a,o<0):a||null}h(Wb,"textCoords");const bi=class bi extends ce{static create(e,t,i){return new bi(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=bi.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,s,o){return i&&(!(i instanceof bi)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof bi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return te.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):te.empty}domAtPos(e){return(this.length?e==0:this.side>0)?We.before(this.dom):We.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=o?-1:1);return Vh(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}};h(bi,"WidgetView");let hr=bi;const Zn=class Zn extends ce{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Zn&&e.side==this.side}split(){return new Zn(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?We.before(this.dom):We.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return te.empty}get isHidden(){return!0}};h(Zn,"WidgetBufferView");let cr=Zn;ri.prototype.children=hr.prototype.children=cr.prototype.children=Wh;function Op(n,e){let t=n.dom,{children:i}=n,r=0;for(let s=0;r<i.length;r++){let o=i[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new We(t,0)}h(Op,"inlineDOMAtPos");function Dp(n,e,t){let i,{children:r}=n;t>0&&e instanceof si&&r.length&&(i=r[r.length-1])instanceof si&&i.mark.eq(e.mark)?Dp(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}h(Dp,"joinInlineInto");function Ep(n,e,t){let i=null,r=-1,s=null,o=-1;function l(c,u){for(let f=0,d=0;f<c.children.length&&d<=u;f++){let p=c.children[f],m=d+p.length;m>=u&&(p.children.length?l(p,u-d):(!s||s.isHidden&&t>0)&&(m>u||d==m&&p.getSide()>0)?(s=p,o=u-d):(d<u||d==m&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-d)),d=m}}h(l,"scan"),l(n,e);let a=(t<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),t):jb(n)}h(Ep,"coordsInChildren");function jb(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=lr(e);return t[t.length-1]||null}h(jb,"fallbackRect");function ia(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}h(ia,"combineAttrs");const mf=Object.create(null);function jh(n,e,t){if(n==e)return!0;n||(n=mf),e||(e=mf);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let s of i)if(s!=t&&(r.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}h(jh,"attrsEq");function na(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}h(na,"updateAttrs");function Hb(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}h(Hb,"getAttrs");const Ki=class Ki extends ce{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,s,o){if(i){if(!(i instanceof Ki))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Ap(this,e,t,i?i.children.slice():[],s,o),!0}split(e){let t=new Ki;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){jh(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Dp(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=ia(t,this.attrs||{})),i&&(this.attrs=ia({class:i},this.attrs||{}))}domAtPos(e){return Op(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(kp(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(na(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&ce.get(r)instanceof si;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=ce.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!N.ios||!this.children.some(s=>s instanceof ri))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof ri)||/[^ -~]/.test(i.text))return null;let r=lr(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=Ep(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=t){if(s instanceof Ki)return s;if(o>t)break}r=o+s.breakAfter}return null}};h(Ki,"LineView");let ke=Ki;const $i=class $i extends ce{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,s,o){return i&&(!(i instanceof $i)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?We.before(this.dom):We.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new $i(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Wh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):te.empty}domBoundsAround(){return null}become(e){return e instanceof $i&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}};h($i,"BlockWidgetView");let nn=$i;const Tc=class Tc{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}};h(Tc,"WidgetType");let oi=Tc;var je=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(je||(je={}));const Oc=class Oc extends jt{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new ur(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new li(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=Lp(e,t);i=(s?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new li(e,i,r,t,e.widget||null,!0)}static line(e){return new fr(e)}static set(e,t=!1){return de.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};h(Oc,"Decoration");let $=Oc;$.none=de.empty;const Co=class Co extends ${constructor(e){let{start:t,end:i}=Lp(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof Co&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&jh(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};h(Co,"MarkDecoration");let ur=Co;ur.prototype.point=!1;const Ao=class Ao extends ${constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ao&&this.spec.class==e.spec.class&&jh(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};h(Ao,"LineDecoration");let fr=Ao;fr.prototype.mapMode=Ve.TrackBefore;fr.prototype.point=!0;const Mo=class Mo extends ${constructor(e,t,i,r,s,o){super(t,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?Ve.TrackBefore:Ve.TrackAfter:Ve.TrackDel}get type(){return this.startSide!=this.endSide?je.WidgetRange:this.startSide<=0?je.WidgetBefore:je.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Mo&&zb(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};h(Mo,"PointDecoration");let li=Mo;li.prototype.point=!0;function Lp(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}h(Lp,"getInclusive");function zb(n,e){return n==e||!!(n&&e&&n.compare(e))}h(zb,"widgetsEq");function ra(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}h(ra,"addRange");const To=class To{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof nn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ke),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Kr(new cr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof nn)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Kr(new ri(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof li){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof li)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new nn(i.widget||zt.block,l,i));else{let a=hr.create(i.widget||zt.inline,l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||s>r.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(f.append(Kr(new cr(1),r),s),s=r.length+Math.max(0,s-r.length)),f.append(Kr(a,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<t||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,r,s){let o=new To(e,t,i,s);return o.openEnd=de.spans(r,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}};h(To,"ContentBuilder");let Bn=To;function Kr(n,e){for(let t of e)n=new si(t,[n],n.length);return n}h(Kr,"wrapMarks");const Dc=class Dc extends oi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};h(Dc,"NullWidget");let zt=Dc;zt.inline=new zt("span");zt.block=new zt("div");var ae=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(ae||(ae={}));const Pi=ae.LTR,Hh=ae.RTL;function Pp(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}h(Pp,"dec");const Gb=Pp("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Kb=Pp("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),sa=Object.create(null),vt=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);sa[e]=t,sa[t]=-e}function Rp(n){return n<=247?Gb[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Kb[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}h(Rp,"charType");const $b=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,Ec=class Ec{get dir(){return this.level%2?Hh:Pi}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(r!=0?r<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}};h(Ec,"BidiSpan");let Mt=Ec;function Bp(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Bp(i.inner,r.inner))return!1}return!0}h(Bp,"isolatesEq");const ne=[];function Zb(n,e,t,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,l=s<i.length?i[s].from:t,a=s?256:r;for(let c=o,u=a,f=a;c<l;c++){let d=Rp(n.charCodeAt(c));d==512?d=u:d==8&&f==4&&(d=16),ne[c]=d==4?2:d,d&7&&(f=d),u=d}for(let c=o,u=a,f=a;c<l;c++){let d=ne[c];if(d==128)c<l-1&&u==ne[c+1]&&u&24?d=ne[c]=u:ne[c]=256;else if(d==64){let p=c+1;for(;p<l&&ne[p]==64;)p++;let m=c&&u==8||p<t&&ne[p]==8?f==1?1:8:256;for(let y=c;y<p;y++)ne[y]=m;c=p-1}else d==8&&f==1&&(ne[c]=1);u=d,d&7&&(f=d)}}}h(Zb,"computeCharTypes");function Xb(n,e,t,i,r){let s=r==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:t;for(let f=c,d,p,m;f<u;f++)if(p=sa[d=n.charCodeAt(f)])if(p<0){for(let y=l-3;y>=0;y-=3)if(vt[y+1]==-p){let g=vt[y+2],v=g&2?r:g&4?g&1?s:r:0;v&&(ne[f]=ne[vt[y]]=v),l=y;break}}else{if(vt.length==189)break;vt[l++]=f,vt[l++]=d,vt[l++]=a}else if((m=ne[f])==2||m==1){let y=m==r;a=y?0:1;for(let g=l-3;g>=0;g-=3){let v=vt[g+2];if(v&2)break;if(y)vt[g+2]|=2;else{if(v&4)break;vt[g+2]|=4}}}}}h(Xb,"processBracketPairs");function Ub(n,e,t,i){for(let r=0,s=i;r<=t.length;r++){let o=r?t[r-1].to:n,l=r<t.length?t[r].from:e;for(let a=o;a<l;){let c=ne[a];if(c==256){let u=a+1;for(;;)if(u==l){if(r==t.length)break;u=t[r++].to,l=r<t.length?t[r].from:e}else if(ne[u]==256)u++;else break;let f=s==1,d=(u<e?ne[u]:i)==1,p=f==d?f?1:2:i;for(let m=u,y=r,g=y?t[y-1].to:n;m>a;)m==g&&(m=t[--y].from,g=y?t[y-1].to:n),ne[--m]=p;a=u}else s=c,a++}}}h(Ub,"processNeutrals");function oa(n,e,t,i,r,s,o){let l=i%2?2:1;if(i%2==r%2)for(let a=e,c=0;a<t;){let u=!0,f=!1;if(c==s.length||a<s[c].from){let y=ne[a];y!=l&&(u=!1,f=y==16)}let d=!u&&l==1?[]:null,p=u?i:i+1,m=a;e:for(;;)if(c<s.length&&m==s[c].from){if(f)break e;let y=s[c];if(!u)for(let g=y.to,v=c+1;;){if(g==t)break e;if(v<s.length&&s[v].from==g)g=s[v++].to;else{if(ne[g]==l)break e;break}}if(c++,d)d.push(y);else{y.from>a&&o.push(new Mt(a,y.from,p));let g=y.direction==Pi!=!(p%2);la(n,g?i+1:i,r,y.inner,y.from,y.to,o),a=y.to}m=y.to}else{if(m==t||(u?ne[m]!=l:ne[m]==l))break;m++}d?oa(n,a,m,i+1,r,d,o):a<m&&o.push(new Mt(a,m,p)),a=m}else for(let a=t,c=s.length;a>e;){let u=!0,f=!1;if(!c||a>s[c-1].to){let y=ne[a-1];y!=l&&(u=!1,f=y==16)}let d=!u&&l==1?[]:null,p=u?i:i+1,m=a;e:for(;;)if(c&&m==s[c-1].to){if(f)break e;let y=s[--c];if(!u)for(let g=y.from,v=c;;){if(g==e)break e;if(v&&s[v-1].to==g)g=s[--v].from;else{if(ne[g-1]==l)break e;break}}if(d)d.push(y);else{y.to<a&&o.push(new Mt(y.to,a,p));let g=y.direction==Pi!=!(p%2);la(n,g?i+1:i,r,y.inner,y.from,y.to,o),a=y.from}m=y.from}else{if(m==e||(u?ne[m-1]!=l:ne[m-1]==l))break;m--}d?oa(n,m,a,i+1,r,d,o):m<a&&o.push(new Mt(m,a,p)),a=m}}h(oa,"emitSpans");function la(n,e,t,i,r,s,o){let l=e%2?2:1;Zb(n,r,s,i,l),Xb(n,r,s,i,l),Ub(r,s,i,l),oa(n,r,s,e,t,i,o)}h(la,"computeSectionOrder");function Yb(n,e,t){if(!n)return[new Mt(0,0,e==Hh?1:0)];if(e==Pi&&!t.length&&!$b.test(n))return Np(n.length);if(t.length)for(;n.length>ne.length;)ne[ne.length]=256;let i=[],r=e==Pi?0:1;return la(n,r,r,t,0,n.length,i),i}h(Yb,"computeOrder");function Np(n){return[new Mt(0,n,0)]}h(Np,"trivialOrder");let Ip="";function _b(n,e,t,i,r){var s;let o=i.head-n.from,l=Mt.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),a=e[l],c=a.side(r,t);if(o==c){let d=l+=r?1:-1;if(d<0||d>=e.length)return null;a=e[l=d],o=a.side(!r,t),c=a.side(r,t)}let u=Oe(n.text,o,a.forward(r,t));(u<a.from||u>a.to)&&(u=c),Ip=n.text.slice(Math.min(o,u),Math.max(o,u));let f=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return f&&u==c&&f.level+(r?0:1)<a.level?S.cursor(f.side(!r,t)+n.from,f.forward(r,t)?1:-1,f.level):S.cursor(u+n.from,a.forward(r,t)?-1:1,a.level)}h(_b,"moveVisually");function Jb(n,e,t){for(let i=e;i<t;i++){let r=Rp(n.charCodeAt(i));if(r==1)return Pi;if(r==2||r==4)return Hh}return Pi}h(Jb,"autoDirection");const Fp=I.define(),Vp=I.define(),Wp=I.define(),jp=I.define(),aa=I.define(),Hp=I.define(),zp=I.define(),Gp=I.define({combine:n=>n.some(e=>e)}),Kp=I.define({combine:n=>n.some(e=>e)}),Xn=class Xn{constructor(e,t="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Xn(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Xn(S.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}};h(Xn,"ScrollTarget");let Nn=Xn;const $r=q.define({map:(n,e)=>n.map(e)});function qe(n,e,t){let i=n.facet(jp);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}h(qe,"logException");const Yo=I.define({combine:n=>n.length?n[0]:!0});let qb=0;const Tn=I.define(),Un=class Un{constructor(e,t,i,r,s){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=t||{};return new Un(qb++,e,i,r,l=>{let a=[Tn.of(l)];return o&&a.push(dr.of(c=>{let u=c.plugin(l);return u?o(u):$.none})),s&&a.push(s(l)),a})}static fromClass(e,t){return Un.define(i=>new e(i),t)}};h(Un,"ViewPlugin");let Ee=Un;const Lc=class Lc{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(qe(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){qe(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){qe(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}};h(Lc,"PluginInstance");let In=Lc;const $p=I.define(),zh=I.define(),dr=I.define(),Zp=I.define(),Gh=I.define(),Xp=I.define();function gf(n,e){let t=n.state.facet(Xp);if(!t.length)return t;let i=t.map(s=>s instanceof Function?s(n):s),r=[];return de.spans(i,e.from,e.to,{point(){},span(s,o,l,a){let c=s-e.from,u=o-e.from,f=r;for(let d=l.length-1;d>=0;d--,a--){let p=l[d].spec.bidiIsolate,m;if(p==null&&(p=Jb(e.text,c,u)),a>0&&f.length&&(m=f[f.length-1]).to==c&&m.direction==p)m.to=u,f=m.inner;else{let y={from:c,to:u,direction:p,inner:[]};f.push(y),f=y.inner}}}}),r}h(gf,"getIsolatedRanges");const Up=I.define();function Yp(n){let e=0,t=0,i=0,r=0;for(let s of n.state.facet(Up)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:t,top:i,bottom:r}}h(Yp,"getScrollMargins");const On=I.define(),Zi=class Zi{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new Zi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],c=o-l,u=a?a.fromB:1e9;for(;s<t.length&&t[s]<u;){let f=t[s],d=t[s+1],p=Math.max(l,f),m=Math.min(u,d);if(p<=m&&new Zi(p+c,m+c,p,m).addToSet(i),d>u)break;s+=2}if(!a)return i;new Zi(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}};h(Zi,"ChangedRange");let Ot=Zi;const Oo=class Oo{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=it.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,l,a)=>r.push(new Ot(s,o,l,a))),this.changedRanges=r}static create(e,t,i){return new Oo(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}};h(Oo,"ViewUpdate");let Ps=Oo;const Pc=class Pc extends ce{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.compositionBarrier=$.none,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ke],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ot(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!ov(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?tv(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Ot(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(N.ie||N.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=rv(o,l,e.changes);return i=Ot.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=N.chrome||N.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof nn&&o.widget instanceof Bs&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:a,toA:c,fromB:u,toB:f}=l,d,p,m,y;if(i&&i.range.fromB<f&&i.range.toB>u){let C=Bn.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=Bn.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);p=C.breakAtStart,m=C.openStart,y=k.openEnd;let A=this.compositionView(i);k.breakAtStart?A.breakAfter=1:k.content.length&&A.merge(A.length,A.length,k.content[0],!1,k.openStart,0)&&(A.breakAfter=k.content[0].breakAfter,k.content.shift()),C.content.length&&A.merge(0,0,C.content[C.content.length-1],!0,0,C.openEnd)&&C.content.pop(),d=C.content.concat(A).concat(k.content)}else({content:d,breakAtStart:p,openStart:m,openEnd:y}=Bn.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:g,off:v}=s.findPos(c,1),{i:w,off:x}=s.findPos(a,-1);Cp(this,w,x,g,v,d,p,m,y)}i&&this.fixCompositionDOM(i)}compositionView(e){let t=new ri(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new si(r,[t],t.length);let i=new ke;return i.append(t,0),i}fixCompositionDOM(e){let t=h((s,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=ce.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},"fix"),i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],t(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&fs(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(N.gecko&&l.empty&&!this.hasComposition&&ev(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=c=new We(f,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Rn(a.node,a.offset,u.anchorNode,u.anchorOffset)||!Rn(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{N.android&&N.chrome&&this.dom.contains(u.focusNode)&&sv(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=Es(this.view.root);if(f)if(l.empty){if(N.gecko){let d=iv(a.node,a.offset);if(d&&d!=3){let p=Jp(a.node,a.offset,d==1?1:-1);p&&(a=new We(p.node,p.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(c.node,c.offset)}catch{}}else{let d=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),d.setEnd(c.node,c.offset),d.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(d)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new We(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new We(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&!this.compositionBarrier.size&&Rn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Es(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=ke.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);i.collapse(u.node,u.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&i.collapse(r,s)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let s=ce.get(t.childNodes[r]);s instanceof ke&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=ce.get(t.childNodes[r]);s instanceof ke&&(i=s.domAtPos(s.length))}return i?new We(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=ce.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof ke)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=s-l.breakAfter,c=a-l.length;if(a<e)break;c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof ke&&!(i instanceof ke&&t>=0))&&(i=l,r=c),s=c}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof ke))return null;for(;r.children.length;){let{i:l,off:a}=r.childPos(i,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}i=a}if(!(r instanceof ri))return null;let s=Oe(r.text,i);if(s==i)return null;let o=Li(r.dom,i,s).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==ae.LTR;for(let c=0,u=0;u<this.children.length;u++){let f=this.children[u],d=c+f.length;if(d>r)break;if(c>=i){let p=f.dom.getBoundingClientRect();if(t.push(p.height),o){let m=f.dom.lastChild,y=m?lr(m):[];if(y.length){let g=y[y.length-1],v=a?g.right-p.left:p.right-g.left;v>l&&(l=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=d)}}}c=d+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?ae.RTL:ae.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ke){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=lr(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Ls(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],o=s?s.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push($.replace({widget:new Bs(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return $.set(e)}updateDeco(){let e=1,t=this.view.state.facet(dr).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Zp).map((s,o)=>{let l=typeof s=="function";return l&&(i=!0),l?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(de.join(r))),this.decorations=[this.compositionBarrier,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}maybeCreateCompositionBarrier(){let{main:{head:e,empty:t}}=this.view.state.selection;if(!t)return!1;let i=null;for(let r of this.decorations)if(r.between(e,e,(s,o,l)=>{l.point?i=!1:l.endSide<0&&s<e&&o==e&&(i=!0)}),i===!1)break;return this.compositionBarrier=i?$.set(Qb.range(e)):$.none,!!i}clearCompositionBarrier(){this.compositionBarrier=$.none}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=Yp(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;Bb(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==ae.LTR)}};h(Pc,"DocView");let Rs=Pc;const Qb=$.widget({side:-1,widget:zt.inline});function ev(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}h(ev,"betweenUneditable");const Rc=class Rc extends oi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}};h(Rc,"BlockGapWidget");let Bs=Rc;function _p(n,e){let t=n.observer.selectionRange,i=t.focusNode&&Jp(t.focusNode,t.focusOffset,0);if(!i)return null;let r=e-i.offset;return{from:r,to:r+i.node.nodeValue.length,node:i.node}}h(_p,"findCompositionNode");function tv(n,e,t){let i=_p(n,t);if(!i)return null;let{node:r,from:s,to:o}=i,l=r.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,c=new Ot(a.mapPos(s),a.mapPos(o),s,o),u=[];for(let f=r.parentNode;;f=f.parentNode){let d=ce.get(f);if(d instanceof si)u.push({node:f,deco:d.mark});else{if(d instanceof ke||f.nodeName=="DIV"&&f.parentNode==n.contentDOM)return{range:c,text:r,marks:u,line:f};if(f!=n.contentDOM)u.push({node:f,deco:new ur({inclusive:!0,attributes:Hb(f),tagName:f.tagName.toLowerCase()})});else return null}}}h(tv,"findCompositionRange");function Jp(n,e,t){if(t<=0)for(let i=n,r=e;;){if(i.nodeType==3)return{node:i,offset:r};if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=Ht(i);else break}if(t>=0)for(let i=n,r=e;;){if(i.nodeType==3)return{node:i,offset:r};if(i.nodeType==1&&r<i.childNodes.length&&t>=0)i=i.childNodes[r],r=0;else break}return null}h(Jp,"nearbyTextNode");function iv(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}h(iv,"nextToUneditable");var Dr;let nv=(Dr=class{constructor(){this.changes=[]}compareRange(e,t){ra(e,t,this.changes)}comparePoint(e,t){ra(e,t,this.changes)}},h(Dr,"DecorationComparator"),Dr);function rv(n,e,t){let i=new nv;return de.compare(n,e,t,i),i.changes}h(rv,"findChangedDeco");function sv(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}h(sv,"inUneditable");function ov(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}h(ov,"touchesComposition");function lv(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),s=e-r.from;if(r.length==0)return S.cursor(e);s==0?t=1:s==r.length&&(t=-1);let o=s,l=s;t<0?o=Oe(r.text,s,!1):l=Oe(r.text,s);let a=i(r.text.slice(o,l));for(;o>0;){let c=Oe(r.text,o,!1);if(i(r.text.slice(c,o))!=a)break;o=c}for(;l<r.length;){let c=Oe(r.text,l);if(i(r.text.slice(l,c))!=a)break;l=c}return S.range(o+r.from,l+r.from)}h(lv,"groupAt");function av(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}h(av,"getdx");function hv(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}h(hv,"getdy");function hl(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}h(hl,"yOverlap");function yf(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}h(yf,"upTop");function bf(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}h(bf,"upBot");function ha(n,e,t){let i,r,s,o,l=!1,a,c,u,f;for(let m=n.firstChild;m;m=m.nextSibling){let y=lr(m);for(let g=0;g<y.length;g++){let v=y[g];r&&hl(r,v)&&(v=yf(bf(v,r.bottom),r.top));let w=av(e,v),x=hv(t,v);if(w==0&&x==0)return m.nodeType==3?vf(m,e,t):ha(m,e,t);if(!i||o>x||o==x&&s>w){i=m,r=v,s=w,o=x;let C=x?t<v.top?-1:1:w?e<v.left?-1:1:0;l=!C||(C>0?g<y.length-1:g>0)}w==0?t>v.bottom&&(!u||u.bottom<v.bottom)?(a=m,u=v):t<v.top&&(!f||f.top>v.top)&&(c=m,f=v):u&&hl(u,v)?u=bf(u,v.bottom):f&&hl(f,v)&&(f=yf(f,v.top))}}if(u&&u.bottom>=t?(i=a,r=u):f&&f.top<=t&&(i=c,r=f),!i)return{node:n,offset:0};let d=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return vf(i,d,t);if(l&&i.contentEditable!="false")return ha(i,d,t);let p=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:p}}h(ha,"domPosAtCoords");function vf(n,e,t){let i=n.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Li(n,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<s){let d=e>=(u.left+u.right)/2,p=d;if((N.chrome||N.gecko)&&Li(n,l).getBoundingClientRect().left==u.right&&(p=!d),f<=0)return{node:n,offset:l+(p?1:0)};r=l+(p?1:0),s=f}}}return{node:n,offset:r>-1?r:o>0?n.nodeValue.length:0}}h(vf,"domPosInText");function qp(n,e,t,i=-1){var r,s;let o=n.contentDOM.getBoundingClientRect(),l=o.top+n.viewState.paddingTop,a,{docHeight:c}=n.viewState,{x:u,y:f}=e,d=f-l;if(d<0)return 0;if(d>c)return n.state.doc.length;for(let C=n.viewState.heightOracle.textHeight/2,k=!1;a=n.elementAtHeight(d),a.type!=je.Text;)for(;d=i>0?a.bottom+C:a.top-C,!(d>=0&&d<=c);){if(k)return t?null:0;k=!0,i=-i}f=l+d;let p=a.from;if(p<n.viewport.from)return n.viewport.from==0?0:t?null:wf(n,o,a,u,f);if(p>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:wf(n,o,a,u,f);let m=n.dom.ownerDocument,y=n.root.elementFromPoint?n.root:m,g=y.elementFromPoint(u,f);g&&!n.contentDOM.contains(g)&&(g=null),g||(u=Math.max(o.left+1,Math.min(o.right-1,u)),g=y.elementFromPoint(u,f),g&&!n.contentDOM.contains(g)&&(g=null));let v,w=-1;if(g&&((r=n.docView.nearest(g))===null||r===void 0?void 0:r.isEditable)!=!1){if(m.caretPositionFromPoint){let C=m.caretPositionFromPoint(u,f);C&&({offsetNode:v,offset:w}=C)}else if(m.caretRangeFromPoint){let C=m.caretRangeFromPoint(u,f);C&&({startContainer:v,startOffset:w}=C,(!n.contentDOM.contains(v)||N.safari&&cv(v,w,u)||N.chrome&&uv(v,w,u))&&(v=void 0))}}if(!v||!n.docView.dom.contains(v)){let C=ke.find(n.docView,p);if(!C)return d>a.top+a.height/2?a.to:a.from;({node:v,offset:w}=ha(C.dom,u,f))}let x=n.docView.nearest(v);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let C=x.dom.getBoundingClientRect();return e.y<C.top||e.y<=C.bottom&&e.x<=(C.left+C.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(v,w)+x.posAtStart}h(qp,"posAtCoords");function wf(n,e,t,i,r){let s=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,a=Math.floor((r-t.top-(n.defaultLineHeight-l)*.5)/l);s+=a*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+Xl(o,s,n.state.tabSize)}h(wf,"posAtCoordsImprecise");function cv(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Li(n,i-1,i).getBoundingClientRect().left>t}h(cv,"isSuspiciousSafariCaretResult");function uv(n,e,t){if(e!=0)return!1;for(let r=n;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=n.nodeType==1?n.getBoundingClientRect():Li(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}h(uv,"isSuspiciousChromeCaretResult");function ca(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==je.Text))return i}return t}h(ca,"blockAt");function fv(n,e,t,i){let r=ca(n,e.head),s=!i||r.type!=je.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),l=n.textDirectionAt(r.from),a=n.posAtCoords({x:t==(l==ae.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return S.cursor(a,t?-1:1)}return S.cursor(t?r.to:r.from,t?-1:1)}h(fv,"moveToLineBoundary");function xf(n,e,t,i){let r=n.state.doc.lineAt(e.head),s=n.bidiSpans(r),o=n.textDirectionAt(r.from);for(let l=e,a=null;;){let c=_b(r,s,o,l,t),u=Ip;if(!c){if(r.number==(t?n.state.doc.lines:1))return l;u=`
`,r=n.state.doc.line(r.number+(t?1:-1)),s=n.bidiSpans(r),c=n.visualLineSide(r,!t)}if(a){if(!a(u))return l}else{if(!i)return c;a=i(u)}l=c}}h(xf,"moveByChar");function dv(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return s=>{let o=i(s);return r==ue.Space&&(r=o),r==o}}h(dv,"byGroup");function pv(n,e,t,i){let r=e.head,s=t?1:-1;if(r==(t?n.state.doc.length:0))return S.cursor(r,e.assoc);let o=e.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(r,e.assoc||-1),u=n.documentTop;if(c)o==null&&(o=c.left-a.left),l=s<0?c.top:c.bottom;else{let p=n.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,n.defaultCharacterWidth*(r-p.from))),l=(s<0?p.top:p.bottom)+u}let f=a.left+o,d=i??n.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let m=l+(d+p)*s,y=qp(n,{x:f,y:m},!1,s);if(m<a.top||m>a.bottom||(s<0?y<r:y>r)){let g=n.docView.coordsForChar(y),v=!g||m<g.top?-1:1;return S.cursor(y,v,void 0,o)}}}h(pv,"moveVertically");function ds(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||t||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}h(ds,"skipAtomicRanges");function cl(n,e,t){let i=ds(n.state.facet(Gh).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:S.cursor(i,i<t.from?1:-1)}h(cl,"skipAtoms");const Bc=class Bc{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,N.safari&&e.contentDOM.addEventListener("input",()=>null),N.gecko&&Dv(e.contentDOM.ownerDocument)}handleEvent(e){!xv(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=mv(e),i=this.handlers,r=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,l=i[s];l&&o!=!l.handlers.length&&(r.removeEventListener(s,this.handleEvent),l=null),l||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!t[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&em.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),N.android&&N.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return N.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Qp.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||gv.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,tn(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:N.safari&&!N.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};h(Bc,"InputState");let ua=Bc;function kf(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){qe(t.state,r)}}}h(kf,"bindHandler");function mv(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}h(t,"record");for(let i of n){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&t(s).handlers.push(kf(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&t(s).observers.push(kf(i.value,o))}}for(let i in gt)t(i).handlers.push(gt[i]);for(let i in yt)t(i).observers.push(yt[i]);return e}h(mv,"computeHandlers");const Qp=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],gv="dthko",em=[16,17,18,20,91,92,224,225],Zr=6;function Xr(n){return Math.max(0,n)*.7+8}h(Xr,"dragScrollSpeed");function yv(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}h(yv,"dist");const Nc=class Nc{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=Nb(e.contentDOM),this.atoms=e.state.facet(Gh).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(fe.allowMultipleSelections)&&bv(e,t),this.dragging=wv(e,t)&&rm(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&yv(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=Yp(this.view);e.clientX-o.left<=s.left+Zr?i=-Xr(s.left-e.clientX):e.clientX+o.right>=s.right-Zr&&(i=Xr(e.clientX-s.right)),e.clientY-o.top<=s.top+Zr?r=-Xr(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Zr&&(r=Xr(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=ds(this.atoms,r.from,0);o!=r.from&&(s=S.cursor(o,-1))}else{let o=ds(this.atoms,r.from,-1),l=ds(this.atoms,r.to,1);(o!=r.from||l!=r.to)&&(s=S.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}s&&(t||(t=e.ranges.slice()),t[i]=s)}return t?S.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};h(Nc,"MouseSelection");let fa=Nc;function bv(n,e){let t=n.state.facet(Fp);return t.length?t[0](e):N.mac?e.metaKey:e.ctrlKey}h(bv,"addsSelectionRange");function vv(n,e){let t=n.state.facet(Vp);return t.length?t[0](e):N.mac?!e.altKey:!e.ctrlKey}h(vv,"dragMovesSelection");function wv(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=Es(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}h(wv,"isInPrimarySelection");function xv(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ce.get(t))&&i.ignoreEvent(e))return!1;return!0}h(xv,"eventBelongsToEditor");const gt=Object.create(null),yt=Object.create(null),tm=N.ie&&N.ie_version<15||N.ios&&N.webkit_version<604;function kv(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),im(n,t.value)},50)}h(kv,"capturePaste");function im(n,e){let{state:t}=n,i,r=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(da!=null&&t.selection.ranges.every(a=>a.empty)&&da==s.toString()){let a=-1;i=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let f=t.toText((o?s.line(r++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:S.cursor(c.from+f.length)}})}else o?i=t.changeByRange(a=>{let c=s.line(r++);return{changes:{from:a.from,to:a.to,insert:c.text},range:S.cursor(a.from+c.length)}}):i=t.replaceSelection(s);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}h(im,"doPaste");yt.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};gt.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&(n.inputState.lastEscPress=Date.now()),!1);yt.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};yt.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};gt.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(Wp))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=Av(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new fa(n,e,t,i)),i&&n.observer.ignore(()=>xp(n.contentDOM));let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function Sf(n,e,t,i){if(i==1)return S.cursor(e,t);if(i==2)return lv(n.state,e,t);{let r=ke.find(n.docView,e),s=n.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<n.state.doc.length&&l==s.to&&l++,S.range(o,l)}}h(Sf,"rangeForClick");let nm=h((n,e)=>n>=e.top&&n<=e.bottom,"insideY"),Cf=h((n,e,t)=>nm(e,t)&&n>=t.left&&n<=t.right,"inside");function Sv(n,e,t,i){let r=ke.find(n.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&Cf(t,i,o))return-1;let l=r.coordsAt(s,1);return l&&Cf(t,i,l)?1:o&&nm(i,o)?-1:1}h(Sv,"findPositionSide");function Af(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Sv(n,t,e.clientX,e.clientY)}}h(Af,"queryPos");const Cv=N.ie&&N.ie_version<=11;let Mf=null,Tf=0,Of=0;function rm(n){if(!Cv)return n.detail;let e=Mf,t=Of;return Mf=n,Of=Date.now(),Tf=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Tf+1)%3:1}h(rm,"getClickType");function Av(n,e){let t=Af(n,e),i=rm(e),r=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),r=r.map(s.changes))},get(s,o,l){let a=Af(n,s),c,u=Sf(n,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let f=Sf(n,t.pos,t.bias,i),d=Math.min(f.from,u.from),p=Math.max(f.to,u.to);u=d<u.from?S.range(d,p):S.range(p,d)}return o?r.replaceRange(r.main.extend(u.from,u.to)):l&&i==1&&r.ranges.length>1&&(c=Mv(r,a.pos))?c:l?r.addRange(u):S.create([u])}}}h(Av,"basicMouseSelection");function Mv(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return S.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}h(Mv,"removeRangeAround");gt.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=t.to||o<=t.from)&&(t=S.range(s,o))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};gt.dragend=n=>(n.inputState.draggedContent=null,!1);function Df(n,e,t,i){if(!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=i&&s&&vv(n,e)?{from:s.from,to:s.to}:null,l={from:r,insert:t},a=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}h(Df,"dropText");gt.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,s=h(()=>{++r==t.length&&Df(n,e,i.filter(o=>o!=null).join(n.state.lineBreak),!1)},"finishFile");for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Df(n,e,i,!0),!0}return!1};gt.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=tm?null:e.clipboardData;return t?(im(n,t.getData("text/plain")||t.getData("text/uri-text")),!0):(kv(n),!1)};function Tv(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}h(Tv,"captureCopy");function Ov(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}h(Ov,"copiedRange");let da=null;gt.copy=gt.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=Ov(n.state);if(!t&&!r)return!1;da=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=tm?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(Tv(n,t),!1)};const sm=mt.define();function om(n,e){let t=[];for(let i of n.facet(zp)){let r=i(n,e);r&&t.push(r)}return t?n.update({effects:t,annotations:sm.of(!0)}):null}h(om,"focusChangeTransaction");function lm(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=om(n.state,e);t?n.dispatch(t):n.update([])}},10)}h(lm,"updateForFocusChange");yt.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),lm(n)};yt.blur=n=>{n.observer.clearSelectionRange(),lm(n)};yt.compositionstart=yt.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0,n.docView.maybeCreateCompositionBarrier()&&(n.update([]),n.docView.clearCompositionBarrier()))};yt.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,N.chrome&&N.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50)};yt.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};gt.beforeinput=(n,e)=>{var t;let i;if(N.chrome&&N.android&&(i=Qp.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return!1};const Ef=new Set;function Dv(n){Ef.has(n)||(Ef.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}h(Dv,"firefoxCopyCutHack");const Lf=["pre-wrap","normal","pre-line","break-spaces"],Ic=class Ic{constructor(e){this.lineWrapping=e,this.doc=te.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Lf.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,s,o){let l=Lf.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=s,a){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return a}};h(Ic,"HeightOracle");let pa=Ic;const Fc=class Fc{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}};h(Fc,"MeasuredHeights");let ma=Fc;const Do=class Do{constructor(e,t,i,r,s){this.from=e,this.length=t,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?je.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof li?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Do(this.from,this.length+e.length,this.top,this.height+e.height,t)}};h(Do,"BlockInfo");let At=Do;var le=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(le||(le={}));const ps=.001,Xi=class Xi{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>ps&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Xi.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let s=this,o=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:u,toB:f}=r[l],d=s.lineAt(a,le.ByPosNoHeight,i.setDoc(t),0,0),p=d.to>=c?d:s.lineAt(c,le.ByPosNoHeight,i,0,0);for(f+=p.to-c,c=p.to;l>0&&d.from<=r[l-1].toA;)a=r[l-1].fromA,u=r[l-1].fromB,l--,a<d.from&&(d=s.lineAt(a,le.ByPosNoHeight,i,0,0));u+=d.from-a,a=d.from;let m=ya.build(i.setDoc(o),e,u,f);s=s.replace(a,c,m)}return s.updateHeight(i,0)}static empty(){return new rt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,s=0;for(;;)if(t==i)if(r>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(s>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[t++];l&&(r+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new ga(Xi.of(e.slice(0,t)),o,Xi.of(e.slice(i)))}};h(Xi,"HeightMap");let tt=Xi;tt.prototype.size=1;const Vc=class Vc extends tt{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new At(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,t,i,r,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}};h(Vc,"HeightMapBlock");let Ns=Vc;const Yn=class Yn extends Ns{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new At(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof Yn||r instanceof Qt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Qt?r=new Yn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):tt.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}};h(Yn,"HeightMapText");let rt=Yn;const Xe=class Xe extends tt{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,s=r-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:l}}blockAt(e,t,i,r){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let c=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),u=t.doc.lineAt(c),f=l+u.length*a,d=Math.max(i,e-f/2);return new At(u.from,u.length,d,f,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:u,length:f}=t.doc.line(s+c);return new At(u,f,i+l*c,l,0)}}lineAt(e,t,i,r,s){if(t==le.ByHeight)return this.blockAt(e,i,r,s);if(t==le.ByPosNoHeight){let{from:p,to:m}=i.doc.lineAt(e);return new At(p,m-p,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=l+c.length*a,f=c.number-o,d=r+l*f+a*(c.from-s-f);return new At(c.from,c.length,Math.max(r,Math.min(d,r+this.height-u)),u,0)}forEachLine(e,t,i,r,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(i,s);for(let u=e,f=r;u<=t;){let d=i.doc.lineAt(u);if(u==e){let m=d.number-l;f+=a*m+c*(e-s-m)}let p=a+c*d.length;o(new At(d.from,d.length,f,p,0)),f+=p,u=d.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let s=i[i.length-1];s instanceof Xe?i[i.length-1]=new Xe(s.length+r):i.push(null,new Xe(r-1))}if(e>0){let s=i[0];s instanceof Xe?i[0]=new Xe(e+s.length):i.unshift(new Xe(e-1),null)}return tt.of(i)}decomposeLeft(e,t){t.push(new Xe(e-1),null)}decomposeRight(e,t){t.push(null,new Xe(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],l=Math.max(t,r.from),a=-1;for(r.from>t&&o.push(new Xe(r.from-t-1).updateHeight(e,t));l<=s&&r.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=r.heights[r.index++];a==-1?a=f:Math.abs(f-a)>=ps&&(a=-2);let d=new rt(u,f);d.outdated=!1,o.push(d),l+=u+1}l<=s&&o.push(null,new Xe(s-l).updateHeight(e,l));let c=tt.of(o);return(a<0||Math.abs(c.height-this.height)>=ps||Math.abs(a-this.heightMetrics(e,t).perLine)>=ps)&&(e.heightChanged=!0),c}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}};h(Xe,"HeightMapGap");let Qt=Xe;const Wc=class Wc extends tt{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,i,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=t==le.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,t,i,r,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let u=t==le.ByPosNoHeight?le.ByPosNoHeight:le.ByPos;return a?c.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,r,s).join(c)}forEachLine(e,t,i,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,r,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let c=this.lineAt(a,le.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,l,a,o)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&Pf(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),Pf(s,l)}return tt.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?tt.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return r&&r.from<=t+s.length&&r.more?a=s=s.updateHeight(e,t,i,r):s.updateHeight(e,t,i),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};h(Wc,"HeightMapBranch");let ga=Wc;function Pf(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Qt&&(i=n[e+1])instanceof Qt&&n.splice(e-1,3,new Qt(t.length+1+i.length))}h(Pf,"mergeGaps");const Ev=5,Eo=class Eo{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof rt?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new rt(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new Ns(o,r,i)):(o||s||r>=Ev)&&this.addLineDeco(r,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new rt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Qt(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof rt)return e;let t=new rt(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof rt)&&!this.isCovered?this.nodes.push(new rt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof rt&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let s=new Eo(i,e);return de.spans(t,i,r,s,0),s.finish(i)}};h(Eo,"NodeBuilder");let ya=Eo;function Lv(n,e,t){let i=new ba;return de.compare(n,e,t,i,0),i.changes}h(Lv,"heightRelevantDecoChanges");const jc=class jc{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&ra(e,t,this.changes,5)}};h(jc,"DecorationComparator");let ba=jc;function Pv(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,s=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(r.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let d=u.getBoundingClientRect();s=Math.max(s,d.left),o=Math.min(o,d.right),l=Math.max(l,d.top),a=c==n.parentNode?d.bottom:Math.min(a,d.bottom)}c=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}h(Pv,"visiblePixelRange");function Rv(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}h(Rv,"fullPixelRange");const Hc=class Hc{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,t){return $.replace({widget:new va(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}};h(Hc,"LineGap");let Fn=Hc;const zc=class zc extends oi{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}};h(zc,"LineGapWidget");let va=zc;const Gc=class Gc{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Rf,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ae.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(zh).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new pa(t),this.stateDeco=e.facet(dr).filter(i=>typeof i!="function"),this.heightMap=tt.empty().applyChanges(this.stateDeco,te.empty,this.heightOracle.setDoc(e.doc),[new Ot(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=$.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Wi(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?Rf:new wa(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Dn(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(dr).filter(u=>typeof u!="function");let r=e.changedRanges,s=Ot.extendWithRanges(r,Lv(i,this.stateDeco,e?e.changes:it.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let c=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Kp)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?ae.RTL:ae.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0;if(l.width&&l.height){let{scaleX:C,scaleY:k}=wp(t,l);(this.scaleX!=C||this.scaleY!=k)&&(this.scaleX=C,this.scaleY=k,c|=8,o=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,d=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=d)&&(this.paddingTop=f,this.paddingBottom=d,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=Sp(e.scrollDOM);let m=(this.printing?Rv:Pv)(t,this.paddingTop),y=m.top-this.pixelViewport.top,g=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let w=l.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),a){let C=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(C)&&(o=!0),o||r.lineWrapping&&Math.abs(w-this.contentDOMWidth)>r.charWidth){let{lineHeight:k,charWidth:A,textHeight:M}=e.docView.measureTextSize();o=k>0&&r.refresh(s,k,A,M,w/A,C),o&&(e.docView.minWidth=0,c|=8)}y>0&&g>0?u=Math.max(y,g):y<0&&g<0&&(u=Math.min(y,g)),r.heightChanged=!1;for(let k of this.viewports){let A=k.from==this.viewport.from?C:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?tt.empty().applyChanges(this.stateDeco,te.empty,this.heightOracle,[new Ot(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new ma(k.from,A))}r.heightChanged&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Wi(r.lineAt(o-i*1e3,le.ByHeight,s,0,0).from,r.lineAt(l+(1-i)*1e3,le.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=r.lineAt(c,le.ByPos,s,0,0),d;t.y=="center"?d=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<a.from?d=f.top:d=f.bottom-u,a=new Wi(r.lineAt(d-1e3/2,le.ByHeight,s,0,0).from,r.lineAt(d+u+1e3/2,le.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Wi(this.heightMap.lineAt(i,le.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,le.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,le.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,le.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new Fn(t.mapPos(r.from),t.mapPos(r.to),r.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=ae.LTR&&!i)return[];let l=[],a=h((c,u,f,d)=>{if(u-c<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let g of m)if(g>c&&g<u){a(c,g-10,f,d),a(g+10,u,f,d);return}let y=Nv(e,g=>g.from>=f.from&&g.to<=f.to&&Math.abs(g.from-c)<s&&Math.abs(g.to-u)<s&&!m.some(v=>g.from<v&&g.to>v));if(!y){if(u<f.to&&t&&i&&t.visibleRanges.some(g=>g.from<=u&&g.to>=u)){let g=t.moveToLineBoundary(S.cursor(u),!1,!0).head;g>c&&(u=g)}y=new Fn(c,u,this.gapSize(f,c,u,d))}l.push(y)},"addGap");for(let c of this.viewportLines){if(c.length<o)continue;let u=Bv(c.from,c.to,this.stateDeco);if(u.total<o)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,g;if(f!=null){let v=Yr(u,f),w=((this.visibleBottom-this.visibleTop)/2+m)/c.height;y=v-w,g=v+w}else y=(this.visibleTop-c.top-m)/c.height,g=(this.visibleBottom-c.top+m)/c.height;d=Ur(u,y),p=Ur(u,g)}else{let m=u.total*this.heightOracle.charWidth,y=r*this.heightOracle.charWidth,g,v;if(f!=null){let w=Yr(u,f),x=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/m;g=w-x,v=w+x}else g=(this.pixelViewport.left-y)/m,v=(this.pixelViewport.right+y)/m;d=Ur(u,g),p=Ur(u,v)}d>c.from&&a(c.from,d,c,u),p<c.to&&a(p,c.to,c,u)}return l}gapSize(e,t,i,r){let s=Yr(r,i)-Yr(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Fn.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=$.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];de.spans(e,this.viewport.from,this.viewport.to,{span(r,s){t.push({from:r,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=t[s].from||r.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Dn(this.heightMap.lineAt(e,le.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Dn(this.heightMap.lineAt(this.scaler.fromDOM(e),le.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Dn(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}};h(Gc,"ViewState");let Is=Gc;const Kc=class Kc{constructor(e,t){this.from=e,this.to=t}};h(Kc,"Viewport");let Wi=Kc;function Bv(n,e,t){let i=[],r=n,s=0;return de.spans(t,n,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}h(Bv,"lineStructure");function Ur({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(i<=l)return s+i;i-=l}}h(Ur,"findPosition");function Yr(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}h(Yr,"findFraction");function Nv(n,e){for(let t of n)if(e(t))return t}h(Nv,"find");const Rf={toDOM(n){return n},fromDOM(n){return n},scale:1},$c=class $c{constructor(e,t,i){let r=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let c=t.lineAt(l,le.ByPos,e,0,0).top,u=t.lineAt(a,le.ByPos,e,0,0).bottom;return r+=u-c,{from:l,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}};h($c,"BigScaler");let wa=$c;function Dn(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new At(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>Dn(r,e)):n._content)}h(Dn,"scaleBlock");const _r=I.define({combine:n=>n.join(" ")}),xa=I.define({combine:n=>n.indexOf(!0)>-1}),ka=Lt.newName(),am=Lt.newName(),hm=Lt.newName(),cm={"&light":"."+am,"&dark":"."+hm};function Sa(n,e,t){return new Lt(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}h(Sa,"buildTheme");const Iv=Sa("."+ka,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},cm),En="",Zc=class Zc{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(fe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=En}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==t)break;let l=ce.get(r),a=ce.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Bf(r))||Bf(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=ce.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Fv(e,i.node,i.offset)?t:0))}};h(Zc,"DOMReader");let Ca=Zc;function Fv(n,e,t){for(;;){if(!e||t<Ht(e))return!1;if(e==n)return!0;t=ar(e)+1,e=e.parentNode}}h(Fv,"isAtEnd");function Bf(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}h(Bf,"isBlockElement");const Xc=class Xc{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}};h(Xc,"DOMPoint");let Fs=Xc;const Uc=class Uc{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=s||o?[]:jv(e),a=new Ca(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Hv(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!Jl(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Jl(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((N.ios||N.chrome)&&e.state.selection.main.empty&&a!=c&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(a,c),d=Math.max(a,c),p=u.from-f,m=u.to-d;(p==0||p==1||f==0)&&(m==0||m==-1||d==e.state.doc.length)&&(a=0,c=e.state.doc.length)}this.newSel=S.single(c,a)}}};h(Uc,"DOMChange");let Aa=Uc;function um(n,e){let t,{newSel:i}=e,r=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=r.from,c=null;(s===8||N.android&&e.text.length<l-o)&&(a=r.to,c="end");let u=Wv(n.state.doc.sliceString(o,l,En),e.text,a-o,c);u&&(N.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==En+En&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:te.of(e.text.slice(u.from,u.toB).split(En))})}else i&&(!n.hasFocus&&n.state.facet(Yo)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:(N.mac||N.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=S.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:te.of([" "])}):N.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=S.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:te.of([" "])}),t){if(N.ios&&n.inputState.flushIOSKey()||N.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&n.state.sliceDoc(t.from,r.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&tn(n.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&t.insert.length==0||s==8&&t.insert.length<t.to-t.from&&t.to>r.head)&&tn(n.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&tn(n.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let l,a=h(()=>l||(l=Vv(n,t,i)),"defaultInsert");return n.state.facet(Hp).some(c=>c(n,t.from,t.to,o,a))||n.dispatch(a()),!0}else if(i&&!i.main.eq(r)){let o=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}h(um,"applyDOMChange");function Vv(n,e,t){let i,r=n.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=s.from<e.from?r.sliceDoc(s.from,e.from):"",a=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+a))}else{let l=r.changes(e),a=t&&t.main.to<=l.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=n.state.sliceDoc(e.from,e.to),u,f=t&&_p(n,t.main.head);if(f){let m=e.insert.length-(e.to-e.from);u={from:f.from,to:f.to-m}}else u=n.state.doc.lineAt(s.head);let d=s.to-e.to,p=s.to-s.from;i=r.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:l,range:a||m.map(l)};let y=m.to-d,g=y-c.length;if(m.to-m.from!=p||n.state.sliceDoc(g,y)!=c||m.to>=u.from&&m.from<=u.to)return{range:m};let v=r.changes({from:g,to:y,insert:e.insert}),w=m.to-s.to;return{changes:v,range:a?S.range(Math.max(0,a.anchor+w),Math.max(0,a.head+w)):m.map(v)}})}else i={changes:l,selection:a&&r.selection.replaceRange(a)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}h(Vv,"applyDefaultInsert");function Wv(n,e,t,i){let r=Math.min(n.length,e.length),s=0;for(;s<r&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}if(o<s&&n.length<e.length){let a=t<=s&&t>=o?s-t:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=t<=s&&t>=l?s-t:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}h(Wv,"findDiff");function jv(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new Fs(t,i)),(r!=t||s!=i)&&e.push(new Fs(r,s))),e}h(jv,"selectionPoints");function Hv(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?S.single(t+e,i+e):null}h(Hv,"selectionFromPoints");const zv={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ul=N.ie&&N.ie_version<=11,Yc=class Yc{constructor(e){this.view=e,this.active=!1,this.selectionRange=new ql,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(N.ie&&N.ie_version<=11||N.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),ul&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Yo)?i.root.activeElement!=this.dom:!fs(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(N.ie&&N.ie_version<=11||N.android&&N.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Rn(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=N.safari&&e.root.nodeType==11&&Pb(this.dom.ownerDocument)==this.dom&&Gv(this.view)||Es(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=fs(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Fb(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,zv),ul&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ul&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=h(()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&tn(this.dom,s.key,s.keyCode))},"flush");this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&fs(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Aa(this.view,e,t,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=um(this.view,t);return this.view.state==i&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Nf(t,e.previousSibling||e.target.previousSibling,-1),r=Nf(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}};h(Yc,"DOMObserver");let Ma=Yc;function Nf(n,e,t){for(;e;){let i=ce.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}h(Nf,"findChild");function Gv(n){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(h(t,"read"),n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=n.docView.domAtPos(n.state.selection.main.anchor);return Rn(l.node,l.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}h(Gv,"safariSelectionRangeHack");const _n=class _n{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(i=>i.forEach(r=>t(r,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Ib(e.parent)||document,this.viewState=new Is(e.state||fe.create(e)),e.scrollTo&&e.scrollTo.is($r)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Tn).map(i=>new In(i));for(let i of this.plugins)i.update(this);this.observer=new Ma(this),this.inputState=new ua(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Rs(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof Re?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,s=this.state;for(let d of e){if(d.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=d.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(d=>d.annotation(sm))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=om(s,o),a||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(fe.phrases)!=this.state.facet(fe.phrases))return this.setState(s);r=Ps.create(this,s,e),r.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(f&&(f=f.map(d.changes)),d.scrollIntoView){let{main:p}=d.state.selection;f=new Nn(p.empty?p:S.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of d.effects)p.is($r)&&(f=p.value.clip(this.state))}this.viewState.update(r,f),this.bidiCache=Vs.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(On)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(_r)!=r.state.facet(_r)&&(this.viewState.mustMeasureContent=!0),(t||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let d of this.state.facet(aa))try{d(r)}catch(p){qe(this.state,p,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!um(this,u)&&c.force&&tn(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Is(e),this.plugins=e.facet(Tn).map(i=>new In(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Rs(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Tn),i=e.state.facet(Tn);if(t!=i){let r=[];for(let s of i){let o=t.indexOf(s);if(o<0)r.push(new In(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){qe(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(Sp(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(m){return qe(this.state,m),If}}),f=Ps.create(this,this.state,[]),d=!1;f.flags|=a,t?t.flags|=a:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f),d&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=If)try{let m=c[p];m.write&&m.write(u[p],this)}catch(m){qe(this.state,m)}if(d&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(m>1||m<-1){r=r+m,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(aa))l(t)}get themeClasses(){return ka+" "+(this.state.facet(xa)?hm:am)+" "+this.state.facet(_r)}updateAttrs(){let e=Ff(this,$p,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Yo)?"true":"false",class:"cm-content",style:`${N.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Ff(this,zh,t);let i=this.observer.ignore(()=>{let r=na(this.contentDOM,this.contentAttrs,t),s=na(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(_n.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(On);let e=this.state.facet(_n.cspNonce);Lt.mount(this.root,this.styleModules.concat(Iv).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return cl(this,e,xf(this,e,t,i))}moveByGroup(e,t){return cl(this,e,xf(this,e,t,i=>dv(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[t?i.length-1:0];return S.cursor(s.side(t,r)+e.from,s.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return fv(this,e,t,i)}moveVertically(e,t,i){return cl(this,e,pv(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),qp(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Mt.find(s,e-r.from,-1,t)];return Vh(i,o.dir==ae.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Gp)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Kv)return Np(e.length);let t=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||Bp(s.isolates,i=gf(this,e))))return s.order;i||(i=gf(this,e));let r=Yb(e.text,t,i);return this.bidiCache.push(new Vs(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||N.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{xp(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return $r.of(new Nn(typeof e=="number"?S.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return $r.of(new Nn(S.cursor(i.from),"start","start",i.top-e,t,!0))}static domEventHandlers(e){return Ee.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ee.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Lt.newName(),r=[_r.of(i),On.of(Sa(`.${i}`,e))];return t&&t.dark&&r.push(xa.of(!0)),r}static baseTheme(e){return Bi.lowest(On.of(Sa("."+ka,e,cm)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&ce.get(i)||ce.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}};h(_n,"EditorView");let B=_n;B.styleModule=On;B.inputHandler=Hp;B.focusChangeEffect=zp;B.perLineTextDirection=Gp;B.exceptionSink=jp;B.updateListener=aa;B.editable=Yo;B.mouseSelectionStyle=Wp;B.dragMovesSelection=Vp;B.clickAddsSelectionRange=Fp;B.decorations=dr;B.outerDecorations=Zp;B.atomicRanges=Gh;B.bidiIsolatedRanges=Xp;B.scrollMargins=Up;B.darkTheme=xa;B.cspNonce=I.define({combine:n=>n.length?n[0]:""});B.contentAttributes=zh;B.editorAttributes=$p;B.lineWrapping=B.contentAttributes.of({class:"cm-lineWrapping"});B.announce=q.define();const Kv=4096,If={},Lo=class Lo{constructor(e,t,i,r,s,o){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:ae.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!t.touchesRange(o.from,o.to)&&i.push(new Lo(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}};h(Lo,"CachedOrder");let Vs=Lo;function Ff(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(n):s;o&&ia(o,t)}return t}h(Ff,"attrsFromFacet");const $v=N.mac?"mac":N.windows?"win":N.linux?"linux":"key";function Zv(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,s,o,l;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}h(Zv,"normalizeKeyName");function Jr(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}h(Jr,"modifiers");const Xv=Bi.default(B.domEventHandlers({keydown(n,e){return dm(fm(e.state),n,e,"editor")}})),rn=I.define({enables:Xv}),Vf=new WeakMap;function fm(n){let e=n.facet(rn),t=Vf.get(e);return t||Vf.set(e,t=_v(e.reduce((i,r)=>i.concat(r),[]))),t}h(fm,"getKeymap");function Uv(n,e,t){return dm(fm(n.state),e,n,t)}h(Uv,"runScopeHandlers");let Yt=null;const Yv=4e3;function _v(n,e=$v){let t=Object.create(null),i=Object.create(null),r=h((o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},"checkPrefix"),s=h((o,l,a,c,u)=>{var f,d;let p=t[o]||(t[o]=Object.create(null)),m=l.split(/ (?!$)/).map(v=>Zv(v,e));for(let v=1;v<m.length;v++){let w=m.slice(0,v).join(" ");r(w,!0),p[w]||(p[w]={preventDefault:!0,stopPropagation:!1,run:[x=>{let C=Yt={view:x,prefix:w,scope:o};return setTimeout(()=>{Yt==C&&(Yt=null)},Yv),!0}]})}let y=m.join(" ");r(y,!1);let g=p[y]||(p[y]={preventDefault:!1,stopPropagation:!1,run:((d=(f=p._any)===null||f===void 0?void 0:f.run)===null||d===void 0?void 0:d.slice())||[]});a&&g.run.push(a),c&&(g.preventDefault=!0),u&&(g.stopPropagation=!0)},"add");for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let f in u)u[f].run.push(o.any)}let a=o[e]||o.key;if(a)for(let c of l)s(c,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}h(_v,"buildKeymap");function dm(n,e,t,i){let r=Lb(e),s=Ce(r,0),o=ot(s)==r.length&&r!=" ",l="",a=!1,c=!1,u=!1;Yt&&Yt.view==t&&Yt.scope==i&&(l=Yt.prefix+" ",em.indexOf(e.keyCode)<0&&(c=!0,Yt=null));let f=new Set,d=h(g=>{if(g){for(let v of g.run)if(!f.has(v)&&(f.add(v),v(t,e)))return g.stopPropagation&&(u=!0),!0;g.preventDefault&&(g.stopPropagation&&(u=!0),c=!0)}return!1},"runFor"),p=n[i],m,y;return p&&(d(p[l+Jr(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(N.windows&&e.ctrlKey&&e.altKey)&&(m=ni[e.keyCode])&&m!=r?(d(p[l+Jr(m,e,!0)])||e.shiftKey&&(y=or[e.keyCode])!=r&&y!=m&&d(p[l+Jr(y,e,!1)]))&&(a=!0):o&&e.shiftKey&&d(p[l+Jr(r,e,!0)])&&(a=!0),!a&&d(p._any)&&(a=!0)),c&&(a=!0),a&&u&&e.stopPropagation(),a}h(dm,"runHandlers");const Po=class Po{constructor(e,t,i,r,s){this.className=e,this.left=t,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=pm(e);return[new Po(t,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Jv(e,t,i)}};h(Po,"RectangleMarker");let pr=Po;function pm(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==ae.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}h(pm,"getBase");function Wf(n,e,t){let i=S.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:je.Text}}h(Wf,"wrappedLine");function Jv(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),s=n.textDirection==ae.LTR,o=n.contentDOM,l=o.getBoundingClientRect(),a=pm(n),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),f=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=l.right-(u?parseInt(u.paddingRight):0),p=ca(n,i),m=ca(n,r),y=p.type==je.Text?p:null,g=m.type==je.Text?m:null;if(y&&(n.lineWrapping||p.widgetLineBreaks)&&(y=Wf(n,i,y)),g&&(n.lineWrapping||m.widgetLineBreaks)&&(g=Wf(n,r,g)),y&&g&&y.from==g.from)return w(x(t.from,t.to,y));{let k=y?x(t.from,null,y):C(p,!1),A=g?x(null,t.to,g):C(m,!0),M=[];return(y||p).to<(g||m).from-(y&&g?1:0)||p.widgetLineBreaks>1&&k.bottom+n.defaultLineHeight/2<A.top?M.push(v(f,k.bottom,d,A.top)):k.bottom<A.top&&n.elementAtHeight((k.bottom+A.top)/2).type==je.Text&&(k.bottom=A.top=(k.bottom+A.top)/2),w(k).concat(M).concat(w(A))}function v(k,A,M,W){return new pr(e,k-a.left,A-a.top-.01,M-k,W-A+.01)}h(v,"piece");function w({top:k,bottom:A,horizontal:M}){let W=[];for(let X=0;X<M.length;X+=2)W.push(v(M[X],k,M[X+1],A));return W}h(w,"pieces");function x(k,A,M){let W=1e9,X=-1e9,R=[];function F(_,Q,re,se,be){let xe=n.coordsAtPos(_,_==M.to?-2:2),he=n.coordsAtPos(re,re==M.from?2:-2);!xe||!he||(W=Math.min(xe.top,he.top,W),X=Math.max(xe.bottom,he.bottom,X),be==ae.LTR?R.push(s&&Q?f:xe.left,s&&se?d:he.right):R.push(!s&&se?f:he.left,!s&&Q?d:xe.right))}h(F,"addSpan");let V=k??M.from,Y=A??M.to;for(let _ of n.visibleRanges)if(_.to>V&&_.from<Y)for(let Q=Math.max(_.from,V),re=Math.min(_.to,Y);;){let se=n.state.doc.lineAt(Q);for(let be of n.bidiSpans(se)){let xe=be.from+se.from,he=be.to+se.from;if(xe>=re)break;he>Q&&F(Math.max(xe,Q),k==null&&xe<=V,Math.min(he,re),A==null&&he>=Y,be.dir)}if(Q=se.to+1,Q>=re)break}return R.length==0&&F(V,k==null,Y,A==null,n.textDirection),{top:W,bottom:X,horizontal:R}}h(x,"drawForLine");function C(k,A){let M=l.top+(A?k.top:k.bottom);return{top:M,bottom:M,horizontal:[]}}h(C,"drawForWidget")}h(Jv,"rectanglesForRange");function qv(n,e){return n.constructor==e.constructor&&n.eq(e)}h(qv,"sameMarker");const _c=class _c{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ms)!=e.state.facet(ms)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(ms);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!qv(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}};h(_c,"LayerView");let Ta=_c;const ms=I.define();function mm(n){return[Ee.define(e=>new Ta(e,n)),ms.of(n)]}h(mm,"layer");const gm=!N.ios,mr=I.define({combine(n){return Kt(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Qv(n={}){return[mr.of(n),e1,t1,i1,Kp.of(!0)]}h(Qv,"drawSelection");function ym(n){return n.startState.facet(mr)!=n.state.facet(mr)}h(ym,"configChanged");const e1=mm({above:!0,markers(n){let{state:e}=n,t=e.facet(mr),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||gm:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:S.cursor(r.head,r.head>r.anchor?-1:1);for(let a of pr.forRange(n,o,l))i.push(a)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=ym(n);return t&&jf(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){jf(e.state,n)},class:"cm-cursorLayer"});function jf(n,e){e.style.animationDuration=n.facet(mr).cursorBlinkRate+"ms"}h(jf,"setBlinkRate");const t1=mm({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:pr.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||ym(n)},class:"cm-selectionLayer"}),Oa={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};gm&&(Oa[".cm-line"].caretColor="transparent !important",Oa[".cm-content"]={caretColor:"transparent !important"});const i1=Bi.highest(B.theme(Oa)),bm=q.define({map(n,e){return n==null?null:e.mapPos(n)}}),Ln=Be.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(bm)?i.value:t,n)}}),n1=Ee.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Ln);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Ln)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Ln),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Ln)!=n&&this.view.dispatch({effects:bm.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function r1(){return[Ln,n1]}h(r1,"dropCursor");function Hf(n,e,t,i,r){e.lastIndex=0;for(let s=n.iterRange(t,i),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}h(Hf,"iterMatches");function s1(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:s}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}h(s1,"matchRanges");const Jc=class Jc{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(l,a,c,u)=>r(u,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,u)=>{let f=i(l,a,c);f&&u(c,c+l[0].length,f)};else if(i)this.addMatch=(l,a,c,u)=>u(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new Ei,i=t.add.bind(t);for(let{from:r,to:s}of s1(e,this.maxLength))Hf(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(a,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,r);if(l>o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(s.from,a.from),f=Math.min(s.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){f=l;break}}let d=[],p,m=h((y,g,v)=>d.push(v.range(y,g)),"add");if(a==c)for(this.regexp.lastIndex=u-a.from;(p=this.regexp.exec(a.text))&&p.index<f-a.from;)this.addMatch(p,e,p.index+a.from,m);else Hf(e.state.doc,this.regexp,u,f,(y,g)=>this.addMatch(g,e,y,m));t=t.update({filterFrom:u,filterTo:f,filter:(y,g)=>y<u||g>f,add:d})}}return t}};h(Jc,"MatchDecorator");let Da=Jc;const Ea=/x/.unicode!=null?"gu":"g",o1=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Ea),l1={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let fl=null;function a1(){var n;if(fl==null&&typeof document<"u"&&document.body){let e=document.body.style;fl=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return fl||!1}h(a1,"supportsTabSize");const gs=I.define({combine(n){let e=Kt(n,{render:null,specialChars:o1,addSpecialChars:null});return(e.replaceTabs=!a1())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Ea)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Ea)),e}});function h1(n={}){return[gs.of(n),c1()]}h(h1,"highlightSpecialChars");let zf=null;function c1(){return zf||(zf=Ee.fromClass(class{constructor(n){this.view=n,this.decorations=$.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(gs)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new Da({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,s=Ce(e[0],0);if(s==9){let o=r.lineAt(i),l=t.state.tabSize,a=gn(o.text,l,i-o.from);return $.replace({widget:new Pa((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=$.replace({widget:new La(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(gs);n.startState.facet(gs)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}h(c1,"specialCharPlugin");const u1="";function f1(n){return n>=32?u1:n==10?"":String.fromCharCode(9216+n)}h(f1,"placeholder$1");const qc=class qc extends oi{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=f1(this.code),i=e.state.phrase("Control character")+" "+(l1[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let s=document.createElement("span");return s.textContent=t,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}};h(qc,"SpecialCharWidget");let La=qc;const Qc=class Qc extends oi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};h(Qc,"TabWidget");let Pa=Qc;function d1(){return m1}h(d1,"highlightActiveLine");const p1=$.line({class:"cm-activeLine"}),m1=Ee.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(p1.range(r.from)),e=r.from)}return $.set(t)}},{decorations:n=>n.decorations}),Ra=2e3;function g1(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),s=[];if(e.off>Ra||t.off>Ra||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=r;a++){let c=n.doc.line(a);c.length<=l&&s.push(S.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=r;a++){let c=n.doc.line(a),u=Xl(c.text,o,n.tabSize,!0);if(u<0)s.push(S.cursor(c.to));else{let f=Xl(c.text,l,n.tabSize);s.push(S.range(c.from+u,c.from+f))}}}return s}h(g1,"rectangleFor");function y1(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}h(y1,"absoluteColumn");function Gf(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,s=r>Ra?-1:r==i.length?y1(n,e.clientX):gn(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:s,off:r}}h(Gf,"getPos");function b1(n,e){let t=Gf(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(t.line).from),o=r.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(r.changes)}},get(r,s,o){let l=Gf(n,r);if(!l)return i;let a=g1(n.state,t,l);return a.length?o?S.create(a.concat(i.ranges)):S.create(a):i}}:null}h(b1,"rectangleSelectionStyle");function v1(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return B.mouseSelectionStyle.of((t,i)=>e(i)?b1(t,i):null)}h(v1,"rectangularSelection");const kn="-10000px",eu=class eu{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,t){var i;let r=e.state.facet(this.facet),s=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<s.length;a++){let c=s[a],u=-1;if(c){for(let f=0;f<this.tooltips.length;f++){let d=this.tooltips[f];d&&d.create==c.create&&(u=f)}if(u<0)o[a]=this.createTooltipView(c,a?o[a-1]:null),l&&(l[a]=!!c.above);else{let f=o[a]=this.tooltipViews[u];l&&(l[a]=t[u]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,c)=>t[c]=a),t.length=l.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}};h(eu,"TooltipViewManager");let Ws=eu;function w1(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}h(w1,"windowSpace");const dl=I.define({combine:n=>{var e,t,i;return{position:N.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||w1}}}),Kf=new WeakMap,Kh=Ee.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(dl);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Ws(n,$h,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(dl);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.insertBefore(r,i)}return t.dom.style.position=this.position,t.dom.style.top=kn,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(N.gecko)i=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==kn&&r.style.left=="0px"){let s=r.getBoundingClientRect();i=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(i||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,t=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((r,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(dl).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:i,scaleX:r,scaleY:s}=n,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:u}=c,f=n.pos[l],d=n.size[l];if(!f||f.bottom<=Math.max(t.top,i.top)||f.top>=Math.min(t.bottom,i.bottom)||f.right<Math.max(t.left,i.left)-.1||f.left>Math.min(t.right,i.right)+.1){u.style.top=kn;continue}let p=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,m=p?7:0,y=d.right-d.left,g=(e=Kf.get(c))!==null&&e!==void 0?e:d.bottom-d.top,v=c.offset||k1,w=this.view.textDirection==ae.LTR,x=d.width>i.right-i.left?w?i.left:i.right-d.width:w?Math.min(f.left-(p?14:0)+v.x,i.right-y):Math.max(i.left,f.left-y+(p?14:0)-v.x),C=this.above[l];!a.strictSide&&(C?f.top-(d.bottom-d.top)-v.y<i.top:f.bottom+(d.bottom-d.top)+v.y>i.bottom)&&C==i.bottom-f.bottom>f.top-i.top&&(C=this.above[l]=!C);let k=(C?f.top-i.top:i.bottom-f.bottom)-m;if(k<g&&c.resize!==!1){if(k<this.view.defaultLineHeight){u.style.top=kn;continue}Kf.set(c,g),u.style.height=(g=k)/s+"px"}else u.style.height&&(u.style.height="");let A=C?f.top-g-m-v.y:f.bottom+m+v.y,M=x+y;if(c.overlap!==!0)for(let W of o)W.left<M&&W.right>x&&W.top<A+g&&W.bottom>A&&(A=C?W.top-g-2-m:W.bottom+m+2);if(this.position=="absolute"?(u.style.top=(A-n.parent.top)/s+"px",u.style.left=(x-n.parent.left)/r+"px"):(u.style.top=A/s+"px",u.style.left=x/r+"px"),p){let W=f.left+(w?v.x:-v.x)-(x+14-7);p.style.left=W/r+"px"}c.overlap!==!0&&o.push({left:x,top:A,right:M,bottom:A+g}),u.classList.toggle("cm-tooltip-above",C),u.classList.toggle("cm-tooltip-below",!C),c.positioned&&c.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=kn}},{eventObservers:{scroll(){this.maybeMeasure()}}}),x1=B.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),k1={x:0,y:0},$h=I.define({enables:[Kh,x1]}),js=I.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])}),Ro=class Ro{static create(e){return new Ro(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ws(e,js,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}};h(Ro,"HoverTooltipHost");let Hs=Ro;const S1=$h.compute([js],n=>{let e=n.facet(js);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:Hs.create,above:e[0].above,arrow:e.some(t=>t.arrow)}}),tu=class tu{constructor(e,t,i,r,s){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,s=1;if(i instanceof hr)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let l=e.coordsAtPos(r);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=a&&a.dir==ae.RTL?-1:1;s=t.x<l.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let l=this.pending={pos:r};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>qe(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Kh),t=e?e.manager.tooltips.findIndex(i=>i.create==Hs.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!C1(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,l=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!A1(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=h(i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})},"watch");e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}};h(tu,"HoverPlugin");let Ba=tu;const qr=4;function C1(n,e){let t=n.getBoundingClientRect();return e.clientX>=t.left-qr&&e.clientX<=t.right+qr&&e.clientY>=t.top-qr&&e.clientY<=t.bottom+qr}h(C1,"isInTooltip");function A1(n,e,t,i,r,s){let o=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,l)<r)return!1;let a=n.posAtCoords({x:i,y:r},!1);return a>=e&&a<=t}h(A1,"isOverRange");function M1(n,e={}){let t=q.define(),i=Be.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of r){let a=s.changes.mapPos(l.pos,-1,Ve.TrackDel);if(a!=null){let c=Object.assign(Object.create(null),l);c.pos=a,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(t)&&(r=o.value),o.is(T1)&&(r=[]);return r},provide:r=>js.from(r)});return[i,Ee.define(r=>new Ba(r,n,i,t,e.hoverTime||300)),S1]}h(M1,"hoverTooltip");function vm(n,e){let t=n.plugin(Kh);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}h(vm,"getTooltip");const T1=q.define(),$f=I.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function gr(n,e){let t=n.plugin(wm),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}h(gr,"getPanel");const wm=Ee.fromClass(class{constructor(n){this.input=n.state.facet(yr),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet($f);this.top=new ji(n,!0,e.topContainer),this.bottom=new ji(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet($f);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ji(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ji(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(yr);if(t!=this.input){let i=t.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of i){let c=this.specs.indexOf(a),u;c<0?(u=a(n.view),l.push(u)):(u=this.panels[c],u.update&&u.update(n)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>B.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})}),iu=class iu{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Zf(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Zf(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};h(iu,"PanelGroup");let ji=iu;function Zf(n){let e=n.nextSibling;return n.remove(),e}h(Zf,"rm");const yr=I.define({enables:wm}),nu=class nu extends jt{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};h(nu,"GutterMarker");let Pt=nu;Pt.prototype.elementClass="";Pt.prototype.toDOM=void 0;Pt.prototype.mapMode=Ve.TrackBefore;Pt.prototype.startSide=Pt.prototype.endSide=-1;Pt.prototype.point=!0;const ys=I.define(),bs=I.define(),Na=I.define({combine:n=>n.some(e=>e)});function O1(n){let e=[D1];return n&&n.fixed===!1&&e.push(Na.of(!0)),e}h(O1,"gutters");const D1=Ee.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(bs).map(e=>new zs(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Na),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Na)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=de.iter(this.view.state.facet(ys),this.view.viewport.from),i=[],r=this.gutters.map(s=>new Fa(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==je.Text&&o){Ia(t,i,l.from);for(let a of r)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(s.type==je.Text){Ia(t,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(bs),t=n.state.facet(bs),i=n.docChanged||n.heightChanged||n.viewportChanged||!de.eq(n.startState.facet(ys),n.state.facet(ys),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let s of t){let o=e.indexOf(s);o<0?r.push(new zs(this.view,s)):(this.gutters[o].update(n),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>B.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==ae.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function Xf(n){return Array.isArray(n)?n:[n]}h(Xf,"asArray");function Ia(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}h(Ia,"advanceCursor");const ru=class ru{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=de.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let l=new Gs(e,o,s,i);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,o,s,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];Ia(this.cursor,r,t.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,t,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t);i&&this.addElement(e,t,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}};h(ru,"UpdateContext");let Fa=ru;const su=class su{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=Xf(t.markers(e)),t.initialSpacer&&(this.spacer=new Gs(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Xf(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!de.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}};h(su,"SingleGutterView");let zs=su;const ou=class ou{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),E1(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,c=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,c=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let f=r.nextSibling;r.remove(),r=f}}if(!a)break;a.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}};h(ou,"GutterElement");let Gs=ou;function E1(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}h(E1,"sameMarkers");const L1=I.define(),Hi=I.define({combine(n){return Kt(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let s=i[r],o=t[r];i[r]=s?(l,a,c)=>s(l,a,c)||o(l,a,c):o}return i}})}}),lu=class lu extends Pt{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};h(lu,"NumberMarker");let Vn=lu;function pl(n,e){return n.state.facet(Hi).formatNumber(e,n.state)}h(pl,"formatNumber");const P1=bs.compute([Hi],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(L1)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new Vn(pl(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Hi)!=e.state.facet(Hi),initialSpacer(e){return new Vn(pl(e,Uf(e.state.doc.lines)))},updateSpacer(e,t){let i=pl(t.view,Uf(t.view.state.doc.lines));return i==e.number?e:new Vn(i)},domEventHandlers:n.facet(Hi).domEventHandlers}));function R1(n={}){return[Hi.of(n),O1(),P1]}h(R1,"lineNumbers");function Uf(n){let e=9;for(;e<n;)e=e*10+9;return e}h(Uf,"maxLineNumber");const B1=new class extends Pt{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},N1=ys.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(B1.range(r)))}return de.of(e)});function I1(){return N1}h(I1,"highlightActiveLineGutter");const F1=1024;let V1=0;const au=class au{constructor(e,t){this.from=e,this.to=t}};h(au,"Range");let Wn=au;const hu=class hu{constructor(e={}){this.id=V1++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ge.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}};h(hu,"NodeProp");let J=hu;J.closedBy=new J({deserialize:n=>n.split(" ")});J.openedBy=new J({deserialize:n=>n.split(" ")});J.group=new J({deserialize:n=>n.split(" ")});J.isolate=new J({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});J.contextHash=new J({perNode:!0});J.lookAhead=new J({perNode:!0});J.mounted=new J({perNode:!0});const cu=class cu{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[J.mounted.id]}};h(cu,"MountedTree");let an=cu;const W1=Object.create(null),Bo=class Bo{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):W1,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Bo(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(J.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(J.group),s=-1;s<(r?r.length:0);s++){let o=t[s<0?i.name:r[s]];if(o)return o}}}};h(Bo,"NodeType");let Ge=Bo;Ge.none=new Ge("",Object.create(null),0,8);const No=class No{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}t.push(r?new Ge(i.name,r,i.id,i.flags):i)}return new No(t)}};h(No,"NodeSet");let Va=No;const Qr=new WeakMap,Yf=new WeakMap;var Me;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Me||(Me={}));const Jn=class Jn{constructor(e,t,i,r,s){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=an.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new wr(this.topNode,e)}cursorAt(e,t=0,i=0){let r=Qr.get(this)||this.topNode,s=new wr(r);return s.moveTo(e,t),Qr.set(this,s._tree),s}get topNode(){return new Rt(this,0,0,null)}resolve(e,t=0){let i=br(Qr.get(this)||this.topNode,e,t,!1);return Qr.set(this,i),i}resolveInner(e,t=0){let i=br(Yf.get(this)||this.topNode,e,t,!0);return Yf.set(this,i),i}resolveStack(e,t=0){return j1(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,l=(o&Me.IncludeAnonymous)>0;for(let a=this.cursor(o|Me.IncludeAnonymous);;){let c=!1;if(a.from<=s&&a.to>=r&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Xh(Ge.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new Jn(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new Jn(Ge.none,t,i,r)))}static build(e){return H1(e)}};h(Jn,"Tree");let pe=Jn;pe.empty=new pe(Ge.none,[],[],0);const Io=class Io{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Io(this.buffer,this.index)}};h(Io,"FlatBufferCursor");let Wa=Io;const Fo=class Fo{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ge.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(xm(s,r,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let r=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=r[l++],s[a++]=r[l++]-i;let c=s[a++]=r[l++]-i;s[a++]=r[l++]-e,o=Math.max(o,c)}return new Fo(s,o,this.set)}};h(Fo,"TreeBuffer");let ai=Fo;function xm(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}h(xm,"checkSide");function br(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!i&&n instanceof Rt&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=i?0:Me.IgnoreOverlays;if(i)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof Rt&&o.index<0&&((r=l.enter(e,t,s))===null||r===void 0?void 0:r.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}h(br,"resolveNode");const uu=class uu{cursor(e=0){return new wr(this,e)}getChild(e,t=null,i=null){let r=_f(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return _f(this,e,t,i)}resolve(e,t=0){return br(this,e,t,!1)}resolveInner(e,t=0){return br(this,e,t,!0)}matchContext(e){return ja(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}};h(uu,"BaseNode");let Ks=uu;const Ui=class Ui extends Ks{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let u=l[e],f=a[e]+o.from;if(xm(r,i,f,f+u.length)){if(u instanceof ai){if(s&Me.ExcludeBuffers)continue;let d=u.findChild(0,u.buffer.length,t,i-f,r);if(d>-1)return new vr(new Ha(o,u,e,f),null,d)}else if(s&Me.IncludeAnonymous||!u.type.isAnonymous||Zh(u)){let d;if(!(s&Me.IgnoreMounts)&&(d=an.get(u))&&!d.overlay)return new Ui(d.tree,f,e,o);let p=new Ui(u,f,e,o);return s&Me.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,i,r)}}}if(s&Me.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Me.IgnoreOverlays)&&(r=an.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Ui(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};h(Ui,"TreeNode");let Rt=Ui;function _f(n,e,t,i){let r=n.cursor(),s=[];if(!r.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}h(_f,"getChildren");function ja(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}h(ja,"matchNodeContext");const fu=class fu{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}};h(fu,"BufferContext");let Ha=fu;const vi=class vi extends Ks{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new vi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Me.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new vi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new vi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new vi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),t.push(0)}return new pe(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};h(vi,"BufferNode");let vr=vi;function km(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let i=t instanceof Rt&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new za(r,t)}h(km,"iterStack");const du=class du{constructor(e,t){this.heads=e,this.node=t}get next(){return km(this.heads)}};h(du,"StackIterator");let za=du;function j1(n,e,t){let i=n.resolveInner(e,t),r=null;for(let s=i instanceof Rt?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,t)),s=o}else{let o=an.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Rt(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(br(l,e,t,!1))}}return r?km(r):i}h(j1,"stackIterator");const pu=class pu{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Rt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Rt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Me.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Me.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Me.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Me.IncludeAnonymous||l instanceof ai||!l.type.isAnonymous||Zh(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)t=new vr(this.buffer,t,this.stack[r]);return this.bufferNode=new vr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return ja(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return ja(this.node,e,r);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}};h(pu,"TreeCursor");let wr=pu;function Zh(n){return n.children.some(e=>e instanceof ai||!e.type.isAnonymous||Zh(e))}h(Zh,"hasChild");function H1(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=F1,reused:s=[],minRepeatType:o=i.types.length}=n,l=Array.isArray(t)?new Wa(t,t.length):t,a=i.types,c=0,u=0;function f(k,A,M,W,X,R){let{id:F,start:V,end:Y,size:_}=l,Q=u;for(;_<0;)if(l.next(),_==-1){let he=s[F];M.push(he),W.push(V-k);return}else if(_==-3){c=F;return}else if(_==-4){u=F;return}else throw new RangeError(`Unrecognized record size: ${_}`);let re=a[F],se,be,xe=V-k;if(Y-V<=r&&(be=g(l.pos-A,X))){let he=new Uint16Array(be.size-be.skip),D=l.pos-be.size,T=he.length;for(;l.pos>D;)T=v(be.start,he,T);se=new ai(he,Y-be.start,i),xe=be.start-k}else{let he=l.pos-_;l.next();let D=[],T=[],P=F>=o?F:-1,j=0,K=Y;for(;l.pos>he;)P>=0&&l.id==P&&l.size>=0?(l.end<=K-r&&(m(D,T,V,j,l.end,K,P,Q),j=D.length,K=l.end),l.next()):R>2500?d(V,he,D,T):f(V,he,D,T,P,R+1);if(P>=0&&j>0&&j<D.length&&m(D,T,V,j,V,K,P,Q),D.reverse(),T.reverse(),P>-1&&j>0){let U=p(re);se=Xh(re,D,T,0,D.length,0,Y-V,U,U)}else se=y(re,D,T,Y-V,Q-Y)}M.push(se),W.push(xe)}h(f,"takeNode");function d(k,A,M,W){let X=[],R=0,F=-1;for(;l.pos>A;){let{id:V,start:Y,end:_,size:Q}=l;if(Q>4)l.next();else{if(F>-1&&Y<F)break;F<0&&(F=_-r),X.push(V,Y,_),R++,l.next()}}if(R){let V=new Uint16Array(R*4),Y=X[X.length-2];for(let _=X.length-3,Q=0;_>=0;_-=3)V[Q++]=X[_],V[Q++]=X[_+1]-Y,V[Q++]=X[_+2]-Y,V[Q++]=Q;M.push(new ai(V,X[2]-Y,i)),W.push(Y-k)}}h(d,"takeFlatNode");function p(k){return(A,M,W)=>{let X=0,R=A.length-1,F,V;if(R>=0&&(F=A[R])instanceof pe){if(!R&&F.type==k&&F.length==W)return F;(V=F.prop(J.lookAhead))&&(X=M[R]+F.length+V)}return y(k,A,M,W,X)}}h(p,"makeBalanced");function m(k,A,M,W,X,R,F,V){let Y=[],_=[];for(;k.length>W;)Y.push(k.pop()),_.push(A.pop()+M-X);k.push(y(i.types[F],Y,_,R-X,V-R)),A.push(X-M)}h(m,"makeRepeatLeaf");function y(k,A,M,W,X=0,R){if(c){let F=[J.contextHash,c];R=R?[F].concat(R):[F]}if(X>25){let F=[J.lookAhead,X];R=R?[F].concat(R):[F]}return new pe(k,A,M,W,R)}h(y,"makeTree");function g(k,A){let M=l.fork(),W=0,X=0,R=0,F=M.end-r,V={size:0,start:0,skip:0};e:for(let Y=M.pos-k;M.pos>Y;){let _=M.size;if(M.id==A&&_>=0){V.size=W,V.start=X,V.skip=R,R+=4,W+=4,M.next();continue}let Q=M.pos-_;if(_<0||Q<Y||M.start<F)break;let re=M.id>=o?4:0,se=M.start;for(M.next();M.pos>Q;){if(M.size<0)if(M.size==-3)re+=4;else break e;else M.id>=o&&(re+=4);M.next()}X=se,W+=_,R+=re}return(A<0||W==k)&&(V.size=W,V.start=X,V.skip=R),V.size>4?V:void 0}h(g,"findBufferSize");function v(k,A,M){let{id:W,start:X,end:R,size:F}=l;if(l.next(),F>=0&&W<o){let V=M;if(F>4){let Y=l.pos-(F-4);for(;l.pos>Y;)M=v(k,A,M)}A[--M]=V,A[--M]=R-k,A[--M]=X-k,A[--M]=W}else F==-3?c=W:F==-4&&(u=W);return M}h(v,"copyToBuffer");let w=[],x=[];for(;l.pos>0;)f(n.start||0,n.bufferStart||0,w,x,-1,0);let C=(e=n.length)!==null&&e!==void 0?e:w.length?x[0]+w[0].length:0;return new pe(a[n.topID],w.reverse(),x.reverse(),C)}h(H1,"buildTree");const Jf=new WeakMap;function vs(n,e){if(!n.isAnonymous||e instanceof ai||e.type!=n)return 1;let t=Jf.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof pe)){t=1;break}t+=vs(n,i)}Jf.set(e,t)}return t}h(vs,"nodeSize");function Xh(n,e,t,i,r,s,o,l,a){let c=0;for(let m=i;m<r;m++)c+=vs(n,e[m]);let u=Math.ceil(c*1.5/8),f=[],d=[];function p(m,y,g,v,w){for(let x=g;x<v;){let C=x,k=y[x],A=vs(n,m[x]);for(x++;x<v;x++){let M=vs(n,m[x]);if(A+M>=u)break;A+=M}if(x==C+1){if(A>u){let M=m[C];p(M.children,M.positions,0,M.children.length,y[C]+w);continue}f.push(m[C])}else{let M=y[x-1]+m[x-1].length-k;f.push(Xh(n,m,y,C,x,k,M,null,a))}d.push(k+w-s)}}return h(p,"divide"),p(e,t,i,r,0),(l||a)(f,d,o)}h(Xh,"balanceRange");const qn=class qn{constructor(e,t,i,r,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new qn(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let d=o;if(a>=d.from||f<=d.to||c){let p=Math.max(d.from,a)-c,m=Math.min(d.to,f)-c;d=p>=m?null:new qn(p,m,d.tree,d.offset+c,l>0,!!u)}if(d&&r.push(d),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return r}};h(qn,"TreeFragment");let sn=qn;const mu=class mu{startParse(e,t,i){return typeof e=="string"&&(e=new Ga(e)),i=i?i.length?i.map(r=>new Wn(r.from,r.to)):[new Wn(0,0)]:[new Wn(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let s=r.advance();if(s)return s}}};h(mu,"Parser");let $s=mu;const gu=class gu{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};h(gu,"StringInput");let Ga=gu;new J({perNode:!0});let z1=0;const Vo=class Vo{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=z1++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Vo([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Zs;return t=>t.modified.indexOf(e)>-1?t:Zs.get(t.base||t,t.modified.concat(e).sort((i,r)=>i.id-r.id))}};h(Vo,"Tag");let Ct=Vo,G1=0;const Wo=class Wo{constructor(){this.instances=[],this.id=G1++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&K1(t,l.modified));if(i)return i;let r=[],s=new Ct(r,e,t);for(let l of t)l.instances.push(s);let o=$1(t);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(Wo.get(l,a));return s}};h(Wo,"Modifier");let Zs=Wo;function K1(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}h(K1,"sameArray");function $1(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}h($1,"powerSet");function Z1(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let s=[],o=2,l=r;for(let f=0;;){if(l=="..."&&f>0&&f+3==r.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!d)throw new RangeError("Invalid path: "+r);if(s.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==r.length)break;let p=r[f++];if(f==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);l=r.slice(f)}let a=s.length-1,c=s[a];if(!c)throw new RangeError("Invalid path: "+r);let u=new hn(i,o,a>0?s.slice(0,a):null);e[c]=u.sort(e[c])}}return Sm.add(e)}h(Z1,"styleTags");const Sm=new J,yu=class yu{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};h(yu,"Rule");let hn=yu;hn.empty=new hn([],2,null);function Cm(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}h(Cm,"tagHighlighter");function X1(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}h(X1,"highlightTags");function U1(n,e,t,i=0,r=n.length){let s=new Ka(i,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),i,r,"",s.highlighters),s.flush(r)}h(U1,"highlightTree");const bu=class bu{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=Y1(e)||hn.empty,f=X1(s,u.tags);if(f&&(c&&(c+=" "),c+=f,u.mode==1&&(r+=(r?" ":"")+f)),this.startSpan(Math.max(t,l),c),u.opaque)return;let d=e.tree&&e.tree.prop(J.mounted);if(d&&d.overlay){let p=e.node.enter(d.overlay[0].from+l,1),m=this.highlighters.filter(g=>!g.scope||g.scope(d.tree.type)),y=e.firstChild();for(let g=0,v=l;;g++){let w=g<d.overlay.length?d.overlay[g]:null,x=w?w.from+l:a,C=Math.max(t,v),k=Math.min(i,x);if(C<k&&y)for(;e.from<k&&(this.highlightRange(e,C,k,r,s),this.startSpan(Math.min(k,e.to),c),!(e.to>=x||!e.nextSibling())););if(!w||x>i)break;v=w.to+l,v>t&&(this.highlightRange(p.cursor(),Math.max(t,w.from+l),Math.min(i,v),"",m),this.startSpan(Math.min(i,v),c))}y&&e.parent()}else if(e.firstChild()){d&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}};h(bu,"HighlightBuilder");let Ka=bu;function Y1(n){let e=n.type.prop(Sm);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}h(Y1,"getStyleTags");const O=Ct.define,es=O(),$t=O(),qf=O($t),Qf=O($t),Zt=O(),ts=O(Zt),ml=O(Zt),kt=O(),fi=O(kt),wt=O(),xt=O(),$a=O(),Sn=O($a),is=O(),b={comment:es,lineComment:O(es),blockComment:O(es),docComment:O(es),name:$t,variableName:O($t),typeName:qf,tagName:O(qf),propertyName:Qf,attributeName:O(Qf),className:O($t),labelName:O($t),namespace:O($t),macroName:O($t),literal:Zt,string:ts,docString:O(ts),character:O(ts),attributeValue:O(ts),number:ml,integer:O(ml),float:O(ml),bool:O(Zt),regexp:O(Zt),escape:O(Zt),color:O(Zt),url:O(Zt),keyword:wt,self:O(wt),null:O(wt),atom:O(wt),unit:O(wt),modifier:O(wt),operatorKeyword:O(wt),controlKeyword:O(wt),definitionKeyword:O(wt),moduleKeyword:O(wt),operator:xt,derefOperator:O(xt),arithmeticOperator:O(xt),logicOperator:O(xt),bitwiseOperator:O(xt),compareOperator:O(xt),updateOperator:O(xt),definitionOperator:O(xt),typeOperator:O(xt),controlOperator:O(xt),punctuation:$a,separator:O($a),bracket:Sn,angleBracket:O(Sn),squareBracket:O(Sn),paren:O(Sn),brace:O(Sn),content:kt,heading:fi,heading1:O(fi),heading2:O(fi),heading3:O(fi),heading4:O(fi),heading5:O(fi),heading6:O(fi),contentSeparator:O(kt),list:O(kt),quote:O(kt),emphasis:O(kt),strong:O(kt),link:O(kt),monospace:O(kt),strikethrough:O(kt),inserted:O(),deleted:O(),changed:O(),invalid:O(),meta:is,documentMeta:O(is),annotation:O(is),processingInstruction:O(is),definition:Ct.defineModifier(),constant:Ct.defineModifier(),function:Ct.defineModifier(),standard:Ct.defineModifier(),local:Ct.defineModifier(),special:Ct.defineModifier()};Cm([{tag:b.link,class:"tok-link"},{tag:b.heading,class:"tok-heading"},{tag:b.emphasis,class:"tok-emphasis"},{tag:b.strong,class:"tok-strong"},{tag:b.keyword,class:"tok-keyword"},{tag:b.atom,class:"tok-atom"},{tag:b.bool,class:"tok-bool"},{tag:b.url,class:"tok-url"},{tag:b.labelName,class:"tok-labelName"},{tag:b.inserted,class:"tok-inserted"},{tag:b.deleted,class:"tok-deleted"},{tag:b.literal,class:"tok-literal"},{tag:b.string,class:"tok-string"},{tag:b.number,class:"tok-number"},{tag:[b.regexp,b.escape,b.special(b.string)],class:"tok-string2"},{tag:b.variableName,class:"tok-variableName"},{tag:b.local(b.variableName),class:"tok-variableName tok-local"},{tag:b.definition(b.variableName),class:"tok-variableName tok-definition"},{tag:b.special(b.variableName),class:"tok-variableName2"},{tag:b.definition(b.propertyName),class:"tok-propertyName tok-definition"},{tag:b.typeName,class:"tok-typeName"},{tag:b.namespace,class:"tok-namespace"},{tag:b.className,class:"tok-className"},{tag:b.macroName,class:"tok-macroName"},{tag:b.propertyName,class:"tok-propertyName"},{tag:b.operator,class:"tok-operator"},{tag:b.comment,class:"tok-comment"},{tag:b.meta,class:"tok-meta"},{tag:b.invalid,class:"tok-invalid"},{tag:b.punctuation,class:"tok-punctuation"}]);var gl;const zi=new J;function _1(n){return I.define({combine:n?e=>e.concat(n):void 0})}h(_1,"defineLanguageFacet");const J1=new J,vu=class vu{constructor(e,t,i=[],r=""){this.data=e,this.name=r,fe.prototype.hasOwnProperty("tree")||Object.defineProperty(fe.prototype,"tree",{get(){return Ke(this)}}),this.parser=t,this.extension=[cn.of(this),fe.languageData.of((s,o,l)=>{let a=ed(s,o,l),c=a.type.prop(zi);if(!c)return[];let u=s.facet(c),f=a.type.prop(J1);if(f){let d=a.resolve(o-a.from,l);for(let p of f)if(p.test(d,s)){let m=s.facet(p.facet);return p.type=="replace"?m:m.concat(u)}}return u})].concat(i)}isActiveAt(e,t,i=-1){return ed(e,t,i).type.prop(zi)==this.data}findRegions(e){let t=e.facet(cn);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=h((s,o)=>{if(s.prop(zi)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(J.mounted);if(l){if(l.tree.prop(zi)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let c=s.children[a];c instanceof pe&&r(c,s.positions[a]+o)}},"explore");return r(Ke(e),0),i}get allowsNesting(){return!0}};h(vu,"Language");let Qe=vu;Qe.setState=q.define();function ed(n,e,t){let i=n.facet(cn),r=Ke(n).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,t,Me.ExcludeBuffers))s.type.isTop&&(r=s);return r}h(ed,"topNodeAt");function Ke(n){let e=n.field(Qe.state,!1);return e?e.tree:pe.empty}h(Ke,"syntaxTree");const wu=class wu{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}};h(wu,"DocInput");let Za=wu,Cn=null;const Qn=class Qn{constructor(e,t,i=[],r,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Qn(e,t,[],pe.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Za(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=pe.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=h(()=>Date.now()>r,"until")}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(sn.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(sn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Cn;Cn=this;try{return e()}finally{Cn=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=td(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,f,d)=>a.push({fromA:c,toA:u,fromB:f,toB:d})),i=sn.applyChanges(i,a),r=pe.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),f=e.mapPos(c.to,-1);u<f&&l.push({from:u,to:f})}}}return new Qn(this.parser,t,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=td(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends $s{createParse(t,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=Cn;if(a){for(let c of r)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new pe(Ge.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Cn}};h(Qn,"ParseContext");let xr=Qn;function td(n,e,t){return sn.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}h(td,"cutFragments");const er=class er{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new er(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=xr.create(e.facet(cn).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new er(i)}};h(er,"LanguageState");let kr=er;Qe.state=Be.define({create:kr.init,update(n,e){for(let t of e.effects)if(t.is(Qe.setState))return t.value;return e.startState.facet(cn)!=e.state.facet(cn)?kr.init(e.state):n.apply(e)}});let Am=h(n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)},"requestIdle");typeof requestIdleCallback<"u"&&(Am=h(n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)},"requestIdle"));const yl=typeof navigator<"u"&&(!((gl=navigator.scheduling)===null||gl===void 0)&&gl.isInputPending)?()=>navigator.scheduling.isInputPending():null;var Er;const q1=Ee.fromClass((Er=class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Qe.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Qe.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Am(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Qe.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!yl?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work(()=>yl&&yl()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Qe.setState.of(new kr(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>qe(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},h(Er,"ParseWorker"),Er),{eventHandlers:{focus(){this.scheduleWork()}}}),cn=I.define({combine(n){return n.length?n[0]:null},enables:n=>[Qe.state,q1,B.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),Mm=I.define(),Uh=I.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Ri(n){let e=n.facet(Uh);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}h(Ri,"getIndentUnit");function Sr(n,e){let t="",i=n.tabSize,r=n.facet(Uh)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let s=0;s<e;s++)t+=r;return t}h(Sr,"indentString");function Yh(n,e){n instanceof fe&&(n=new un(n));for(let i of n.state.facet(Mm)){let r=i(n,e);if(r!==void 0)return r}let t=Ke(n.state);return t.length>=e?ew(n,t,e):null}h(Yh,"getIndentation");const xu=class xu{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ri(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return gn(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}};h(xu,"IndentContext");let un=xu;const Q1=new J;function ew(n,e,t){let i=e.resolveStack(t),r=i.node.enterUnfinishedNodesBefore(t);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Tm(i,n,t)}h(ew,"syntaxIndentation");function Tm(n,e,t){for(let i=n;i;i=i.next){let r=iw(i.node);if(r)return r(Xa.create(e,t,i))}return 0}h(Tm,"indentFor");function tw(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}h(tw,"ignoreClosed");function iw(n){let e=n.type.prop(Q1);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(J.closedBy))){let r=n.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>ow(o,!0,1,void 0,s&&!tw(o)?r.from:void 0)}return n.parent==null?nw:null}h(iw,"indentStrategy");function nw(){return 0}h(nw,"topIndent");const jo=class jo extends un{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new jo(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(rw(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Tm(this.context.next,this.base,this.pos)}};h(jo,"TreeIndentContext");let Xa=jo;function rw(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}h(rw,"isParent");function sw(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}h(sw,"bracketedAligned");function ow(n,e,t,i,r){let s=n.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||r==n.pos+o,a=e?sw(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}h(ow,"delimitedStrategy");const lw=200;function aw(){return fe.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+lw)return n;let s=t.sliceString(r.from,i);if(!e.some(c=>c.test(s)))return n;let{state:o}=n,l=-1,a=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==l)continue;l=u.from;let f=Yh(o,u.from);if(f==null)continue;let d=/^\s*/.exec(u.text)[0],p=Sr(o,f);d!=p&&a.push({from:u.from,to:u.from+d.length,insert:p})}return a.length?[n,{changes:a,sequential:!0}]:n})}h(aw,"indentOnInput");const Ho=class Ho{constructor(e,t){this.specs=e;let i;function r(l){let a=Lt.newName();return(i||(i=Object.create(null)))["."+a]=l,a}h(r,"def");const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof Qe?l=>l.prop(zi)==o.data:o?l=>l==o:void 0,this.style=Cm(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Lt(i):null,this.themeType=t.themeType}static define(e,t){return new Ho(e,t||{})}};h(Ho,"HighlightStyle");let fn=Ho;const Ua=I.define(),Om=I.define({combine(n){return n.length?[n[0]]:null}});function bl(n){let e=n.facet(Ua);return e.length?e:n.facet(Om)}h(bl,"getHighlighters");function id(n,e){let t=[hw],i;return n instanceof fn&&(n.module&&t.push(B.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(Om.of(n)):i?t.push(Ua.computeN([B.darkTheme],r=>r.facet(B.darkTheme)==(i=="dark")?[n]:[])):t.push(Ua.of(n)),t}h(id,"syntaxHighlighting");const ku=class ku{constructor(e){this.markCache=Object.create(null),this.tree=Ke(e.state),this.decorations=this.buildDeco(e,bl(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Ke(e.state),i=bl(e.state),r=i!=bl(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!r&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return $.none;let i=new Ei;for(let{from:r,to:s}of e.visibleRanges)U1(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=$.mark({class:a})))},r,s);return i.finish()}};h(ku,"TreeHighlighter");let Ya=ku;const hw=Bi.high(Ee.fromClass(Ya,{decorations:n=>n.decorations})),cw=fn.define([{tag:b.meta,color:"#404740"},{tag:b.link,textDecoration:"underline"},{tag:b.heading,textDecoration:"underline",fontWeight:"bold"},{tag:b.emphasis,fontStyle:"italic"},{tag:b.strong,fontWeight:"bold"},{tag:b.strikethrough,textDecoration:"line-through"},{tag:b.keyword,color:"#708"},{tag:[b.atom,b.bool,b.url,b.contentSeparator,b.labelName],color:"#219"},{tag:[b.literal,b.inserted],color:"#164"},{tag:[b.string,b.deleted],color:"#a11"},{tag:[b.regexp,b.escape,b.special(b.string)],color:"#e40"},{tag:b.definition(b.variableName),color:"#00f"},{tag:b.local(b.variableName),color:"#30a"},{tag:[b.typeName,b.namespace],color:"#085"},{tag:b.className,color:"#167"},{tag:[b.special(b.variableName),b.macroName],color:"#256"},{tag:b.definition(b.propertyName),color:"#00c"},{tag:b.comment,color:"#940"},{tag:b.invalid,color:"#f00"}]),uw=B.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Dm=1e4,Em="()[]{}",Lm=I.define({combine(n){return Kt(n,{afterCursor:!0,brackets:Em,maxScanDistance:Dm,renderMatch:pw})}}),fw=$.mark({class:"cm-matchingBracket"}),dw=$.mark({class:"cm-nonmatchingBracket"});function pw(n){let e=[],t=n.matched?fw:dw;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}h(pw,"defaultRenderMatch");const mw=Be.define({create(){return $.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(Lm);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=Tt(e.state,r.head,-1,i)||r.head>0&&Tt(e.state,r.head-1,1,i)||i.afterCursor&&(Tt(e.state,r.head,1,i)||r.head<e.state.doc.length&&Tt(e.state,r.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return $.set(t,!0)},provide:n=>B.decorations.from(n)}),gw=[mw,uw];function yw(n={}){return[Lm.of(n),gw]}h(yw,"bracketMatching");const bw=new J;function _a(n,e,t){let i=n.prop(e<0?J.openedBy:J.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}h(_a,"matchingNodes");function Ja(n){let e=n.type.prop(bw);return e?e(n.node):n}h(Ja,"findHandle");function Tt(n,e,t,i={}){let r=i.maxScanDistance||Dm,s=i.brackets||Em,o=Ke(n),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=_a(a.type,t,s);if(c&&a.from<a.to){let u=Ja(a);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return vw(n,e,t,a,u,c,s)}}return ww(n,e,t,o,l.type,r,s)}h(Tt,"matchBrackets");function vw(n,e,t,i,r,s,o){let l=i.parent,a={from:r.from,to:r.to},c=0,u=l==null?void 0:l.cursor();if(u&&(t<0?u.childBefore(i.from):u.childAfter(i.to)))do if(t<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let f=Ja(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(_a(u.type,t,o))c++;else if(_a(u.type,-t,o)){if(c==0){let f=Ja(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}h(vw,"matchMarkedBrackets");function ww(n,e,t,i,r,s,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let d=0;!u.next().done&&d<=s;){let p=u.value;t<0&&(d+=p.length);let m=e+d*t;for(let y=t>0?0:p.length-1,g=t>0?p.length:-1;y!=g;y+=t){let v=o.indexOf(p[y]);if(!(v<0||i.resolveInner(m+y,1).type!=r))if(v%2==0==t>0)f++;else{if(f==1)return{start:c,end:{from:m+y,to:m+y+1},matched:v>>1==a>>1};f--}}t>0&&(d+=p.length)}return u.done?{start:c,matched:!1}:null}h(ww,"matchPlainBrackets");function nd(n,e,t,i=0,r=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let s=r;for(let o=i;o<e;o++)n.charCodeAt(o)==9?s+=t-s%t:s++;return s}h(nd,"countCol");const Su=class Su{constructor(e,t,i,r){this.string=e,this.tabSize=t,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e instanceof RegExp?e.test(t):e(t)),i)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=nd(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:nd(this.string,null,this.tabSize)}match(e,t,i){if(typeof e=="string"){let r=h(o=>i?o.toLowerCase():o,"cased"),s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}};h(Su,"StringStream");let Xs=Su;function xw(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||kw,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||Jh}}h(xw,"fullParser");function kw(n){if(typeof n!="object")return n;let e={};for(let t in n){let i=n[t];e[t]=i instanceof Array?i.slice():i}return e}h(kw,"defaultCopyState");const rd=new WeakMap,zo=class zo extends Qe{constructor(e){let t=_1(e.languageData),i=xw(e),r,s=new class extends $s{createParse(o,l,a){return new Qa(r,o,l,a)}};super(t,s,[Mm.of((o,l)=>this.getIndent(o,l))],e.name),this.topNode=Mw(t),r=this,this.streamParser=i,this.stateAfter=new J({perNode:!0}),this.tokenTable=e.tokenTable?new Us(i.tokenTable):Aw}static define(e){return new zo(e)}getIndent(e,t){let i=Ke(e.state),r=i.resolve(t);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=rd.get(e.state),s!=null&&s<t-1e4&&(s=void 0));let l=_h(this,i,0,r.from,s??t),a,c;if(l?(c=l.state,a=l.pos+1):(c=this.streamParser.startState(e.unit),a=0),t-a>1e4)return null;for(;a<t;){let f=e.state.doc.lineAt(a),d=Math.min(t,f.to);if(f.length){let p=o?o(f.from):-1,m=new Xs(f.text,e.state.tabSize,e.unit,p<0?void 0:p);for(;m.pos<d-f.from;)Rm(this.streamParser.token,m,c)}else this.streamParser.blankLine(c,e.unit);if(d==t)break;a=f.to+1}let u=e.lineAt(t);return o&&s==null&&rd.set(e.state,u.from),this.streamParser.indent(c,/^\s*(.*)/.exec(u.text)[1],e)}get allowsNesting(){return!1}};h(zo,"StreamLanguage");let qa=zo;function _h(n,e,t,i,r){let s=t>=i&&t+e.length<=r&&e.prop(n.stateAfter);if(s)return{state:n.streamParser.copyState(s),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],c=l instanceof pe&&a<r&&_h(n,l,a,i,r);if(c)return c}return null}h(_h,"findState");function Pm(n,e,t,i,r){if(r&&t<=0&&i>=e.length)return e;!r&&e.type==n.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<i&&l instanceof pe){if(!(a=Pm(n,l,t-o,i-o,r)))break;return r?new pe(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}h(Pm,"cutTree");function Sw(n,e,t,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),l=s<=t&&o>t&&_h(n,r.tree,0-r.offset,t,o),a;if(l&&(a=Pm(n,r.tree,t+r.offset,l.pos+r.offset,!1)))return{state:l.state,tree:a}}return{state:n.streamParser.startState(i?Ri(i):4),tree:pe.empty}}h(Sw,"findStartInFragments");const Cu=class Cu{constructor(e,t,i,r){this.lang=e,this.input=t,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=xr.get(),o=r[0].from,{state:l,tree:a}=Sw(e,i,o,s==null?void 0:s.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let c=0;c<a.children.length;c++)this.chunks.push(a.children[c]),this.chunkPos.push(a.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Ri(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=xr.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(t,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let i=t.indexOf(`
`);i>-1&&(t=t.slice(0,i))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),i=e+t.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(t=t.slice(0,s-(i-t.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,l=this.lineAfter(o);t+=l,i=o+l.length}return{line:t,end:i}}skipGapsTo(e,t,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+t;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;t+=o-r}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(t,s,1),t+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,t,i,r),s}parseLine(e){let{line:t,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new Xs(t,e?e.state.tabSize:4,e?Ri(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=Rm(s.token,o,this.state);if(l&&(r=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=pe.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Cw,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new pe(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new pe(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};h(Cu,"Parse");let Qa=Cu;function Rm(n,e,t){e.start=e.pos;for(let i=0;i<10;i++){let r=n(e,t);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}h(Rm,"readToken");const Jh=Object.create(null),Cr=[Ge.none],Cw=new Va(Cr),sd=[],od=Object.create(null),Bm=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Bm[n]=Nm(Jh,e);const Au=class Au{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Bm)}resolve(e){return e?this.table[e]||(this.table[e]=Nm(this.extra,e)):0}};h(Au,"TokenTable");let Us=Au;const Aw=new Us(Jh);function vl(n,e){sd.indexOf(n)>-1||(sd.push(n),console.warn(e))}h(vl,"warnForPart");function Nm(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let u=n[c]||b[c];u?typeof u=="function"?a.length?a=a.map(u):vl(c,`Modifier ${c} used at start of tag`):a.length?vl(c,`Tag ${c} used as modifier`):a=Array.isArray(u)?u:[u]:vl(c,`Unknown highlighting tag ${c}`)}for(let c of a)t.push(c)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(l=>l.id),s=od[r];if(s)return s.id;let o=od[r]=Ge.define({id:Cr.length,name:i,props:[Z1({[i]:t})]});return Cr.push(o),o.id}h(Nm,"createTokenType");function Mw(n){let e=Ge.define({id:Cr.length,name:"Document",props:[zi.add(()=>n)],top:!0});return Cr.push(e),e}h(Mw,"docID");ae.RTL,ae.LTR;const Tw=h(n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=Qh(n.state,t.from);return i.line?Ow(n):i.block?Ew(n):!1},"toggleComment");function qh(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}h(qh,"command");const Ow=qh(Rw,0),Dw=qh(Im,0),Ew=qh((n,e)=>Im(n,e,Pw(e)),0);function Qh(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}h(Qh,"getConfig");const An=50;function Lw(n,{open:e,close:t},i,r){let s=n.sliceDoc(i-An,i),o=n.sliceDoc(r,r+An),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,c=s.length-l;if(s.slice(c-e.length,c)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let u,f;r-i<=2*An?u=f=n.sliceDoc(i,r):(u=n.sliceDoc(i,i+An),f=n.sliceDoc(r-An,r));let d=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(f)[0].length,m=f.length-p-t.length;return u.slice(d,d+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:i+d+e.length,margin:/\s/.test(u.charAt(d+e.length))?1:0},close:{pos:r-p-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}h(Lw,"findBlockComment");function Pw(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}h(Pw,"selectedLineRanges");function Im(n,e,t=e.selection.ranges){let i=t.map(s=>Qh(e,s.from).block);if(!i.every(s=>s))return null;let r=t.map((s,o)=>Lw(e,i[o],s.from,s.to));if(n!=2&&!r.every(s=>s))return{changes:e.changes(t.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(n!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=i[o],{open:c,close:u}=l;s.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:s}}return null}h(Im,"changeBlockComment");function Rw(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of t){let l=i.length,a=1e9,c=Qh(e,s).line;if(c){for(let u=s;u<=o;){let f=e.doc.lineAt(u);if(f.from>r&&(s==o||o>f.from)){r=f.from;let d=/^\s*/.exec(f.text)[0].length,p=d==f.length,m=f.text.slice(d,d+c.length)==c?d:-1;d<f.text.length&&d<a&&(a=d),i.push({line:f,comment:m,token:c,indent:d,empty:p,single:!1})}u=f.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(n!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:c,empty:u,single:f}of i)(f||!u)&&s.push({from:l.from+c,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let c=o.from+l,u=c+a.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}h(Rw,"changeLineComment");const eh=mt.define(),Bw=mt.define(),Nw=I.define(),Fm=I.define({combine(n){return Kt(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),Vm=Be.define({create(){return Ti.empty},update(n,e){let t=e.state.facet(Fm),i=e.annotation(eh);if(i){let a=dt.fromTransaction(e,i.selection),c=i.side,u=c==0?n.undone:n.done;return a?u=Ys(u,u.length,t.minDepth,a):u=Hm(u,e.startState.selection),new Ti(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(Bw);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(Re.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=dt.fromTransaction(e),o=e.annotation(Re.time),l=e.annotation(Re.userEvent);return s?n=n.addChanges(s,o,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Ti(n.done.map(dt.fromJSON),n.undone.map(dt.fromJSON))}});function Iw(n={}){return[Vm,Fm.of(n),B.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Wm:e.inputType=="historyRedo"?th:null;return i?(e.preventDefault(),i(t)):!1}})]}h(Iw,"history$1");function _o(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(Vm,!1);if(!r)return!1;let s=r.pop(n,t,e);return s?(i(s),!0):!1}}h(_o,"cmd");const Wm=_o(0,!1),th=_o(1,!1),Fw=_o(0,!0),Vw=_o(1,!0),wi=class wi{constructor(e,t,i,r,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new wi(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new wi(e.changes&&it.fromJSON(e.changes),[],e.mapped&&qt.fromJSON(e.mapped),e.startSelection&&S.fromJSON(e.startSelection),e.selectionsAfter.map(S.fromJSON))}static fromTransaction(e,t){let i=lt;for(let r of e.startState.facet(Nw)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new wi(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,lt)}static selection(e){return new wi(void 0,lt,void 0,void 0,e)}};h(wi,"HistEvent");let dt=wi;function Ys(n,e,t,i){let r=e+1>t+20?e-t-1:0,s=n.slice(r,e);return s.push(i),s}h(Ys,"updateBranch");function Ww(n,e){let t=[],i=!1;return n.iterChangedRanges((r,s)=>t.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let a=0;a<t.length;){let c=t[a++],u=t[a++];l>=c&&o<=u&&(i=!0)}}),i}h(Ww,"isAdjacent");function jw(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}h(jw,"eqSelectionShape");function jm(n,e){return n.length?e.length?n.concat(e):n:e}h(jm,"conc");const lt=[],Hw=200;function Hm(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Hw));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Ys(n,n.length-1,1e9,t.setSelAfter(i)))}else return[dt.selection([e])]}h(Hm,"addSelection");function zw(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}h(zw,"popSelection");function wl(n,e){if(!n.length)return n;let t=n.length,i=lt;for(;t;){let r=Gw(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=n.slice(0,t);return s[t-1]=r,s}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[dt.selection(i)]:lt}h(wl,"addMappingToBranch");function Gw(n,e,t){let i=jm(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):lt,t);if(!n.changes)return dt.selection(i);let r=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new dt(r,q.mapEffects(n.effects,e),o,n.startSelection.map(s),i)}h(Gw,"mapEvent");const Kw=/^(input\.type|delete)($|\.)/,xi=class xi{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new xi(this.done,this.undone):this}addChanges(e,t,i,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||Kw.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Ww(l.changes,e.changes))||i=="input.type.compose")?o=Ys(o,o.length-1,r.minDepth,new dt(e.changes.compose(l.changes),jm(e.effects,l.effects),l.mapped,l.startSelection,lt)):o=Ys(o,o.length,r.minDepth,e),new xi(o,lt,t,i)}addSelection(e,t,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:lt;return s.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&jw(s[s.length-1],e)?this:new xi(Hm(this.done,e),this.undone,t,i)}addMapping(e){return new xi(wl(this.done,e),wl(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||t.selection;if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:eh.of({side:e,rest:zw(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=r.length==1?lt:r.slice(0,r.length-1);return s.mapped&&(l=wl(l,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:eh.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};h(xi,"HistoryState");let Ti=xi;Ti.empty=new Ti(lt,lt);const $w=[{key:"Mod-z",run:Wm,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:th,preventDefault:!0},{linux:"Ctrl-Shift-z",run:th,preventDefault:!0},{key:"Mod-u",run:Fw,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Vw,preventDefault:!0}];function yn(n,e){return S.create(n.ranges.map(e),n.mainIndex)}h(yn,"updateSel");function Nt(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}h(Nt,"setSel");function bt({state:n,dispatch:e},t){let i=yn(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Nt(n,i)),!0)}h(bt,"moveSel");function Jo(n,e){return S.cursor(e?n.to:n.from)}h(Jo,"rangeEnd");function zm(n,e){return bt(n,t=>t.empty?n.moveByChar(t,e):Jo(t,e))}h(zm,"cursorByChar");function Ne(n){return n.textDirectionAt(n.state.selection.main.head)==ae.LTR}h(Ne,"ltrAtCursor");const Gm=h(n=>zm(n,!Ne(n)),"cursorCharLeft"),Km=h(n=>zm(n,Ne(n)),"cursorCharRight");function $m(n,e){return bt(n,t=>t.empty?n.moveByGroup(t,e):Jo(t,e))}h($m,"cursorByGroup");const Zw=h(n=>$m(n,!Ne(n)),"cursorGroupLeft"),Xw=h(n=>$m(n,Ne(n)),"cursorGroupRight");function Uw(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}h(Uw,"interestingNode");function qo(n,e,t){let i=Ke(n).resolveInner(e.head),r=t?J.closedBy:J.openedBy;for(let a=e.head;;){let c=t?i.childAfter(a):i.childBefore(a);if(!c)break;Uw(n,c,r)?i=c:a=t?c.to:c.from}let s=i.type.prop(r),o,l;return s&&(o=t?Tt(n,i.from,1):Tt(n,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,S.cursor(l,t?-1:1)}h(qo,"moveBySyntax");const Yw=h(n=>bt(n,e=>qo(n.state,e,!Ne(n))),"cursorSyntaxLeft"),_w=h(n=>bt(n,e=>qo(n.state,e,Ne(n))),"cursorSyntaxRight");function Zm(n,e){return bt(n,t=>{if(!t.empty)return Jo(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}h(Zm,"cursorByLine");const Xm=h(n=>Zm(n,!1),"cursorLineUp"),Um=h(n=>Zm(n,!0),"cursorLineDown");function Ym(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let s of n.state.facet(B.scrollMargins)){let o=s(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}h(Ym,"pageInfo");function _m(n,e){let t=Ym(n),{state:i}=n,r=yn(i.selection,o=>o.empty?n.moveVertically(o,e,t.height):Jo(o,e));if(r.eq(i.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,c=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<c&&(s=B.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-a}))}return n.dispatch(Nt(i,r),{effects:s}),!0}h(_m,"cursorByPage");const ld=h(n=>_m(n,!1),"cursorPageUp"),ih=h(n=>_m(n,!0),"cursorPageDown");function ci(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let s=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=S.cursor(i.from+s))}return r}h(ci,"moveByLineBoundary");const Jw=h(n=>bt(n,e=>ci(n,e,!0)),"cursorLineBoundaryForward"),qw=h(n=>bt(n,e=>ci(n,e,!1)),"cursorLineBoundaryBackward"),Qw=h(n=>bt(n,e=>ci(n,e,!Ne(n))),"cursorLineBoundaryLeft"),ex=h(n=>bt(n,e=>ci(n,e,Ne(n))),"cursorLineBoundaryRight"),tx=h(n=>bt(n,e=>S.cursor(n.lineBlockAt(e.head).from,1)),"cursorLineStart"),ix=h(n=>bt(n,e=>S.cursor(n.lineBlockAt(e.head).to,-1)),"cursorLineEnd");function nx(n,e,t){let i=!1,r=yn(n.selection,s=>{let o=Tt(n,s.head,-1)||Tt(n,s.head,1)||s.head>0&&Tt(n,s.head-1,1)||s.head<n.doc.length&&Tt(n,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return t?S.range(s.anchor,l):S.cursor(l)});return i?(e(Nt(n,r)),!0):!1}h(nx,"toMatchingBracket");const rx=h(({state:n,dispatch:e})=>nx(n,e,!1),"cursorMatchingBracket");function ct(n,e){let t=yn(n.state.selection,i=>{let r=e(i);return S.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Nt(n.state,t)),!0)}h(ct,"extendSel");function Jm(n,e){return ct(n,t=>n.moveByChar(t,e))}h(Jm,"selectByChar");const qm=h(n=>Jm(n,!Ne(n)),"selectCharLeft"),Qm=h(n=>Jm(n,Ne(n)),"selectCharRight");function eg(n,e){return ct(n,t=>n.moveByGroup(t,e))}h(eg,"selectByGroup");const sx=h(n=>eg(n,!Ne(n)),"selectGroupLeft"),ox=h(n=>eg(n,Ne(n)),"selectGroupRight"),lx=h(n=>ct(n,e=>qo(n.state,e,!Ne(n))),"selectSyntaxLeft"),ax=h(n=>ct(n,e=>qo(n.state,e,Ne(n))),"selectSyntaxRight");function tg(n,e){return ct(n,t=>n.moveVertically(t,e))}h(tg,"selectByLine");const ig=h(n=>tg(n,!1),"selectLineUp"),ng=h(n=>tg(n,!0),"selectLineDown");function rg(n,e){return ct(n,t=>n.moveVertically(t,e,Ym(n).height))}h(rg,"selectByPage");const ad=h(n=>rg(n,!1),"selectPageUp"),hd=h(n=>rg(n,!0),"selectPageDown"),hx=h(n=>ct(n,e=>ci(n,e,!0)),"selectLineBoundaryForward"),cx=h(n=>ct(n,e=>ci(n,e,!1)),"selectLineBoundaryBackward"),ux=h(n=>ct(n,e=>ci(n,e,!Ne(n))),"selectLineBoundaryLeft"),fx=h(n=>ct(n,e=>ci(n,e,Ne(n))),"selectLineBoundaryRight"),dx=h(n=>ct(n,e=>S.cursor(n.lineBlockAt(e.head).from)),"selectLineStart"),px=h(n=>ct(n,e=>S.cursor(n.lineBlockAt(e.head).to)),"selectLineEnd"),cd=h(({state:n,dispatch:e})=>(e(Nt(n,{anchor:0})),!0),"cursorDocStart"),ud=h(({state:n,dispatch:e})=>(e(Nt(n,{anchor:n.doc.length})),!0),"cursorDocEnd"),fd=h(({state:n,dispatch:e})=>(e(Nt(n,{anchor:n.selection.main.anchor,head:0})),!0),"selectDocStart"),dd=h(({state:n,dispatch:e})=>(e(Nt(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),"selectDocEnd"),mx=h(({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),"selectAll"),gx=h(({state:n,dispatch:e})=>{let t=Qo(n).map(({from:i,to:r})=>S.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:S.create(t),userEvent:"select"})),!0},"selectLine"),yx=h(({state:n,dispatch:e})=>{let t=yn(n.selection,i=>{var r;let s=Ke(n).resolveStack(i.from,1);for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&(!((r=l.parent)===null||r===void 0)&&r.parent))return S.range(l.to,l.from)}return i});return e(Nt(n,t)),!0},"selectParentSyntax"),bx=h(({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=S.create([t.main]):t.main.empty||(i=S.create([S.cursor(t.main.head)])),i?(e(Nt(n,i)),!0):!1},"simplifySelection");function Br(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(s);a<o?(t="delete.backward",a=ns(n,a,!1)):a>o&&(t="delete.forward",a=ns(n,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=ns(n,o,!1),l=ns(n,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:S.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?B.announce.of(i.phrase("Selection deleted")):void 0})),!0)}h(Br,"deleteBy");function ns(n,e,t){if(n instanceof B)for(let i of n.state.facet(B.atomicRanges).map(r=>r(n)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=t?s:r)});return e}h(ns,"skipAtomic");const sg=h((n,e)=>Br(n,t=>{let i=t.from,{state:r}=n,s=r.doc.lineAt(i),o,l;if(!e&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(o=s.text.slice(0,i-s.from))){if(o[o.length-1]=="	")return i-1;let a=gn(o,r.tabSize),c=a%Ri(r)||Ri(r);for(let u=0;u<c&&o[o.length-1-u]==" ";u++)i--;l=i}else l=Oe(s.text,i-s.from,e,e)+s.from,l==i&&s.number!=(e?r.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(l-s.from,i-s.from))&&(l=Oe(s.text,l-s.from,!1,!1)+s.from);return l}),"deleteByChar"),nh=h(n=>sg(n,!1),"deleteCharBackward"),og=h(n=>sg(n,!0),"deleteCharForward"),lg=h((n,e)=>Br(n,t=>{let i=t.head,{state:r}=n,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==t.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=Oe(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),u=o(c);if(l!=null&&u!=l)break;(c!=" "||i!=t.head)&&(l=u),i=a}return i}),"deleteByGroup"),ag=h(n=>lg(n,!1),"deleteGroupBackward"),vx=h(n=>lg(n,!0),"deleteGroupForward"),wx=h(n=>Br(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),"deleteToLineEnd"),xx=h(n=>Br(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),"deleteLineBoundaryBackward"),kx=h(n=>Br(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),"deleteLineBoundaryForward"),Sx=h(({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:te.of(["",""])},range:S.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},"splitLine"),Cx=h(({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,s=n.doc.lineAt(r),o=r==s.from?r-1:Oe(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:Oe(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:n.doc.slice(r,l).append(n.doc.slice(o,r))},range:S.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)},"transposeChars");function Qo(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),s=n.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=n.doc.lineAt(i.to-1)),t>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});t=s.number+1}return e}h(Qo,"selectedLineBlocks");function hg(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let s of Qo(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let a of s.ranges)r.push(S.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let a of s.ranges)r.push(S.range(a.anchor-l,a.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:S.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}h(hg,"moveLine");const Ax=h(({state:n,dispatch:e})=>hg(n,e,!1),"moveLineUp"),Mx=h(({state:n,dispatch:e})=>hg(n,e,!0),"moveLineDown");function cg(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of Qo(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}h(cg,"copyLine");const Tx=h(({state:n,dispatch:e})=>cg(n,e,!1),"copyLineUp"),Ox=h(({state:n,dispatch:e})=>cg(n,e,!0),"copyLineDown"),Dx=h(n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Qo(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=yn(e.selection,r=>n.moveVertically(r,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0},"deleteLine");function Ex(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ke(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(J.closedBy))&&s.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}h(Ex,"isBetweenBrackets");const Lx=ug(!1),Px=ug(!0);function ug(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),a=!n&&s==o&&Ex(e,s);n&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new un(e,{simulateBreak:s,simulateDoubleBreak:!!a}),u=Yh(c,s);for(u==null&&(u=gn(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let f=["",Sr(e,u)];return a&&f.push(Sr(e,c.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:te.of(f)},range:S.cursor(s+1+f[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}h(ug,"newlineAndIndent");function ec(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let l=n.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,r,i),t=l.number),o=l.to+1}let s=n.changes(r);return{changes:r,range:S.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}h(ec,"changeBySelectedLine");const Rx=h(({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new un(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),r=ec(n,(s,o,l)=>{let a=Yh(i,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let c=/^\s*/.exec(s.text)[0],u=Sr(n,a);(c!=u||l.from<s.from+c.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+c.length,insert:u}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},"indentSelection"),fg=h(({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(ec(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Uh)})}),{userEvent:"input.indent"})),!0),"indentMore"),dg=h(({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(ec(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=gn(r,n.tabSize),o=0,l=Sr(n,Math.max(0,s-Ri(n)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),"indentLess"),Bx=[{key:"Ctrl-b",run:Gm,shift:qm,preventDefault:!0},{key:"Ctrl-f",run:Km,shift:Qm},{key:"Ctrl-p",run:Xm,shift:ig},{key:"Ctrl-n",run:Um,shift:ng},{key:"Ctrl-a",run:tx,shift:dx},{key:"Ctrl-e",run:ix,shift:px},{key:"Ctrl-d",run:og},{key:"Ctrl-h",run:nh},{key:"Ctrl-k",run:wx},{key:"Ctrl-Alt-h",run:ag},{key:"Ctrl-o",run:Sx},{key:"Ctrl-t",run:Cx},{key:"Ctrl-v",run:ih}],Nx=[{key:"ArrowLeft",run:Gm,shift:qm,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Zw,shift:sx,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Qw,shift:ux,preventDefault:!0},{key:"ArrowRight",run:Km,shift:Qm,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Xw,shift:ox,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ex,shift:fx,preventDefault:!0},{key:"ArrowUp",run:Xm,shift:ig,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cd,shift:fd},{mac:"Ctrl-ArrowUp",run:ld,shift:ad},{key:"ArrowDown",run:Um,shift:ng,preventDefault:!0},{mac:"Cmd-ArrowDown",run:ud,shift:dd},{mac:"Ctrl-ArrowDown",run:ih,shift:hd},{key:"PageUp",run:ld,shift:ad},{key:"PageDown",run:ih,shift:hd},{key:"Home",run:qw,shift:cx,preventDefault:!0},{key:"Mod-Home",run:cd,shift:fd},{key:"End",run:Jw,shift:hx,preventDefault:!0},{key:"Mod-End",run:ud,shift:dd},{key:"Enter",run:Lx},{key:"Mod-a",run:mx},{key:"Backspace",run:nh,shift:nh},{key:"Delete",run:og},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ag},{key:"Mod-Delete",mac:"Alt-Delete",run:vx},{mac:"Mod-Backspace",run:xx},{mac:"Mod-Delete",run:kx}].concat(Bx.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),Ix=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Yw,shift:lx},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:_w,shift:ax},{key:"Alt-ArrowUp",run:Ax},{key:"Shift-Alt-ArrowUp",run:Tx},{key:"Alt-ArrowDown",run:Mx},{key:"Shift-Alt-ArrowDown",run:Ox},{key:"Escape",run:bx},{key:"Mod-Enter",run:Px},{key:"Alt-l",mac:"Ctrl-l",run:gx},{key:"Mod-i",run:yx,preventDefault:!0},{key:"Mod-[",run:dg},{key:"Mod-]",run:fg},{key:"Mod-Alt-\\",run:Rx},{key:"Shift-Mod-k",run:Dx},{key:"Shift-Mod-\\",run:rx},{key:"Mod-/",run:Tw},{key:"Alt-A",run:Dw}].concat(Nx),Fx={key:"Tab",run:fg,shift:dg},Mu=class Mu{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=Ke(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),s=r.search(pg(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}};h(Mu,"CompletionContext");let _s=Mu;function pd(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}h(pd,"toSet");function Vx(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let s=1;s<r.length;s++)t[r[s]]=!0}let i=pd(e)+pd(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}h(Vx,"prefixMatch");function Wx(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Vx(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:t}:null}}h(Wx,"completeFromList");const Tu=class Tu{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}};h(Tu,"Option");let Js=Tu;function ei(n){return n.selection.main.from}h(ei,"cur");function pg(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?n:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}h(pg,"ensureAnchor");const jx=mt.define();function Hx(n,e,t,i){let{main:r}=n.selection,s=t-r.from,o=i-r.from;return Object.assign(Object.assign({},n.changeByRange(l=>l!=r&&t!=i&&n.sliceDoc(l.from+s,l.from+o)!=n.sliceDoc(t,i)?{range:l}:{changes:{from:l.from+s,to:i==r.from?l.to:l.from+o,insert:e},range:S.cursor(l.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}h(Hx,"insertCompletionText");const md=new WeakMap;function zx(n){if(!Array.isArray(n))return n;let e=md.get(n);return e||md.set(n,e=Wx(n)),e}h(zx,"asSource");const qs=q.define(),Ar=q.define(),Ou=class Ou{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Ce(e,t),r=ot(i);this.chars.push(i);let s=e.slice(t,t+r),o=s.toUpperCase();this.folded.push(Ce(o==s?s.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:t,folded:i,any:r,precise:s,byWord:o}=this;if(t.length==1){let w=Ce(e,0),x=ot(w),C=x==e.length?0:-100;if(w!=t[0])if(w==i[0])C+=-200;else return!1;return this.ret(C,[0,x])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,c=0;if(l<0){for(let w=0,x=Math.min(e.length,200);w<x&&c<a;){let C=Ce(e,w);(C==t[c]||C==i[c])&&(r[c++]=w),w+=ot(C)}if(c<a)return!1}let u=0,f=0,d=!1,p=0,m=-1,y=-1,g=/[a-z]/.test(e),v=!0;for(let w=0,x=Math.min(e.length,200),C=0;w<x&&f<a;){let k=Ce(e,w);l<0&&(u<a&&k==t[u]&&(s[u++]=w),p<a&&(k==t[p]||k==i[p]?(p==0&&(m=w),y=w+1,p++):p=0));let A,M=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(A=Nh(k))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!w||M==1&&g||C==0&&M!=0)&&(t[f]==k||i[f]==k&&(d=!0)?o[f++]=w:o.length&&(v=!1)),C=M,w+=ot(k)}return f==a&&o[0]==0&&v?this.result(-100+(d?-200:0),o,e):p==a&&m==0?this.ret(-200-e.length+(y==e.length?0:-100),[0,y]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[m,y]):f==a?this.result(-100+(d?-200:0)+-700+(v?0:-1100),o,e):t.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],s=0;for(let o of t){let l=o+(this.astral?ot(Ce(i,o)):1);s&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return this.ret(e-i.length,r)}};h(Ou,"FuzzyMatcher");let rh=Ou;const Te=I.define({combine(n){return Kt(n,{activateOnTyping:!0,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Gx,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>gd(e(i),t(i)),optionClass:(e,t)=>i=>gd(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function gd(n,e){return n?e?n+" "+e:n:e}h(gd,"joinClass");function Gx(n,e,t,i,r,s){let o=n.textDirection==ae.RTL,l=o,a=!1,c="top",u,f,d=e.left-r.left,p=r.right-e.right,m=i.right-i.left,y=i.bottom-i.top;if(l&&d<Math.min(m,p)?l=!1:!l&&p<Math.min(m,d)&&(l=!0),m<=(l?d:p))u=Math.max(r.top,Math.min(t.top,r.bottom-y))-e.top,f=Math.min(400,l?d:p);else{a=!0,f=Math.min(400,(o?e.right:r.right-e.left)-30);let w=r.bottom-e.bottom;w>=y||w>e.top?u=t.bottom-e.top:(c="bottom",u=e.bottom-t.top)}let g=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/g}px; max-width: ${f/v}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}h(Gx,"defaultPositionInfo");function Kx(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let c=0;c<s.length;){let u=s[c++],f=s[c++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(l.slice(u,f))),d.className="cm-completionMatchedText",a=f}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}h(Kx,"optionContent");function xl(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}h(xl,"rangeAroundSelected");const Du=class Du{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:s,selected:o}=r.open,l=e.state.facet(Te);this.optionContent=Kx(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=xl(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(t).open;for(let u=a.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<c.length){this.applyCompletion(e,c[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Te).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ar.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:l}=i.open;(!r.open||r.open.options!=s)&&(this.range=xl(s.length,o,e.state.facet(Te).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),l!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=xl(t.options.length,t.selected,this.view.state.facet(Te).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>qe(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&Zx(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,t.bottom)-10||r.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(Te).positionInfo(this.view,t,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:c}=l;if(c){let d=typeof c=="string"?c:c.name;if(d!=s&&(o>i.from||i.from==0))if(s=d,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=d}}const u=r.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let d of this.optionContent){let p=d(l,this.view.state,this.view,a);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};h(Du,"CompletionTooltip");let sh=Du;function $x(n,e){return t=>new sh(t,n,e)}h($x,"completionTooltip");function Zx(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}h(Zx,"scrollIntoView");function yd(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}h(yd,"score");function Xx(n,e){let t=[],i=null,r=h(a=>{t.push(a);let{section:c}=a.completion;if(c){i||(i=[]);let u=typeof c=="string"?c:c.name;i.some(f=>f.name==u)||i.push(typeof c=="string"?{name:u}:c)}},"addOption");for(let a of n)if(a.hasResult()){let c=a.result.getMatch;if(a.result.filter===!1)for(let u of a.result.options)r(new Js(u,a.source,c?c(u):[],1e9-t.length));else{let u=new rh(e.sliceDoc(a.from,a.to));for(let f of a.result.options)if(u.match(f.label)){let d=f.displayLabel?c?c(f,u.matched):[]:u.matched;r(new Js(f,a.source,d,u.score+(f.boost||0)))}}}if(i){let a=Object.create(null),c=0,u=h((f,d)=>{var p,m;return((p=f.rank)!==null&&p!==void 0?p:1e9)-((m=d.rank)!==null&&m!==void 0?m:1e9)||(f.name<d.name?-1:1)},"cmp");for(let f of i.sort(u))c-=1e5,a[f.name]=c;for(let f of t){let{section:d}=f.completion;d&&(f.score+=a[typeof d=="string"?d:d.name])}}let s=[],o=null,l=e.facet(Te).compareCompletions;for(let a of t.sort((c,u)=>u.score-c.score||l(c.completion,u.completion))){let c=a.completion;!o||o.label!=c.label||o.detail!=c.detail||o.type!=null&&c.type!=null&&o.type!=c.type||o.apply!=c.apply||o.boost!=c.boost?s.push(a):yd(a.completion)>yd(o)&&(s[s.length-1]=a),o=a.completion}return s}h(Xx,"sortOptions");const ki=class ki{constructor(e,t,i,r,s,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ki(this.options,bd(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,s){let o=Xx(e,t);if(!o.length)return r&&e.some(a=>a.state==1)?new ki(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=t.facet(Te).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let a=r.options[r.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==a){l=c;break}}return new ki(o,bd(i,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:qx,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new ki(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}};h(ki,"CompletionDialog");let oh=ki;const tr=class tr{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new tr(_x,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Te),s=(i.override||t.languageDataAt("autocomplete",ei(t)).map(zx)).map(l=>(this.active.find(c=>c.source==l)||new Wt(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Ux(s,this.active)?o=oh.build(s,t,this.id,o,i):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Wt(l.source,0):l));for(let l of e.effects)l.is(gg)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new tr(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Yx}};h(tr,"CompletionState");let lh=tr;function Ux(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let r=t==n.length,s=i==e.length;if(r||s)return r==s;if(n[t++].result!=e[i++].result)return!1}}h(Ux,"sameResults");const Yx={"aria-autocomplete":"list"};function bd(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}h(bd,"makeAttrs");const _x=[];function ah(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}h(ah,"getUserEvent");const Ft=class Ft{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=ah(e),r=this;i?r=r.handleUserEvent(e,i,t):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new Ft(r.source,0));for(let s of e.effects)if(s.is(qs))r=new Ft(r.source,1,s.value?ei(e.state):-1);else if(s.is(Ar))r=new Ft(r.source,0);else if(s.is(mg))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Ft(this.source,1)}handleChange(e){return e.changes.touchesRange(ei(e.startState))?new Ft(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ft(this.source,this.state,e.mapPos(this.explicitPos))}};h(Ft,"ActiveSource");let Wt=Ft;const Yi=class Yi extends Wt{constructor(e,t,i,r,s){super(e,2,t),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,t,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=ei(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||t=="delete"&&ei(e.startState)==this.from)return new Wt(this.source,t=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return Jx(this.result.validFor,e.state,s,o)?new Yi(this.source,a,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new _s(e.state,l,a>=0)))?new Yi(this.source,a,c,c.from,(r=c.to)!==null&&r!==void 0?r:ei(e.state)):new Wt(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Wt(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Yi(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}};h(Yi,"ActiveResult");let Qs=Yi;function Jx(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):pg(n,!0).test(r)}h(Jx,"checkValid");const mg=q.define({map(n,e){return n.map(t=>t.map(e))}}),gg=q.define(),He=Be.define({create(){return lh.start()},update(n,e){return n.update(e)},provide:n=>[$h.from(n,e=>e.tooltip),B.contentAttributes.from(n,e=>e.attrs)]});function tc(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(He).active.find(r=>r.source==e.source);return i instanceof Qs?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},Hx(n.state,t,i.from,i.to)),{annotations:jx.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}h(tc,"applyCompletion");const qx=$x(He,tc);function rs(n,e="option"){return t=>{let i=t.state.field(He,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Te).interactionDelay)return!1;let r=1,s;e=="page"&&(s=vm(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:gg.of(l)}),!0}}h(rs,"moveCompletionSelection");const Qx=h(n=>{let e=n.state.field(He,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Te).interactionDelay?!1:tc(n,e.open.options[e.open.selected])},"acceptCompletion"),ek=h(n=>n.state.field(He,!1)?(n.dispatch({effects:qs.of(!0)}),!0):!1,"startCompletion"),tk=h(n=>{let e=n.state.field(He,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Ar.of(null)}),!0)},"closeCompletion"),Eu=class Eu{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}};h(Eu,"RunningQuery");let hh=Eu;const ik=50,nk=1e3,rk=Ee.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(He).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(He);if(!n.selectionSet&&!n.docChanged&&n.startState.field(He)==e)return;let t=n.transactions.some(r=>(r.selection||r.docChanged)&&!ah(r));for(let r=0;r<this.running.length;r++){let s=this.running[r];if(t||s.updates.length+n.transactions.length>ik&&Date.now()-s.time>nk){for(let o of s.context.abortListeners)try{o()}catch(l){qe(this.view.state,l)}s.context.abortListeners=null,this.running.splice(r--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(r=>r.effects.some(s=>s.is(qs)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.state.facet(Te).activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(s=>s.active.source==r.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let r of n.transactions)ah(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(He);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=ei(e),i=new _s(e,t,n.explicitPos==t),r=new hh(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Ar.of(null)}),qe(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Te).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Te);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let o=new Qs(r.active.source,r.active.explicitPos,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:ei(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(He).active.find(o=>o.source==r.active.source);if(s&&s.state==1)if(r.done==null){let o=new Wt(r.active.source,0);for(let l of r.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:mg.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(He,!1);if(e&&e.tooltip&&this.view.state.facet(Te).closeOnBlur){let t=e.open&&vm(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ar.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:qs.of(!1)}),20),this.composing=0}}}),sk=typeof navigator=="object"&&/Win/.test(navigator.platform),ok=Bi.highest(B.domEventHandlers({keydown(n,e){let t=e.state.field(He,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(sk&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(o=>o.source==i.source),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&tc(e,i),!1}})),lk=B.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Mr={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ci=q.define({map(n,e){let t=e.mapPos(n,-1,Ve.TrackAfter);return t??void 0}}),ic=new class extends jt{};ic.startSide=1;ic.endSide=-1;const yg=Be.define({create(){return de.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Ci)&&(n=n.update({add:[ic.range(t.value,t.value+1)]}));return n}});function ak(){return[ck,yg]}h(ak,"closeBrackets");const kl="()[]{}<>";function bg(n){for(let e=0;e<kl.length;e+=2)if(kl.charCodeAt(e)==n)return kl.charAt(e+1);return Nh(n<128?n:n+1)}h(bg,"closing");function vg(n,e){return n.languageDataAt("closeBrackets",e)[0]||Mr}h(vg,"config");const hk=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ck=B.inputHandler.of((n,e,t,i)=>{if((hk?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&ot(Ce(i,0))==1||e!=r.from||t!=r.to)return!1;let s=dk(n.state,i);return s?(n.dispatch(s),!0):!1}),uk=h(({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=vg(n,n.selection.main.head).brackets||Mr.brackets,r=null,s=n.changeByRange(o=>{if(o.empty){let l=pk(n.doc,o.head);for(let a of i)if(a==l&&el(n.doc,o.head)==bg(Ce(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:S.cursor(o.head-a.length)}}return{range:r=o}});return r||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},"deleteBracketPair"),fk=[{key:"Backspace",run:uk}];function dk(n,e){let t=vg(n,n.selection.main.head),i=t.brackets||Mr.brackets;for(let r of i){let s=bg(Ce(r,0));if(e==r)return s==r?yk(n,r,i.indexOf(r+r+r)>-1,t):mk(n,r,s,t.before||Mr.before);if(e==s&&wg(n,n.selection.main.from))return gk(n,r,s)}return null}h(dk,"insertBracket");function wg(n,e){let t=!1;return n.field(yg).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}h(wg,"closedBracketAt");function el(n,e){let t=n.sliceString(e,e+2);return t.slice(0,ot(Ce(t,0)))}h(el,"nextChar");function pk(n,e){let t=n.sliceString(e-2,e);return ot(Ce(t,0))==t.length?t:t.slice(1)}h(pk,"prevChar");function mk(n,e,t,i){let r=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Ci.of(o.to+e.length),range:S.range(o.anchor+e.length,o.head+e.length)};let l=el(n.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Ci.of(o.head+e.length),range:S.cursor(o.head+e.length)}:{range:r=o}});return r?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}h(mk,"handleOpen");function gk(n,e,t){let i=null,r=n.changeByRange(s=>s.empty&&el(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:S.cursor(s.head+t.length)}:i={range:s});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}h(gk,"handleClose");function yk(n,e,t,i){let r=i.stringPrefixes||Mr.stringPrefixes,s=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Ci.of(l.to+e.length),range:S.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=el(n.doc,a),u;if(c==e){if(vd(n,a))return{changes:{insert:e+e,from:a},effects:Ci.of(a+e.length),range:S.cursor(a+e.length)};if(wg(n,a)){let d=t&&n.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+d.length,insert:d},range:S.cursor(a+d.length)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(u=wd(n,a-2*e.length,r))>-1&&vd(n,u))return{changes:{insert:e+e+e+e,from:a},effects:Ci.of(a+e.length),range:S.cursor(a+e.length)};if(n.charCategorizer(a)(c)!=ue.Word&&wd(n,a,r)>-1&&!bk(n,a,e,r))return{changes:{insert:e+e,from:a},effects:Ci.of(a+e.length),range:S.cursor(a+e.length)}}return{range:s=l}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}h(yk,"handleSame");function vd(n,e){let t=Ke(n).resolveInner(e+1);return t.parent&&t.from==e}h(vd,"nodeStart");function bk(n,e,t,i){let r=Ke(n).resolveInner(e,-1),s=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+s)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=r.firstChild;for(;u&&u.from==r.from&&u.to-u.from>t.length+a;){if(n.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=r.to==e&&r.parent;if(!c)break;r=c}return!1}h(bk,"probablyInString");function wd(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=ue.Word)return e;for(let r of t){let s=e-r.length;if(n.sliceDoc(s,e)==r&&i(n.sliceDoc(s-1,s))!=ue.Word)return s}return-1}h(wd,"canStartStringAt");function vk(n={}){return[ok,He,Te.of(n),rk,wk,lk]}h(vk,"autocompletion");const xg=[{key:"Ctrl-Space",run:ek},{key:"Escape",run:tk},{key:"ArrowDown",run:rs(!0)},{key:"ArrowUp",run:rs(!1)},{key:"PageDown",run:rs(!0,"page")},{key:"PageUp",run:rs(!1,"page")},{key:"Enter",run:Qx}],wk=Bi.highest(rn.computeN([Te],n=>n.facet(Te).defaultKeymap?[xg]:[]));function oe(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)kg(n,arguments[e]);return n}h(oe,"crelt");function kg(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)kg(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}h(kg,"add");const Lu=class Lu{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}};h(Lu,"SelectedDiagnostic");let ch=Lu;const Go=class Go{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,s=i.facet(Ag).markerFilter;s&&(r=s(r,i));let o=$.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?$.widget({widget:new uh(l),diagnostic:l}).range(l.from):$.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l,inclusive:!0}).range(l.from,l.to)),!0);return new Go(o,t,dn(o))}};h(Go,"LintState");let gi=Go;function dn(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new ch(r,s,o.diagnostic),!1}),i}h(dn,"findDiagnostic");function xk(n,e){let t=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(i=>i.is(Sg))||n.changes.touchesRange(t.from,t.to))}h(xk,"hideTooltip");function kk(n,e){return n.field(et,!1)?e:e.concat(q.appendConfig.of(Lk))}h(kk,"maybeEnableLint");const Sg=q.define(),nc=q.define(),Cg=q.define(),et=Be.define({create(){return new gi($.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let r=e.changes.mapPos(n.selected.from,1);i=dn(t,n.selected.diagnostic,r)||dn(t,null,r)}n=new gi(t,n.panel,i)}for(let t of e.effects)t.is(Sg)?n=gi.init(t.value,n.panel,e.state):t.is(nc)?n=new gi(n.diagnostics,t.value?to.open:null,n.selected):t.is(Cg)&&(n=new gi(n.diagnostics,n.panel,t.value));return n},provide:n=>[yr.from(n,e=>e.panel),B.decorations.from(n,e=>e.diagnostics)]}),Sk=$.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function Ck(n,e,t){let{diagnostics:i}=n.state.field(et),r=[],s=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:u})=>{e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0))&&(r.push(u.diagnostic),s=Math.min(a,s),o=Math.max(c,o))});let l=n.state.facet(Ag).tooltipFilter;return l&&(r=l(r,n.state)),r.length?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:Ak(n,r)}}}:null}h(Ck,"lintTooltip");function Ak(n,e){return oe("ul",{class:"cm-tooltip-lint"},e.map(t=>Tg(n,t,!1)))}h(Ak,"diagnosticsTooltip");const Mk=h(n=>{let e=n.state.field(et,!1);(!e||!e.panel)&&n.dispatch({effects:kk(n.state,[nc.of(!0)])});let t=gr(n,to.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},"openLintPanel"),xd=h(n=>{let e=n.state.field(et,!1);return!e||!e.panel?!1:(n.dispatch({effects:nc.of(!1)}),!0)},"closeLintPanel"),Tk=h(n=>{let e=n.state.field(et,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},"nextDiagnostic"),Ok=[{key:"Mod-Shift-m",run:Mk,preventDefault:!0},{key:"F8",run:Tk}],Ag=I.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},Kt(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function Mg(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}h(Mg,"assignKeys");function Tg(n,e,t){var i;let r=t?Mg(e.actions):[];return oe("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},oe("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,a=h(d=>{if(d.preventDefault(),l)return;l=!0;let p=dn(n.state.field(et).diagnostics,e);p&&s.apply(n,p.from,p.to)},"click"),{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,f=u<0?c:[c.slice(0,u),oe("u",c.slice(u,u+1)),c.slice(u+1)];return oe("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},f)}),e.source&&oe("div",{class:"cm-diagnosticSource"},e.source))}h(Tg,"renderDiagnostic");const Pu=class Pu extends oi{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return oe("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}};h(Pu,"DiagnosticWidget");let uh=Pu;const Ru=class Ru{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Tg(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}};h(Ru,"PanelItem");let eo=Ru;const Ko=class Ko{constructor(e){this.view=e,this.items=[];let t=h(r=>{if(r.keyCode==27)xd(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Mg(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=dn(this.view.state.field(et).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},"onkeydown"),i=h(r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)},"onclick");this.list=oe("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=oe("div",{class:"cm-panel-lint"},this.list,oe("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>xd(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(et).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(et),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let c=-1,u;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==a.diagnostic){c=f;break}c<0?(u=new eo(this.view,a.diagnostic),this.items.splice(i,0,u),r=!0):(u=this.items[c],c>i&&(this.items.splice(i,c-i),r=!0)),t&&u.diagnostic==t.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),s=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new eo(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let a=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/a:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}h(t,"rm");for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(et),i=dn(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Cg.of(i)})}static open(e){return new Ko(e)}};h(Ko,"LintPanel");let to=Ko;function Dk(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}h(Dk,"svg");function ss(n){return Dk(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}h(ss,"underline");const Ek=B.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ss("#d11")},".cm-lintRange-warning":{backgroundImage:ss("orange")},".cm-lintRange-info":{backgroundImage:ss("#999")},".cm-lintRange-hint":{backgroundImage:ss("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Lk=[et,B.decorations.compute([et],n=>{let{selected:e,panel:t}=n.field(et);return!e||!t||e.from==e.to?$.none:$.set([Sk.range(e.from,e.to)])}),M1(Ck,{hideOn:xk}),Ek],kd=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n,Bu=class Bu{constructor(e,t,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?l=>s(kd(l)):kd,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ce(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Nh(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ot(e);let r=this.normalize(t);for(let s=0,o=i;;s++){let l=r.charCodeAt(s),a=this.match(l,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(a)return this.value=a,this;break}o==i&&s<t.length&&t.charCodeAt(s)==l&&o++}}}match(e,t,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}};h(Bu,"SearchCursor");let hi=Bu;typeof Symbol<"u"&&(hi.prototype[Symbol.iterator]=function(){return this});const Og={from:-1,to:-1,match:/.*/.exec("")},rc="gm"+(/x/.unicode==null?"":"u"),Nu=class Nu{constructor(e,t,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Og,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new ro(e,t,i,r,s);this.re=new RegExp(t,rc+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=so(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=so(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}};h(Nu,"RegExpCursor");let io=Nu;const Sl=new WeakMap,_i=class _i{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=Sl.get(e);if(!r||r.from>=i||r.to<=t){let l=new _i(t,e.sliceString(t,i));return Sl.set(e,l),l}if(r.from==t&&r.to==i)return r;let{text:s,from:o}=r;return o>t&&(s=e.sliceString(t,o)+s,o=t),r.to<i&&(s+=e.sliceString(r.to,i)),Sl.set(e,new _i(o,s)),new _i(t,s.slice(t-o,i-o))}};h(_i,"FlattenedDoc");let no=_i;const Iu=class Iu{constructor(e,t,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=Og,this.matchPos=so(e,r),this.re=new RegExp(t,rc+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=no.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=so(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=no.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};h(Iu,"MultilineRegExpCursor");let ro=Iu;typeof Symbol<"u"&&(io.prototype[Symbol.iterator]=ro.prototype[Symbol.iterator]=function(){return this});function Pk(n){try{return new RegExp(n,rc),!0}catch{return!1}}h(Pk,"validRegExp");function so(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}h(so,"toCharEnd");function fh(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=oe("input",{class:"cm-textfield",name:"line",value:e}),i=oe("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:oo.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},oe("label",n.state.phrase("Go to line"),": ",t)," ",oe("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=n,l=o.doc.lineAt(o.selection.main.head),[,a,c,u,f]=s,d=u?+u.slice(1):0,p=c?+c:l.number;if(c&&f){let g=p/100;a&&(g=g*(a=="-"?-1:1)+l.number/o.doc.lines),p=Math.round(o.doc.lines*g)}else c&&a&&(p=p*(a=="-"?-1:1)+l.number);let m=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),y=S.cursor(m.from+Math.max(0,Math.min(d,m.length)));n.dispatch({effects:[oo.of(!1),B.scrollIntoView(y.from,{y:"center"})],selection:y}),n.focus()}return h(r,"go"),{dom:i}}h(fh,"createLineDialog");const oo=q.define(),Sd=Be.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(oo)&&(n=t.value);return n},provide:n=>yr.from(n,e=>e?fh:null)}),Rk=h(n=>{let e=gr(n,fh);if(!e){let t=[oo.of(!0)];n.state.field(Sd,!1)==null&&t.push(q.appendConfig.of([Sd,Bk])),n.dispatch({effects:t}),e=gr(n,fh)}return e&&e.dom.querySelector("input").select(),!0},"gotoLine"),Bk=B.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Nk={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Dg=I.define({combine(n){return Kt(n,Nk,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Ik(n){let e=[Hk,jk];return n&&e.push(Dg.of(n)),e}h(Ik,"highlightSelectionMatches");const Fk=$.mark({class:"cm-selectionMatch"}),Vk=$.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Cd(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=ue.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=ue.Word)}h(Cd,"insideWordBoundaries");function Wk(n,e,t,i){return n(e.sliceDoc(t,t+1))==ue.Word&&n(e.sliceDoc(i-1,i))==ue.Word}h(Wk,"insideWord");const jk=Ee.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(Dg),{state:t}=n,i=t.selection;if(i.ranges.length>1)return $.none;let r=i.main,s,o=null;if(r.empty){if(!e.highlightWordAroundCursor)return $.none;let a=t.wordAt(r.head);if(!a)return $.none;o=t.charCategorizer(r.head),s=t.sliceDoc(a.from,a.to)}else{let a=r.to-r.from;if(a<e.minSelectionLength||a>200)return $.none;if(e.wholeWords){if(s=t.sliceDoc(r.from,r.to),o=t.charCategorizer(r.head),!(Cd(o,t,r.from,r.to)&&Wk(o,t,r.from,r.to)))return $.none}else if(s=t.sliceDoc(r.from,r.to),!s)return $.none}let l=[];for(let a of n.visibleRanges){let c=new hi(t.doc,s,a.from,a.to);for(;!c.next().done;){let{from:u,to:f}=c.value;if((!o||Cd(o,t,u,f))&&(r.empty&&u<=r.from&&f>=r.to?l.push(Vk.range(u,f)):(u>=r.to||f<=r.from)&&l.push(Fk.range(u,f)),l.length>e.maxMatches))return $.none}}return $.set(l)}},{decorations:n=>n.decorations}),Hk=B.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),zk=h(({state:n,dispatch:e})=>{let{selection:t}=n,i=S.create(t.ranges.map(r=>n.wordAt(r.head)||S.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)},"selectWord");function Gk(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),s=r&&r.from==t.from&&r.to==t.to;for(let o=!1,l=new hi(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new hi(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=n.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}h(Gk,"findNextOccurrence");const Kk=h(({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return zk({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=i))return!1;let r=Gk(n,i);return r?(e(n.update({selection:n.selection.addRange(S.range(r.from,r.to),!1),effects:B.scrollIntoView(r.to)})),!0):!1},"selectNextOccurrence"),bn=I.define({combine(n){return Kt(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new gh(e),scrollToMatch:e=>B.scrollIntoView(e)})}}),Fu=class Fu{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Pk(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ph(this):new dh(this)}getCursor(e,t=0,i){let r=e.doc?e:fe.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Fi(this,r,t,i):Ii(this,r,t,i)}};h(Fu,"SearchQuery");let lo=Fu;const Vu=class Vu{constructor(e){this.spec=e}};h(Vu,"QueryType");let ao=Vu;function Ii(n,e,t,i){return new hi(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?$k(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}h(Ii,"stringCursor");function $k(n,e){return(t,i,r,s)=>((s>t||s+r.length<i)&&(s=Math.max(0,t-2),r=n.sliceString(s,Math.min(n.length,i+2))),(e(ho(r,t-s))!=ue.Word||e(co(r,t-s))!=ue.Word)&&(e(co(r,i-s))!=ue.Word||e(ho(r,i-s))!=ue.Word))}h($k,"stringWordTest");const Wu=class Wu extends ao{constructor(e){super(e)}nextMatch(e,t,i){let r=Ii(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=Ii(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let s=Math.max(t,r-1e4-this.spec.unquoted.length),o=Ii(this.spec,e,s,r),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==t)return null;r-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Ii(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=Ii(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}};h(Wu,"StringQuery");let dh=Wu;function Fi(n,e,t,i){return new io(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Zk(e.charCategorizer(e.selection.main.head)):void 0},t,i)}h(Fi,"regexpCursor");function ho(n,e){return n.slice(Oe(n,e,!1),e)}h(ho,"charBefore");function co(n,e){return n.slice(e,Oe(n,e))}h(co,"charAfter");function Zk(n){return(e,t,i)=>!i[0].length||(n(ho(i.input,i.index))!=ue.Word||n(co(i.input,i.index))!=ue.Word)&&(n(co(i.input,i.index+i[0].length))!=ue.Word||n(ho(i.input,i.index+i[0].length))!=ue.Word)}h(Zk,"regexpWordTest");const ju=class ju extends ao{nextMatch(e,t,i){let r=Fi(this.spec,e,i,e.doc.length).next();return r.done&&(r=Fi(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let s=Math.max(t,i-r*1e4),o=Fi(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==t||l.from>s+10))return l;if(s==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Fi(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=Fi(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}};h(ju,"RegExpQuery");let ph=ju;const Tr=q.define(),sc=q.define(),ti=Be.define({create(n){return new jn(mh(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Tr)?n=new jn(t.value.create(),n.panel):t.is(sc)&&(n=new jn(n.query,t.value?oc:null));return n},provide:n=>yr.from(n,e=>e.panel)}),Hu=class Hu{constructor(e,t){this.query=e,this.panel=t}};h(Hu,"SearchState");let jn=Hu;const Xk=$.mark({class:"cm-searchMatch"}),Uk=$.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Yk=Ee.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(ti))}update(n){let e=n.state.field(ti);(e!=n.startState.field(ti)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return $.none;let{view:t}=this,i=new Ei;for(let r=0,s=t.visibleRanges,o=s.length;r<o;r++){let{from:l,to:a}=s[r];for(;r<o-1&&a>s[r+1].from-2*250;)a=s[++r].to;n.highlight(t.state,l,a,(c,u)=>{let f=t.state.selection.ranges.some(d=>d.from==c&&d.to==u);i.add(c,u,f?Uk:Xk)})}return i.finish()}},{decorations:n=>n.decorations});function Nr(n){return e=>{let t=e.state.field(ti,!1);return t&&t.query.spec.valid?n(e,t):Pg(e)}}h(Nr,"searchCommand");const uo=Nr((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=S.single(i.from,i.to),s=n.state.facet(bn);return n.dispatch({selection:r,effects:[lc(n,i),s.scrollToMatch(r.main,n)],userEvent:"select.search"}),Lg(n),!0}),fo=Nr((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let s=S.single(r.from,r.to),o=n.state.facet(bn);return n.dispatch({selection:s,effects:[lc(n,r),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),Lg(n),!0}),_k=Nr((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:S.create(t.map(i=>S.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Jk=h(({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,s=[],o=0;for(let l=new hi(n.doc,n.sliceDoc(i,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(S.range(l.value.from,l.value.to))}return e(n.update({selection:S.create(s,o),userEvent:"select.search.matches"})),!0},"selectSelectionMatches"),Ad=Nr((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,i,i);if(!s)return!1;let o=[],l,a,c=[];if(s.from==i&&s.to==r&&(a=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(t,s.from,s.to),c.push(B.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l=S.single(s.from-u,s.to-u),c.push(lc(n,s)),c.push(t.facet(bn).scrollToMatch(l.main,n))}return n.dispatch({changes:o,selection:l,effects:c,userEvent:"input.replace"}),!0}),qk=Nr((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:B.announce.of(i),userEvent:"input.replace.all"}),!0});function oc(n){return n.state.facet(bn).createPanel(n)}h(oc,"createSearchPanel");function mh(n,e){var t,i,r,s,o;let l=n.selection.main,a=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=n.facet(bn);return new lo({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}h(mh,"defaultQuery");function Eg(n){let e=gr(n,oc);return e&&e.dom.querySelector("[main-field]")}h(Eg,"getSearchInput");function Lg(n){let e=Eg(n);e&&e==n.root.activeElement&&e.select()}h(Lg,"selectSearchInput");const Pg=h(n=>{let e=n.state.field(ti,!1);if(e&&e.panel){let t=Eg(n);if(t&&t!=n.root.activeElement){let i=mh(n.state,e.query.spec);i.valid&&n.dispatch({effects:Tr.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[sc.of(!0),e?Tr.of(mh(n.state,e.query.spec)):q.appendConfig.of(tS)]});return!0},"openSearchPanel"),Rg=h(n=>{let e=n.state.field(ti,!1);if(!e||!e.panel)return!1;let t=gr(n,oc);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:sc.of(!1)}),!0},"closeSearchPanel"),Qk=[{key:"Mod-f",run:Pg,scope:"editor search-panel"},{key:"F3",run:uo,shift:fo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:uo,shift:fo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Rg,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Jk},{key:"Mod-Alt-g",run:Rk},{key:"Mod-d",run:Kk,preventDefault:!0}],zu=class zu{constructor(e){this.view=e;let t=this.query=e.state.field(ti).query.spec;this.commit=this.commit.bind(this),this.searchField=oe("input",{value:t.search,placeholder:$e(e,"Find"),"aria-label":$e(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=oe("input",{value:t.replace,placeholder:$e(e,"Replace"),"aria-label":$e(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=oe("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=oe("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=oe("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,s,o){return oe("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}h(i,"button"),this.dom=oe("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>uo(e),[$e(e,"next")]),i("prev",()=>fo(e),[$e(e,"previous")]),i("select",()=>_k(e),[$e(e,"all")]),oe("label",null,[this.caseField,$e(e,"match case")]),oe("label",null,[this.reField,$e(e,"regexp")]),oe("label",null,[this.wordField,$e(e,"by word")]),...e.state.readOnly?[]:[oe("br"),this.replaceField,i("replace",()=>Ad(e),[$e(e,"replace")]),i("replaceAll",()=>qk(e),[$e(e,"replace all")])],oe("button",{name:"close",onclick:()=>Rg(e),"aria-label":$e(e,"close"),type:"button"},[""])])}commit(){let e=new lo({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Tr.of(e)}))}keydown(e){Uv(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?fo:uo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Ad(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Tr)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(bn).top}};h(zu,"SearchPanel");let gh=zu;function $e(n,e){return n.state.phrase(e)}h($e,"phrase");const os=30,ls=/[\s\.,:;?!]/;function lc(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,s=Math.max(i.from,e-os),o=Math.min(r,t+os),l=n.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<os;a++)if(!ls.test(l[a+1])&&ls.test(l[a])){l=l.slice(a);break}}if(o!=r){for(let a=l.length-1;a>l.length-os;a--)if(!ls.test(l[a-1])&&ls.test(l[a])){l=l.slice(0,a);break}}return B.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}h(lc,"announceMatch");const eS=B.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),tS=[ti,Bi.low(Yk),eS],iS=ye({__name:"Editor.client",props:{modelValue:{default:""},language:{},readonly:{type:Boolean,default:!1},lineNumbers:{type:Boolean,default:!1},highlightStyle:{},theme:{},extensions:{default:()=>[]}},emits:["update:modelValue","focus","blur","submit"],setup(n,{emit:e}){function t(d={}){return[{lineNumbers:!0,...d}.lineNumbers?R1():void 0,I1(),h1(),Iw(),Qv(),r1(),fe.allowMultipleSelections.of(!0),aw(),id(cw,{fallback:!0}),yw(),ak(),vk(),v1(),d1(),Ik(),rn.of([...fk,...Ix.filter(m=>m.key!=="Mod-Enter"),...Qk,...$w,...xg,...Ok])].filter(Boolean)}h(t,"getBasicSetup");const i=n,r=e,s=H(),o=H(),l=H(!1);let a;const c=z(()=>{const d=[t({lineNumbers:i.lineNumbers}),B.lineWrapping,B.domEventHandlers({focus(){l.value=!0,r("focus")},blur(){l.value=!1,r("blur")}})];i.readonly&&d.push(B.editable.of(!1),B.contentAttributes.of({tabIndex:"0"})),i.highlightStyle&&d.push(id(i.highlightStyle)),i.theme&&d.push(i.theme),i.language&&d.push(i.language),d.push(rn.of([Fx]));const p=rn.of([{key:"Mod-Enter",preventDefault:!0,run:()=>(r("submit"),!1)}]);d.push(p),i.extensions&&d.push(...i.extensions);const m=B.updateListener.of(y=>{y.docChanged&&(a=o.value.state.doc.toString(),r("update:modelValue",a))});return d.push(m),d});function u(){return fe.create({doc:i.modelValue,extensions:c.value})}h(u,"createState");function f(){o.value&&o.value.destroy(),o.value=new B({state:u(),parent:s.value})}return h(f,"recreateEditor"),ge(s,d=>{d&&f()}),pt(()=>{o.value.destroy()}),ge(c,()=>{f()},{deep:!0}),ge(()=>i.modelValue,d=>{d!==a&&f()}),(d,p)=>(ee(),Pe("div",{class:st(["editor text-sm md:text-base",{"editor-focused":l.value}]),ref_key:"editorEl",ref:s},null,2))}}),nS=Lr(iS,[["__scopeId","data-v-7ffcabb9"]]),rS={},sS={class:"grid h-full min-h-0 grid-cols-[1fr] grid-rows-[1fr_var(--divider-width)_1fr_auto] transition-[grid-template-columns] duration-500 md:grid-cols-[1fr_var(--divider-width)_1fr_var(--sidebar-width)] md:grid-rows-[1fr]",style:{"--divider-width":"0.125rem","--sidebar-width":"6.75rem"}},oS={class:"col-span-2 min-h-0 md:col-span-1"},lS={class:"col-span-1 col-start-1 row-span-1 row-start-1 min-h-0 min-w-0"},aS={class:"col-span-1 col-start-1 row-span-1 row-start-2 md:col-start-2 md:row-start-1"},hS={class:"col-span-1 col-start-1 row-span-1 row-start-3 min-h-0 min-w-0 md:col-start-3 md:row-start-1"};function cS(n,e){return ee(),Pe("div",sS,[ie("div",oS,[Vt(n.$slots,"actions")]),ie("div",lS,[Vt(n.$slots,"left")]),ie("div",aS,[Vt(n.$slots,"divider")]),ie("div",hS,[Vt(n.$slots,"right")])])}h(cS,"_sfc_render");const uS=Lr(rS,[["render",cS]]),fS=Gt("evaluation-worker",()=>{const n=new Worker(new URL(""+new URL("evaluation-worker-x04sumDk.js",import.meta.url).href,import.meta.url),{type:"module"});return{get:()=>n}});function dS(n){const e=fS().get();function t(r){return new Promise(s=>{const o=crypto.randomUUID(),l=ze(e,"message",a=>{var c;((c=a.data)==null?void 0:c.id)===o&&(l(),s(a.data.payload))});e.postMessage({type:"evaluate",id:o,code:r})})}h(t,"evaluate");const i=Ly(()=>t(n.value),{success:!0,data:null});return z(()=>i.value)}h(dS,"useEvaluator");const yh='"JetBrains Mono", "Fira Code", "Roboto Mono", Consolas, monospace',L={unknown:"#ff0000",background:"#18181b",base:"#D9D7CE",orange:"#FFAE57",teal:"#95E6CB",blue:"#5CCFE6",purple:"#D4BFFF",green:"#BAE67E",red:"#FF3333",lightGrey:"#5C6773",darkYellow:"#CF9C00",yellow:"#F5B900"},pS=h(n=>n.join(", "),"s$1"),mS=fn.define([{tag:b.comment,color:L.lightGrey},{tag:b.lineComment,color:L.lightGrey},{tag:b.blockComment,color:L.lightGrey},{tag:b.docComment,color:L.lightGrey},{tag:b.name,color:L.base},{tag:b.variableName,color:L.teal},{tag:b.typeName,color:L.green},{tag:b.tagName,color:L.blue},{tag:b.propertyName,color:L.blue},{tag:b.className,color:L.orange},{tag:b.labelName,color:L.unknown},{tag:b.namespace,color:L.orange},{tag:b.macroName,color:L.green},{tag:b.literal,color:L.purple},{tag:b.string,color:L.green},{tag:b.docString,color:L.unknown},{tag:b.character,color:L.darkYellow},{tag:b.number,color:L.purple},{tag:b.integer,color:L.purple},{tag:b.float,color:L.purple},{tag:b.bool,color:L.purple},{tag:b.regexp,color:L.teal},{tag:b.escape,color:L.yellow},{tag:b.color,color:L.lightGrey},{tag:b.url,color:L.unknown},{tag:b.keyword,color:L.blue},{tag:b.self,color:L.teal},{tag:b.null,color:L.purple},{tag:b.atom,color:L.purple},{tag:b.unit,color:L.purple},{tag:b.modifier,color:L.unknown},{tag:b.operatorKeyword,color:L.green},{tag:b.controlKeyword,color:L.orange},{tag:b.definitionKeyword,color:L.orange},{tag:b.operator,color:L.lightGrey},{tag:b.derefOperator,color:L.lightGrey},{tag:b.arithmeticOperator,color:L.lightGrey},{tag:b.logicOperator,color:L.lightGrey},{tag:b.bitwiseOperator,color:L.lightGrey},{tag:b.compareOperator,color:L.lightGrey},{tag:b.updateOperator,color:L.lightGrey},{tag:b.definitionOperator,color:L.lightGrey},{tag:b.typeOperator,color:L.lightGrey},{tag:b.controlOperator,color:L.lightGrey},{tag:b.punctuation,color:L.lightGrey},{tag:b.separator,color:L.lightGrey},{tag:b.bracket,color:L.lightGrey},{tag:b.angleBracket,color:L.lightGrey},{tag:b.squareBracket,color:L.lightGrey},{tag:b.paren,color:L.lightGrey},{tag:b.brace,color:L.lightGrey},{tag:b.content,color:L.base},{tag:b.heading,color:L.base},{tag:b.heading1,color:L.base},{tag:b.heading2,color:L.base},{tag:b.heading3,color:L.base},{tag:b.heading4,color:L.base},{tag:b.heading5,color:L.base},{tag:b.heading6,color:L.base},{tag:b.contentSeparator,color:L.base},{tag:b.list,color:L.base},{tag:b.quote,color:L.base},{tag:b.emphasis,fontStyle:"italic"},{tag:b.strong,fontWeight:"bold"},{tag:b.link,color:L.lightGrey},{tag:b.monospace,fontFamily:yh},{tag:b.strikethrough,color:L.base},{tag:b.inserted,color:L.base,backgroundColor:"#95E6CB44"},{tag:b.deleted,color:L.base,backgroundcolor:"#F0717844"},{tag:b.changed,color:L.base,backgroundColor:"#5CCFE644"},{tag:b.invalid,color:L.red},{tag:b.meta,color:L.green},{tag:b.documentMeta,color:L.lightGrey},{tag:b.annotation,color:L.lightGrey},{tag:b.processingInstruction,color:L.lightGrey}]),gS=B.theme({"&":{color:L.base,backgroundColor:L.background},".cm-content":{caretColor:L.base,fontFamily:yh,fontWeight:"400",lineHeight:"1.6"},"&.cm-focused":{outline:"none"},".cm-activeLine":{backgroundColor:"transparent"},"&.cm-focused .cm-matchingBracket":{backgroundColor:"#5D799933",outline:"3px solid #5D799933"},".cm-lineNumbers .cm-gutterElement":{padding:"0 1em 0 1em"},".cm-activeLineGutter":{backgroundColor:"transparent"},"&.cm-focused .cm-activeLineGutter":{color:"#94a3b8"},".cm-selectionMatch":{backgroundColor:"#252f3b"},"&.cm-focused .cm-cursor":{borderLeftColor:"#FFCC66",borderLeftWidth:"2px"},[pS(["&.cm-focused .cm-selectionBackground","&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground",".cm-selectionBackground",".cm-content ::selection"])]:{backgroundColor:"#343F4C"},"& .cm-gutters":{backgroundColor:"transparent",color:"#3D4752",border:"none",fontFamily:yh},"& .cm-foldPlaceholder":{background:"#9a9a9911",borderColor:"#9a9a9933",color:"#9a9a99"},"& .cm-tooltip":{backgroundColor:"#1f2a3b"}},{dark:!0}),yS=Object.freeze(Object.defineProperty({__proto__:null,colors:L,highlightStyle:mS,theme:gS},Symbol.toStringTag,{value:"Module"})),bh='"JetBrains Mono", "Fira Code", "Roboto Mono", Consolas, monospace',E={unknown:"#ff0000",background:"#FAFBFC",base:"#565869",lightGrey:"#ADB1C2",green:"#2DAE58",teal:"#13BBB7",blue:"#09A1ED",darkBlue:"#11658F",pink:"#F767BB",red:"#FF5C56",darkYellow:"#CF9C00",yellow:"#F5B900"},bS=h(n=>n.join(", "),"s"),vS=fn.define([{tag:b.comment,color:E.lightGrey},{tag:b.lineComment,color:E.lightGrey},{tag:b.blockComment,color:E.lightGrey},{tag:b.docComment,color:E.lightGrey},{tag:b.name,color:E.base},{tag:b.variableName,color:E.darkBlue},{tag:b.typeName,color:E.green},{tag:b.tagName,color:E.teal},{tag:b.propertyName,color:E.base},{tag:b.className,color:E.pink},{tag:b.labelName,color:E.unknown},{tag:b.namespace,color:E.pink},{tag:b.macroName,color:E.green},{tag:b.literal,color:E.red},{tag:b.string,color:E.darkYellow},{tag:b.docString,color:E.unknown},{tag:b.character,color:E.darkYellow},{tag:b.number,color:E.red},{tag:b.integer,color:E.red},{tag:b.float,color:E.red},{tag:b.bool,color:E.green},{tag:b.regexp,color:E.teal},{tag:b.escape,color:E.yellow},{tag:b.color,color:E.lightGrey},{tag:b.url,color:E.unknown},{tag:b.keyword,color:E.pink},{tag:b.self,color:E.teal},{tag:b.null,color:E.green},{tag:b.atom,color:E.green},{tag:b.unit,color:E.red},{tag:b.modifier,color:E.unknown},{tag:b.operatorKeyword,color:E.blue},{tag:b.controlKeyword,color:E.pink},{tag:b.definitionKeyword,color:E.pink},{tag:b.operator,color:E.lightGrey},{tag:b.derefOperator,color:E.lightGrey},{tag:b.arithmeticOperator,color:E.lightGrey},{tag:b.logicOperator,color:E.lightGrey},{tag:b.bitwiseOperator,color:E.lightGrey},{tag:b.compareOperator,color:E.lightGrey},{tag:b.updateOperator,color:E.lightGrey},{tag:b.definitionOperator,color:E.lightGrey},{tag:b.typeOperator,color:E.lightGrey},{tag:b.controlOperator,color:E.lightGrey},{tag:b.punctuation,color:E.lightGrey},{tag:b.separator,color:E.lightGrey},{tag:b.bracket,color:E.lightGrey},{tag:b.angleBracket,color:E.lightGrey},{tag:b.squareBracket,color:E.lightGrey},{tag:b.paren,color:E.lightGrey},{tag:b.brace,color:E.lightGrey},{tag:b.content,color:E.base},{tag:b.heading,color:E.base},{tag:b.heading1,color:E.base},{tag:b.heading2,color:E.base},{tag:b.heading3,color:E.base},{tag:b.heading4,color:E.base},{tag:b.heading5,color:E.base},{tag:b.heading6,color:E.base},{tag:b.contentSeparator,color:E.base},{tag:b.list,color:E.base},{tag:b.quote,color:E.base},{tag:b.emphasis,fontStyle:"italic"},{tag:b.strong,fontWeight:"bold"},{tag:b.link,color:E.lightGrey},{tag:b.monospace,fontFamily:bh},{tag:b.strikethrough,color:E.base},{tag:b.inserted,color:E.green,backgroundColor:"#2DAE5824"},{tag:b.deleted,color:E.red,backgroundcolor:"#FFAEAC44"},{tag:b.changed,color:E.blue,backgroundColor:"#14B1FF33"},{tag:b.invalid,color:E.red},{tag:b.meta,color:E.lightGrey},{tag:b.documentMeta,color:E.lightGrey},{tag:b.annotation,color:E.lightGrey},{tag:b.processingInstruction,color:E.lightGrey}]),wS=B.theme({"&":{color:E.base,backgroundColor:E.background},".cm-content":{caretColor:E.base,fontFamily:bh,fontWeight:"400",lineHeight:"1.6"},"&.cm-focused":{outline:"none"},".cm-activeLine":{backgroundColor:"transparent"},"&.cm-focused .cm-matchingBracket":{backgroundColor:"#f767bb33",outline:"3px solid #f767bb33"},".cm-lineNumbers .cm-gutterElement":{padding:"0 1em 0 1em"},".cm-activeLineGutter":{backgroundColor:"transparent"},"&.cm-focused .cm-activeLineGutter":{color:E.base},".cm-selectionMatch":{backgroundColor:"#f767bb33"},"&.cm-focused .cm-cursor":{borderLeftColor:"#000",borderLeftWidth:"2px"},[bS(["&.cm-focused .cm-selectionBackground","&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground",".cm-selectionBackground",".cm-content ::selection"])]:{backgroundColor:"#f767bb22"},".cm-gutters":{backgroundColor:"transparent",color:"#9194A2aa",border:"none",fontFamily:bh}},{dark:!1}),xS=Object.freeze(Object.defineProperty({__proto__:null,colors:E,highlightStyle:vS,theme:wS},Symbol.toStringTag,{value:"Module"}));function po(n){"@babel/helpers - typeof";return po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},po(n)}h(po,"_typeof");var kS=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Bg={name:"JsonString",props:{jsonValue:{type:String,required:!0}},data:h(function(){return{expand:!0,canExtend:!1}},"data"),mounted:h(function(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},"mounted"),methods:{toggle:h(function(){this.expand=!this.expand},"toggle")},render:h(function(){var e=this.jsonValue,t=kS.test(e),i;return this.expand?(i={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},t?(e='<a href="'.concat(e,'" target="_blank" class="jv-link">').concat(e,"</a>"),i.innerHTML='"'.concat(e.toString(),'"')):i.innerText='"'.concat(e.toString(),'"')):i={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},Z("span",{},[this.canExtend&&Z("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),Z("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),Z("span",i)])},"render")};Bg.__file="src/Components/types/json-string.vue";var Ng={name:"JsonUndefined",functional:!0,props:{jsonValue:{type:Object,default:null}},render:h(function(){return Z("span",{class:{"jv-item":!0,"jv-undefined":!0},innerText:this.jsonValue===null?"null":"undefined"})},"render")};Ng.__file="src/Components/types/json-undefined.vue";var Ig={name:"JsonNumber",functional:!0,props:{jsonValue:{type:Number,required:!0}},render:h(function(){var e=Number.isInteger(this.jsonValue);return Z("span",{class:{"jv-item":!0,"jv-number":!0,"jv-number-integer":e,"jv-number-float":!e},innerText:this.jsonValue.toString()})},"render")};Ig.__file="src/Components/types/json-number.vue";var Fg={name:"JsonBoolean",functional:!0,props:{jsonValue:Boolean},render:h(function(){return Z("span",{class:{"jv-item":!0,"jv-boolean":!0},innerText:this.jsonValue.toString()})},"render")};Fg.__file="src/Components/types/json-boolean.vue";var Vg={name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},data:h(function(){return{value:{}}},"data"),computed:{ordered:h(function(){var e=this;if(!this.sort)return this.value;var t={};return Object.keys(this.value).sort().forEach(function(i){t[i]=e.value[i]}),t},"ordered")},watch:{jsonValue:h(function(e){this.setValue(e)},"jsonValue")},mounted:h(function(){this.setValue(this.jsonValue)},"mounted"),methods:{setValue:h(function(e){var t=this;setTimeout(function(){t.value=e},0)},"setValue"),toggle:h(function(){this.$emit("update:expand",!this.expand),this.dispatchEvent()},"toggle"),dispatchEvent:h(function(){try{this.$el.dispatchEvent(new Event("resized"))}catch{var e=document.createEvent("Event");e.initEvent("resized",!0,!1),this.$el.dispatchEvent(e)}},"dispatchEvent")},render:h(function(){var e=[];if(!this.previewMode&&!this.keyName&&e.push(Z("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),e.push(Z("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"{"})),this.expand){for(var t in this.ordered)if(this.ordered.hasOwnProperty(t)){var i=this.ordered[t];e.push(Z(tl,{key:t,style:{display:this.expand?void 0:"none"},sort:this.sort,keyName:t,depth:this.depth+1,value:i,previewMode:this.previewMode}))}}return!this.expand&&Object.keys(this.value).length&&e.push(Z("span",{style:{display:this.expand?"none":void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal object content (keys: ".concat(Object.keys(this.ordered).join(", "),")"),innerText:"..."})),e.push(Z("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"}"})),Z("span",e)},"render")};Vg.__file="src/Components/types/json-object.vue";var Wg={name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},data:h(function(){return{value:[]}},"data"),watch:{jsonValue:h(function(e){this.setValue(e)},"jsonValue")},mounted:h(function(){this.setValue(this.jsonValue)},"mounted"),methods:{setValue:h(function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;i===0&&(this.value=[]),setTimeout(function(){e.length>i&&(t.value.push(e[i]),t.setValue(e,i+1))},0)},"setValue"),toggle:h(function(){this.$emit("update:expand",!this.expand);try{this.$el.dispatchEvent(new Event("resized"))}catch{var e=document.createEvent("Event");e.initEvent("resized",!0,!1),this.$el.dispatchEvent(e)}},"toggle")},render:h(function(){var e=this,t=[];return!this.previewMode&&!this.keyName&&t.push(Z("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),t.push(Z("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"["})),this.expand&&this.value.forEach(function(i,r){t.push(Z(tl,{key:r,style:{display:e.expand?void 0:"none"},sort:e.sort,depth:e.depth+1,value:i,previewMode:e.previewMode}))}),!this.expand&&this.value.length&&t.push(Z("span",{style:{display:void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal ".concat(this.value.length," hidden items"),innerText:"..."})),t.push(Z("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"]"})),Z("span",t)},"render")};Wg.__file="src/Components/types/json-array.vue";var jg={name:"JsonFunction",functional:!0,props:{jsonValue:{type:Function,required:!0}},render:h(function(){return Z("span",{class:{"jv-item":!0,"jv-function":!0},attrs:{title:this.jsonValue.toString()},innerHTML:"&lt;function&gt;"})},"render")};jg.__file="src/Components/types/json-function.vue";var Hg={name:"JsonDate",inject:["timeformat"],functional:!0,props:{jsonValue:{type:Date,required:!0}},render:h(function(){var e=this.jsonValue,t=this.timeformat;return Z("span",{class:{"jv-item":!0,"jv-string":!0},innerText:'"'.concat(t(e),'"')})},"render")};Hg.__file="src/Components/types/json-date.vue";var SS=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,zg={name:"JsonString",props:{jsonValue:{type:RegExp,required:!0}},data:h(function(){return{expand:!0,canExtend:!1}},"data"),mounted:h(function(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},"mounted"),methods:{toggle:h(function(){this.expand=!this.expand},"toggle")},render:h(function(){var e=this.jsonValue,t=SS.test(e),i;return this.expand?(i={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},t?(e='<a href="'.concat(e,'" target="_blank" class="jv-link">').concat(e,"</a>"),i.innerHTML="".concat(e.toString())):i.innerText="".concat(e.toString())):i={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},Z("span",{},[this.canExtend&&Z("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),Z("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),Z("span",i)])},"render")};zg.__file="src/Components/types/json-regexp.vue";var tl={name:"JsonBox",inject:["expandDepth","keyClick"],props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},data:h(function(){return{expand:!0}},"data"),mounted:h(function(){this.expand=this.previewMode||!(this.depth>=this.expandDepth)},"mounted"),methods:{toggle:h(function(){this.expand=!this.expand;try{this.$el.dispatchEvent(new Event("resized"))}catch{var e=document.createEvent("Event");e.initEvent("resized",!0,!1),this.$el.dispatchEvent(e)}},"toggle")},render:h(function(){var e=this,t=[],i;this.value===null||this.value===void 0?i=Ng:Array.isArray(this.value)?i=Wg:Object.prototype.toString.call(this.value)==="[object Date]"?i=Hg:this.value.constructor===RegExp?i=zg:po(this.value)==="object"?i=Vg:typeof this.value=="number"?i=Ig:typeof this.value=="string"?i=Bg:typeof this.value=="boolean"?i=Fg:typeof this.value=="function"&&(i=jg);var r=this.keyName&&this.value&&(Array.isArray(this.value)||po(this.value)==="object"&&Object.prototype.toString.call(this.value)!=="[object Date]");return!this.previewMode&&r&&t.push(Z("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),this.keyName&&t.push(Z("span",{class:{"jv-key":!0},onClick:h(function(){e.keyClick(e.keyName)},"onClick"),innerText:"".concat(this.keyName,":")})),t.push(Z(i,{class:{"jv-push":!0},jsonValue:this.value,keyName:this.keyName,sort:this.sort,depth:this.depth,expand:this.expand,previewMode:this.previewMode,"onUpdate:expand":h(function(o){e.expand=o},"onUpdateExpand")})),Z("div",{class:{"jv-node":!0,"jv-key-node":!!this.keyName&&!r,toggle:!this.previewMode&&r}},t)},"render")};tl.__file="src/Components/json-box.vue";var CS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}h(AS,"getDefaultExportFromCjs");var Gg={exports:{}};(function(n,e){h(function(i,r){n.exports=r()},"webpackUniversalModuleDefinition")(CS,function(){return function(){var t={686:function(s,o,l){l.d(o,{default:function(){return he}});var a=l(279),c=l.n(a),u=l(370),f=l.n(u),d=l(817),p=l.n(d);function m(D){try{return document.execCommand(D)}catch{return!1}}h(m,"command");var y=h(function(T){var P=p()(T);return m("cut"),P},"ClipboardActionCut"),g=y;function v(D){var T=document.documentElement.getAttribute("dir")==="rtl",P=document.createElement("textarea");P.style.fontSize="12pt",P.style.border="0",P.style.padding="0",P.style.margin="0",P.style.position="absolute",P.style[T?"right":"left"]="-9999px";var j=window.pageYOffset||document.documentElement.scrollTop;return P.style.top="".concat(j,"px"),P.setAttribute("readonly",""),P.value=D,P}h(v,"createFakeElement");var w=h(function(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},j="";if(typeof T=="string"){var K=v(T);P.container.appendChild(K),j=p()(K),m("copy"),K.remove()}else j=p()(T),m("copy");return j},"ClipboardActionCopy"),x=w;function C(D){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=h(function(P){return typeof P},"_typeof"):C=h(function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},"_typeof"),C(D)}h(C,"_typeof");var k=h(function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=T.action,j=P===void 0?"copy":P,K=T.container,U=T.target,ut=T.text;if(j!=="copy"&&j!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(U!==void 0)if(U&&C(U)==="object"&&U.nodeType===1){if(j==="copy"&&U.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(j==="cut"&&(U.hasAttribute("readonly")||U.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(ut)return x(ut,{container:K});if(U)return j==="cut"?g(U):x(U,{container:K})},"ClipboardActionDefault"),A=k;function M(D){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=h(function(P){return typeof P},"_typeof"):M=h(function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},"_typeof"),M(D)}h(M,"clipboard_typeof");function W(D,T){if(!(D instanceof T))throw new TypeError("Cannot call a class as a function")}h(W,"_classCallCheck");function X(D,T){for(var P=0;P<T.length;P++){var j=T[P];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(D,j.key,j)}}h(X,"_defineProperties");function R(D,T,P){return T&&X(D.prototype,T),P&&X(D,P),D}h(R,"_createClass");function F(D,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(T&&T.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),T&&V(D,T)}h(F,"_inherits");function V(D,T){return V=Object.setPrototypeOf||h(function(j,K){return j.__proto__=K,j},"_setPrototypeOf"),V(D,T)}h(V,"_setPrototypeOf");function Y(D){var T=re();return h(function(){var j=se(D),K;if(T){var U=se(this).constructor;K=Reflect.construct(j,arguments,U)}else K=j.apply(this,arguments);return _(this,K)},"_createSuperInternal")}h(Y,"_createSuper");function _(D,T){return T&&(M(T)==="object"||typeof T=="function")?T:Q(D)}h(_,"_possibleConstructorReturn");function Q(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}h(Q,"_assertThisInitialized");function re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}h(re,"_isNativeReflectConstruct");function se(D){return se=Object.setPrototypeOf?Object.getPrototypeOf:h(function(P){return P.__proto__||Object.getPrototypeOf(P)},"_getPrototypeOf"),se(D)}h(se,"_getPrototypeOf");function be(D,T){var P="data-clipboard-".concat(D);if(T.hasAttribute(P))return T.getAttribute(P)}h(be,"getAttributeValue");var xe=function(D){F(P,D);var T=Y(P);function P(j,K){var U;return W(this,P),U=T.call(this),U.resolveOptions(K),U.listenClick(j),U}return h(P,"Clipboard"),R(P,[{key:"resolveOptions",value:h(function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof K.action=="function"?K.action:this.defaultAction,this.target=typeof K.target=="function"?K.target:this.defaultTarget,this.text=typeof K.text=="function"?K.text:this.defaultText,this.container=M(K.container)==="object"?K.container:document.body},"resolveOptions")},{key:"listenClick",value:h(function(K){var U=this;this.listener=f()(K,"click",function(ut){return U.onClick(ut)})},"listenClick")},{key:"onClick",value:h(function(K){var U=K.delegateTarget||K.currentTarget,ut=this.action(U)||"copy",Ir=A({action:ut,container:this.container,target:this.target(U),text:this.text(U)});this.emit(Ir?"success":"error",{action:ut,text:Ir,trigger:U,clearSelection:h(function(){U&&U.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()},"clearSelection")})},"onClick")},{key:"defaultAction",value:h(function(K){return be("action",K)},"defaultAction")},{key:"defaultTarget",value:h(function(K){var U=be("target",K);if(U)return document.querySelector(U)},"defaultTarget")},{key:"defaultText",value:h(function(K){return be("text",K)},"defaultText")},{key:"destroy",value:h(function(){this.listener.destroy()},"destroy")}],[{key:"copy",value:h(function(K){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return x(K,U)},"copy")},{key:"cut",value:h(function(K){return g(K)},"cut")},{key:"isSupported",value:h(function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],U=typeof K=="string"?[K]:K,ut=!!document.queryCommandSupported;return U.forEach(function(Ir){ut=ut&&!!document.queryCommandSupported(Ir)}),ut},"isSupported")}]),P}(c()),he=xe},828:function(s){var o=9;if(typeof Element<"u"&&!Element.prototype.matches){var l=Element.prototype;l.matches=l.matchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector||l.webkitMatchesSelector}function a(c,u){for(;c&&c.nodeType!==o;){if(typeof c.matches=="function"&&c.matches(u))return c;c=c.parentNode}}h(a,"closest"),s.exports=a},438:function(s,o,l){var a=l(828);function c(d,p,m,y,g){var v=f.apply(this,arguments);return d.addEventListener(m,v,g),{destroy:function(){d.removeEventListener(m,v,g)}}}h(c,"_delegate");function u(d,p,m,y,g){return typeof d.addEventListener=="function"?c.apply(null,arguments):typeof m=="function"?c.bind(null,document).apply(null,arguments):(typeof d=="string"&&(d=document.querySelectorAll(d)),Array.prototype.map.call(d,function(v){return c(v,p,m,y,g)}))}h(u,"delegate");function f(d,p,m,y){return function(g){g.delegateTarget=a(g.target,p),g.delegateTarget&&y.call(d,g)}}h(f,"listener"),s.exports=u},879:function(s,o){o.node=function(l){return l!==void 0&&l instanceof HTMLElement&&l.nodeType===1},o.nodeList=function(l){var a=Object.prototype.toString.call(l);return l!==void 0&&(a==="[object NodeList]"||a==="[object HTMLCollection]")&&"length"in l&&(l.length===0||o.node(l[0]))},o.string=function(l){return typeof l=="string"||l instanceof String},o.fn=function(l){var a=Object.prototype.toString.call(l);return a==="[object Function]"}},370:function(s,o,l){var a=l(879),c=l(438);function u(m,y,g){if(!m&&!y&&!g)throw new Error("Missing required arguments");if(!a.string(y))throw new TypeError("Second argument must be a String");if(!a.fn(g))throw new TypeError("Third argument must be a Function");if(a.node(m))return f(m,y,g);if(a.nodeList(m))return d(m,y,g);if(a.string(m))return p(m,y,g);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}h(u,"listen");function f(m,y,g){return m.addEventListener(y,g),{destroy:function(){m.removeEventListener(y,g)}}}h(f,"listenNode");function d(m,y,g){return Array.prototype.forEach.call(m,function(v){v.addEventListener(y,g)}),{destroy:function(){Array.prototype.forEach.call(m,function(v){v.removeEventListener(y,g)})}}}h(d,"listenNodeList");function p(m,y,g){return c(document.body,m,y,g)}h(p,"listenSelector"),s.exports=u},817:function(s){function o(l){var a;if(l.nodeName==="SELECT")l.focus(),a=l.value;else if(l.nodeName==="INPUT"||l.nodeName==="TEXTAREA"){var c=l.hasAttribute("readonly");c||l.setAttribute("readonly",""),l.select(),l.setSelectionRange(0,l.value.length),c||l.removeAttribute("readonly"),a=l.value}else{l.hasAttribute("contenteditable")&&l.focus();var u=window.getSelection(),f=document.createRange();f.selectNodeContents(l),u.removeAllRanges(),u.addRange(f),a=u.toString()}return a}h(o,"select"),s.exports=o},279:function(s){function o(){}h(o,"E"),o.prototype={on:function(l,a,c){var u=this.e||(this.e={});return(u[l]||(u[l]=[])).push({fn:a,ctx:c}),this},once:function(l,a,c){var u=this;function f(){u.off(l,f),a.apply(c,arguments)}return h(f,"listener"),f._=a,this.on(l,f,c)},emit:function(l){var a=[].slice.call(arguments,1),c=((this.e||(this.e={}))[l]||[]).slice(),u=0,f=c.length;for(u;u<f;u++)c[u].fn.apply(c[u].ctx,a);return this},off:function(l,a){var c=this.e||(this.e={}),u=c[l],f=[];if(u&&a)for(var d=0,p=u.length;d<p;d++)u[d].fn!==a&&u[d].fn._!==a&&f.push(u[d]);return f.length?c[l]=f:delete c[l],this}},s.exports=o,s.exports.TinyEmitter=o}},i={};function r(s){if(i[s])return i[s].exports;var o=i[s]={exports:{}};return t[s](o,o.exports,r),o.exports}return h(r,"__webpack_require__"),function(){r.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(o,{a:o}),o}}(),function(){r.d=function(s,o){for(var l in o)r.o(o,l)&&!r.o(s,l)&&Object.defineProperty(s,l,{enumerable:!0,get:o[l]})}}(),function(){r.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)}}(),r(686)}().default})})(Gg);var MS=AS(Gg.exports),TS=h(function(e,t){var i=Date.now(),r;return function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Date.now()-i<t&&r&&clearTimeout(r),r=setTimeout(function(){e.apply(void 0,o)},t),i=Date.now()}},"debounce"),ac={name:"JsonViewer",components:{JsonBox:tl},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"light"},timeformat:{type:Function,default:h(function(e){return e.toLocaleString()},"_default")},previewMode:{type:Boolean,default:!1}},provide:h(function(){return{expandDepth:this.expandDepth,timeformat:this.timeformat,keyClick:this.keyClick}},"provide"),data:h(function(){return{copied:!1,expandableCode:!1,expandCode:this.expanded}},"data"),emits:["onKeyClick"],computed:{jvClass:h(function(){return"jv-container jv-"+this.theme+(this.boxed?" boxed":"")},"jvClass"),copyText:h(function(){var e=this.copyable,t=e.copyText,i=e.copiedText,r=e.timeout,s=e.align;return{copyText:t||"copy",copiedText:i||"copied!",timeout:r||2e3,align:s}},"copyText")},watch:{value:h(function(){this.onResized()},"value")},mounted:h(function(){var e=this;if(this.debounceResized=TS(this.debResized.bind(this),200),this.boxed&&this.$refs.jsonBox&&(this.onResized(),this.$refs.jsonBox.$el.addEventListener("resized",this.onResized,!0)),this.copyable){var t=new MS(this.$refs.clip,{text:h(function(){return JSON.stringify(e.value,null,2)},"text")});t.on("success",function(i){e.onCopied(i)})}},"mounted"),methods:{onResized:h(function(){this.debounceResized()},"onResized"),debResized:h(function(){var e=this;this.$nextTick(function(){e.$refs.jsonBox&&(e.$refs.jsonBox.$el.clientHeight>=250?e.expandableCode=!0:e.expandableCode=!1)})},"debResized"),keyClick:h(function(e){this.$emit("onKeyClick",e)},"keyClick"),onCopied:h(function(e){var t=this;this.copied||(this.copied=!0,setTimeout(function(){t.copied=!1},this.copyText.timeout),this.$emit("copied",e))},"onCopied"),toggleExpandCode:h(function(){this.expandCode=!this.expandCode},"toggleExpandCode")}};function OS(n,e,t,i,r,s){var o=s0("json-box");return ee(),Pe("div",{class:st(s.jvClass)},[t.copyable?(ee(),Pe("div",{key:0,class:st("jv-tooltip ".concat(s.copyText.align||"right"))},[ie("span",{ref:"clip",class:st(["jv-button",{copied:r.copied}])},[Vt(n.$slots,"copy",{copied:r.copied},function(){return[Ue(ws(r.copied?s.copyText.copiedText:s.copyText.copyText),1)]})],2)],2)):Oi("v-if",!0),ie("div",{class:st(["jv-code",{open:r.expandCode,boxed:t.boxed}])},[Se(o,{ref:"jsonBox",value:t.value,sort:t.sort,"preview-mode":t.previewMode},null,8,["value","sort","preview-mode"])],2),r.expandableCode&&t.boxed?(ee(),Pe("div",{key:1,class:"jv-more",onClick:e[0]||(e[0]=function(){return s.toggleExpandCode&&s.toggleExpandCode.apply(s,arguments)})},[ie("span",{class:st(["jv-toggle",{open:!!r.expandCode}])},null,2)])):Oi("v-if",!0)],2)}h(OS,"render");ac.render=OS;ac.__file="src/Components/json-viewer.vue";var It;function Kg(n){return new RegExp("^(?:"+n.join("|")+")$","i")}h(Kg,"wordRegexp");var DS=Kg(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),ES=Kg(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load","into"]),LS=/[*+\-<>=&|\^\/!\?]/,Md="[A-Za-z_\\-0-9]",PS=new RegExp("[A-Za-z]"),RS=new RegExp("(("+Md+"|\\.)*("+Md+"))?:");function $g(n,e){var t=n.next();if(It=null,t=="$"||t=="?")return t=="?"&&n.match(/\s/,!1)?"operator":(n.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variableName.local");if(t=="<"&&!n.match(/^[\s\u00a0=]/,!1))return n.match(/^[^\s\u00a0>]*>?/),"atom";if(t=='"'||t=="'")return e.tokenize=BS(t),e.tokenize(n,e);if(/[{}\(\),\.;\[\]]/.test(t))return It=t,"bracket";if(t=="#")return n.skipToEnd(),"comment";if(LS.test(t))return"operator";if(t==":")return Td(n),"atom";if(t=="@")return n.eatWhile(/[a-z\d\-]/i),"meta";if(PS.test(t)&&n.match(RS))return Td(n),"atom";n.eatWhile(/[_\w\d]/);var i=n.current();return DS.test(i)?"builtin":ES.test(i)?"keyword":"variable"}h($g,"tokenBase");function Td(n){n.match(/(\.(?=[\w_\-\\%])|[:\w_-]|\\[-\\_~.!$&'()*+,;=/?#@%]|%[a-f\d][a-f\d])+/i)}h(Td,"eatPnLocal");function BS(n){return function(e,t){for(var i=!1,r;(r=e.next())!=null;){if(r==n&&!i){t.tokenize=$g;break}i=!i&&r=="\\"}return"string"}}h(BS,"tokenLiteral");function as(n,e,t){n.context={prev:n.context,indent:n.indent,col:t,type:e}}h(as,"pushContext");function hs(n){n.indent=n.context.indent,n.context=n.context.prev}h(hs,"popContext");const NS={name:"sparql",startState:function(){return{tokenize:$g,context:null,indent:0,col:0}},token:function(n,e){if(n.sol()&&(e.context&&e.context.align==null&&(e.context.align=!1),e.indent=n.indentation()),n.eatSpace())return null;var t=e.tokenize(n,e);if(t!="comment"&&e.context&&e.context.align==null&&e.context.type!="pattern"&&(e.context.align=!0),It=="(")as(e,")",n.column());else if(It=="[")as(e,"]",n.column());else if(It=="{")as(e,"}",n.column());else if(/[\]\}\)]/.test(It)){for(;e.context&&e.context.type=="pattern";)hs(e);e.context&&It==e.context.type&&(hs(e),It=="}"&&e.context&&e.context.type=="pattern"&&hs(e))}else It=="."&&e.context&&e.context.type=="pattern"?hs(e):/atom|string|variable/.test(t)&&e.context&&(/[\}\]]/.test(e.context.type)?as(e,"pattern",n.column()):e.context.type=="pattern"&&!e.context.align&&(e.context.align=!0,e.context.col=n.column()));return t},indent:function(n,e,t){var i=e&&e.charAt(0),r=n.context;if(/[\]\}]/.test(i))for(;r&&r.type=="pattern";)r=r.prev;var s=r&&i==r.type;return r?r.type=="pattern"?r.col:r.align?r.col+(s?0:1):r.indent+(s?0:t.unit):0},languageData:{commentTokens:{line:"#"}}},IS=l0(nS),FS={class:"flex h-[100dvh] flex-col items-stretch",style:{"--sidebar-measure":"6.75rem","--sidebar-width":"var(--sidebar-measure)","--divider-width":"0.125rem"}},VS={class:"relative h-full w-full"},WS=["inert"],jS={class:"relative h-full w-full"},HS={class:"flex gap-2.5"},zS={class:"h-full overflow-auto p-4 text-[#565869] dark:text-[#D9D7CE] md:px-8 md:py-6"},GS={key:1,class:"text-red-500 dark:text-red-400 whitespace-pre-line"},YS=ye({__name:"index",setup(n){const e=op(),t=Rh(),i=Bh(),r=qa.define(NS),s=H(!1),o=Sy(wh(t,"state"),350),l=H("");ge(o,y=>{i.state&&(l.value=y)},{immediate:!0});const a=dS(l),c=H();ge(()=>a.value.data,(y,g)=>{JSON.stringify(y)!==JSON.stringify(g)&&(c.value=y)},{deep:!0,immediate:!0});const u=z(()=>a.value.success);ge(()=>i.state,y=>{y&&(typeof c.value>"u"||(l.value=t.state))});const f=[r,rn.of([{key:"Mod-Enter",preventDefault:!0,run:()=>i.state?!0:(l.value=t.state,!1)}])],d=z(()=>e.theme==="dark"?yS:xS),p=xy(!1,3e3);function m(){window.navigator.clipboard.writeText(JSON.stringify(c.value,null,2)).then(()=>{p.value=!0})}return h(m,"copyJs"),(y,g)=>{const v=Jy,w=pb,x=mb,C=IS,k=tp,A=Th,M=uS;return ee(),Pe("div",FS,[Se(v),Se(M,null,{actions:me(()=>[Se(w)]),left:me(()=>[ie("div",VS,[Se(x,{visible:!G(s)},{default:me(()=>g[4]||(g[4]=[Ue("SPARQL")])),_:1},8,["visible"]),Se(C,{modelValue:G(t).state,"onUpdate:modelValue":g[0]||(g[0]=W=>G(t).state=W),onFocus:g[1]||(g[1]=W=>s.value=!0),onBlur:g[2]||(g[2]=W=>s.value=!1),theme:G(d).theme,"highlight-style":G(d).highlightStyle,"line-numbers":"",extensions:f},null,8,["modelValue","theme","highlight-style"])])]),divider:me(()=>[g[6]||(g[6]=ie("hr",{class:"h-full w-full border-none bg-slate-100 dark:bg-slate-800"},null,-1)),ie("button",{onClick:g[3]||(g[3]=W=>l.value=G(t).state),class:st(["3xl:p-4 absolute left-1/2 z-20 -translate-x-1/2 translate-y-[calc(-50%_+_0.5_*_var(--divider-width))] rounded-full bg-primary-600 p-3 text-white shadow-[0_0.1rem_0.125rem_rgb(0_0_0_/_25%),0_0.25rem_1rem_rgb(0_0_0_/_25%)] transition-opacity duration-150 hover:bg-primary-500 focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-primary-500 active:scale-[0.96] active:bg-primary-700 active:text-primary-100 md:left-auto md:top-1/2 md:-translate-y-1/2 md:translate-x-[calc(-50%_+_0.5_*_var(--divider-width))] xl:p-3.5",{"pointer-events-none opacity-0":G(i).state}]),inert:G(i).state},g[5]||(g[5]=[ie("svg",{"aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 xl:w-5 xl:h-5 3xl:w-6 3xl:h-6 translate-x-[10%]",viewBox:"0 0 448 512"},[ie("path",{fill:"currentColor",d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"})],-1),ie("span",{class:"sr-only"},"Play",-1)]),10,WS)]),right:me(()=>[ie("div",jS,[G(u)&&G(c)!=null?(ee(),Fe(A,{key:0,class:"absolute right-0 top-0 z-10 rounded-bl-md bg-slate-100 hover:bg-slate-200 px-3 py-3 text-sm leading-none transition-opacity dark:bg-slate-800 dark:hover:bg-slate-700 dark:active:bg-slate-800 dark:text-slate-400 dark:active:text-slate-500 cursor-pointer",onClick:m},{default:me(()=>[ie("span",HS,[g[7]||(g[7]=Ue(" SPARQL.js ")),G(p)?(ee(),Fe(k,{key:1,name:"check",alt:"Copied",class:"w-3.5 h-3.5 text-primary"})):(ee(),Fe(k,{key:0,alt:"Copy as JSON",name:"copy",class:"w-3.5 h-3.5"}))])]),_:1})):G(c)==null?(ee(),Fe(x,{key:1},{default:me(()=>g[8]||(g[8]=[Ue("SPARQL.js")])),_:1})):(ee(),Fe(x,{key:2},{default:me(()=>g[9]||(g[9]=[Ue("SPARQL.js Parsing Error")])),_:1})),ie("div",zS,[G(u)?(ee(),Pe(ir,{key:0},[G(c)!=null?(ee(),Fe(G(ac),{key:0,value:G(c),expanded:"","expand-depth":1/0},null,8,["value"])):Oi("",!0)],64)):(ee(),Pe("pre",GS,ws(G(c)),1))])])]),_:1})])}}});export{YS as default};
